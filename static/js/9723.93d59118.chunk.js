"use strict";(self.webpackChunkthreejs_editor_react=self.webpackChunkthreejs_editor_react||[]).push([[9723],{9723:(t,e,r)=>{r.r(e),r.d(e,{TScatterPainter:()=>l});var i=r(9490),a=r(4435),s=r(6232),n=r(3921),o=r(4913),f=r(6183);class l extends n.TGraphPainter{constructor(t,e){super(t,e),this._need_2dhist=!0,this._not_adjust_hrange=!0}getGraph(){return this.getObject()?.fGraph}getHistRangeMargin(){return this.getObject()?.fMargin??.1}async drawAxisHisto(){const t=this.createHistogram();return f.AJ.draw(this.getDom(),t,this.options.Axis+";IGNORE_PALETTE")}getPalette(){const t=this.getGraph();let e=t?.fFunctions?.arr?.find((t=>t._typename===i.clTPaletteAxis));if(e)return e;if(t){e=(0,i.create)(i.clTPaletteAxis);const r=this.get_main();Object.assign(e,{fX1NDC:r.fX2NDC+.005,fX2NDC:r.fX2NDC+.05,fY1NDC:r.fY1NDC,fY2NDC:r.fY2NDC,fInit:1,$can_move:!0}),Object.assign(e.fAxis,{fChopt:"+",fLineColor:1,fLineSyle:1,fLineWidth:1,fTextAngle:0,fTextAlign:11,fNdiv:510}),t.fFunctions.AddFirst(e,"")}return e}_updateMembers(t,e){return t.fBits=e.fBits,t.fTitle=e.fTitle,t.fNpoints=e.fNpoints,t.fColor=e.fColor,t.fSize=e.fSize,t.fMargin=e.fMargin,t.fMinMarkerSize=e.fMinMarkerSize,t.fMaxMarkerSize=e.fMaxMarkerSize,super._updateMembers(t.fGraph,e.fGraph)}async drawGraph(){const t=this.get_main(),e=this.getMainPainter(),r=this.getObject();let n=1,f=0;if(!t||!e||!r)return;if(r.fColor){const e=this.getPalette();e&&(e.$main_painter=this);const s=this.getPadPainter();!this._color_palette&&(0,i.isFunc)(s?.getCustomPalette)&&(this._color_palette=s.getCustomPalette()),this._color_palette||(this._color_palette=(0,a.jh)(this.options.Palette,s?.isGrayscale()));let n=r.fColor[0],f=r.fColor[0];for(let t=1;t<r.fColor.length;++t)n=Math.min(n,r.fColor[t]),f=Math.max(f,r.fColor[t]);f<=n&&(f=n<0?.9*n:n>0?1.1*n:1),this.fContour=new o.Z8(n,f),this.fContour.createNormal(30),this.fContour.configIndicies(0,0),t.zmin=n,t.zmax=f}if(r.fSize){let t=r.fSize[0],e=r.fSize[0];for(let i=1;i<r.fSize.length;++i)t=Math.min(t,r.fSize[i]),e=Math.max(e,r.fSize[i]);e<=t&&(e=t<0?.9*t:t>0?1.1*t:1),n=(r.fMaxMarkerSize-r.fMinMarkerSize)/(e-t),f=t}this.createG(!t.pad_layer);const l=t.getGrFuncs();for(let i=0;i<this.bins.length;++i){const t=this.bins[i],e=l.grx(t.x),a=l.gry(t.y),o=r.fSize?r.fMinMarkerSize+n*(r.fSize[i]-f):r.fMarkerSize,h=r.fColor?this.fContour.getPaletteColor(this._color_palette,r.fColor[i]):this.getColor(r.fMarkerColor),c=new s.e({color:h,size:o,style:r.fMarkerStyle});this.draw_g.append("svg:path").attr("d",c.create(e,a)).call(c.func)}return this}static async draw(t,e,r){return n.TGraphPainter._drawGraph(new l(t,e),r)}}}}]);
//# sourceMappingURL=9723.93d59118.chunk.js.map