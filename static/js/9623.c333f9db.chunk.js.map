{"version":3,"file":"static/js/9623.c333f9db.chunk.js","mappings":"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","sources":["../node_modules/jsroot/modules/hist/THStackPainter.mjs"],"sourcesContent":["import { clone, create, createHistogram, setHistogramTitle, BIT,\n         gStyle, clTList, clTH1I, clTH2, clTH2I, kNoZoom, kNoStats } from '../core.mjs';\nimport { DrawOptions } from '../base/BasePainter.mjs';\nimport { ObjectPainter, EAxisBits } from '../base/ObjectPainter.mjs';\nimport { TH1Painter } from './TH1Painter.mjs';\nimport { TH2Painter } from './TH2Painter.mjs';\nimport { ensureTCanvas } from '../gpad/TCanvasPainter.mjs';\n\n\nconst kIsZoomed = BIT(16); // bit set when zooming on Y axis\n\n/**\n * @summary Painter class for THStack\n *\n * @private\n */\n\nclass THStackPainter extends ObjectPainter {\n\n   /** @summary constructor\n     * @param {object|string} dom - DOM element for drawing or element id\n     * @param {object} stack - THStack object\n     * @param {string} [opt] - draw options */\n   constructor(dom, stack, opt) {\n      super(dom, stack, opt);\n      this.firstpainter = null;\n      this.painters = []; // keep painters to be able update objects\n   }\n\n   /** @summary Cleanup THStack painter */\n   cleanup() {\n      this.getPadPainter()?.cleanPrimitives(objp => { return (objp === this.firstpainter) || (this.painters.indexOf(objp) >= 0); });\n      delete this.firstpainter;\n      delete this.painters;\n      super.cleanup();\n   }\n\n   /** @summary Build sum of all histograms\n     * @desc Build a separate list fStack containing the running sum of all histograms */\n   buildStack(stack) {\n      if (!stack.fHists) return false;\n      const nhists = stack.fHists.arr.length;\n      if (nhists <= 0) return false;\n      const lst = create(clTList);\n      lst.Add(clone(stack.fHists.arr[0]), stack.fHists.opt[0]);\n      for (let i = 1; i < nhists; ++i) {\n         const hnext = clone(stack.fHists.arr[i]),\n               hnextopt = stack.fHists.opt[i],\n               hprev = lst.arr[i-1],\n               xnext = hnext.fXaxis, xprev = hprev.fXaxis;\n\n         let match = (xnext.fNbins === xprev.fNbins) &&\n                     (xnext.fXmin === xprev.fXmin) &&\n                     (xnext.fXmax === xprev.fXmax);\n\n         if (!match && (xnext.fNbins > 0) && (xnext.fNbins < xprev.fNbins) && (xnext.fXmin === xprev.fXmin) &&\n             (Math.abs((xnext.fXmax - xnext.fXmin)/xnext.fNbins - (xprev.fXmax - xprev.fXmin)/xprev.fNbins) < 0.0001)) {\n            // simple extension of histogram to make sum\n            const arr = new Array(hprev.fNcells).fill(0);\n            for (let n = 1; n <= xnext.fNbins; ++n)\n               arr[n] = hnext.fArray[n];\n            hnext.fNcells = hprev.fNcells;\n            Object.assign(xnext, xprev);\n            hnext.fArray = arr;\n            match = true;\n         }\n         if (!match) {\n            console.warn(`When drawing THStack, cannot sum-up histograms ${hnext.fName} and ${hprev.fName}`);\n            lst.Clear();\n            return false;\n         }\n\n         // trivial sum of histograms\n         for (let n = 0; n < hnext.fArray.length; ++n)\n            hnext.fArray[n] += hprev.fArray[n];\n\n         lst.Add(hnext, hnextopt);\n      }\n      stack.fStack = lst;\n      return true;\n   }\n\n   /** @summary Returns stack min/max values */\n   getMinMax(iserr) {\n      const stack = this.getObject(),\n            pad = this.getPadPainter().getRootPad(true);\n      let min = 0, max = 0;\n\n      const getHistMinMax = (hist, witherr) => {\n         const res = { min: 0, max: 0 };\n         let domin = true, domax = true;\n         if (hist.fMinimum !== kNoZoom) {\n            res.min = hist.fMinimum;\n            domin = false;\n         }\n         if (hist.fMaximum !== kNoZoom) {\n            res.max = hist.fMaximum;\n            domax = false;\n         }\n\n         if (!domin && !domax) return res;\n\n         let i1 = 1, i2 = hist.fXaxis.fNbins, j1 = 1, j2 = 1, first = true;\n\n         if (hist.fXaxis.TestBit(EAxisBits.kAxisRange)) {\n            i1 = hist.fXaxis.fFirst;\n            i2 = hist.fXaxis.fLast;\n         }\n\n         if (hist._typename.indexOf(clTH2) === 0) {\n            j2 = hist.fYaxis.fNbins;\n            if (hist.fYaxis.TestBit(EAxisBits.kAxisRange)) {\n               j1 = hist.fYaxis.fFirst;\n               j2 = hist.fYaxis.fLast;\n            }\n         }\n         for (let j = j1; j <= j2; ++j) {\n            for (let i = i1; i <= i2; ++i) {\n               const val = hist.getBinContent(i, j),\n                   err = witherr ? hist.getBinError(hist.getBin(i, j)) : 0;\n               if (domin && (first || (val-err < res.min))) res.min = val-err;\n               if (domax && (first || (val+err > res.max))) res.max = val+err;\n               first = false;\n           }\n         }\n\n         return res;\n      };\n\n      if (this.options.nostack) {\n         for (let i = 0; i < stack.fHists.arr.length; ++i) {\n            const resh = getHistMinMax(stack.fHists.arr[i], iserr);\n            if (i === 0) {\n               min = resh.min; max = resh.max;\n             } else {\n               min = Math.min(min, resh.min);\n               max = Math.max(max, resh.max);\n            }\n         }\n      } else {\n         min = getHistMinMax(stack.fStack.arr[0], iserr).min;\n         max = getHistMinMax(stack.fStack.arr[stack.fStack.arr.length-1], iserr).max;\n      }\n\n      max *= (1 + gStyle.fHistTopMargin);\n\n      if (stack.fMaximum !== kNoZoom)\n         max = stack.fMaximum;\n\n      if (stack.fMinimum !== kNoZoom)\n         min = stack.fMinimum;\n\n      if (pad?.fLogv ?? (this.options.ndim === 1 ? pad?.fLogy : pad?.fLogz)) {\n         if (max <= 0) max = 1;\n         if (min <= 0) min = 1e-4*max;\n         const kmin = 1/(1 + 0.5*Math.log10(max / min)),\n               kmax = 1 + 0.2*Math.log10(max / min);\n         min *= kmin;\n         max *= kmax;\n      } else if ((min < 0.9*max) && (min !== stack.fMinimum))\n         min = 0;\n\n      if ((stack.fMaximum !== kNoZoom) && this.options.nostack)\n         max = stack.fMaximum;\n\n      if ((stack.fMinimum !== kNoZoom) && this.options.nostack)\n         min = stack.fMinimum;\n\n      const res = { min, max, hopt: `hmin:${min};hmax:${max}` };\n      if (this.options.nostack || !stack.fHistogram?.TestBit(kIsZoomed))\n         res.hopt += ';ignore_min_max';\n      return res;\n   }\n\n   /** @summary Provide draw options for the histogram */\n   getHistDrawOption(hist, opt) {\n      let hopt = opt || hist.fOption || this.options.hopt;\n      if (hopt.toUpperCase().indexOf(this.options.hopt) < 0)\n         hopt += ' ' + this.options.hopt;\n      if (this.options.draw_errors && !hopt)\n         hopt = 'E';\n      if (!this.options.pads)\n         hopt += ' same nostat' + this.options.auto;\n      return hopt;\n   }\n\n   /** @summary Draw next stack histogram */\n   async drawNextHisto(indx, pad_painter) {\n      const stack = this.getObject(),\n            hlst = this.options.nostack ? stack.fHists : stack.fStack,\n            nhists = hlst?.arr?.length || 0;\n\n      if (indx >= nhists)\n         return this;\n\n      const rindx = this.options.horder ? indx : nhists-indx-1,\n            subid = this.options.nostack ? `hists_${rindx}` : `stack_${rindx}`,\n            hist = hlst.arr[rindx],\n            hopt = this.getHistDrawOption(hist, hlst.opt[rindx]);\n\n      // handling of 'pads' draw option\n      if (pad_painter) {\n         const subpad_painter = pad_painter.getSubPadPainter(indx+1);\n         if (!subpad_painter)\n            return this;\n\n         const prev_name = subpad_painter.selectCurrentPad(subpad_painter.this_pad_name);\n\n         return this.hdraw_func(subpad_painter.getDom(), hist, hopt).then(subp => {\n            if (subp) {\n               subp.setSecondaryId(this, subid);\n               this.painters.push(subp);\n            }\n            subpad_painter.selectCurrentPad(prev_name);\n            return this.drawNextHisto(indx+1, pad_painter);\n         });\n      }\n\n      // special handling of stacked histograms - set $baseh object for correct drawing\n      // also used to provide tooltips\n      if ((rindx > 0) && !this.options.nostack)\n         hist.$baseh = hlst.arr[rindx - 1];\n      // this number used for auto colors creation\n      if (this.options.auto)\n         hist.$num_histos = nhists;\n\n      return this.hdraw_func(this.getDom(), hist, hopt).then(subp => {\n          subp.setSecondaryId(this, subid);\n          this.painters.push(subp);\n          return this.drawNextHisto(indx+1, pad_painter);\n      });\n   }\n\n   /** @summary Decode draw options of THStack painter */\n   decodeOptions(opt) {\n      if (!this.options) this.options = {};\n      Object.assign(this.options, { ndim: 1, nostack: false, same: false, horder: true, has_errors: false, draw_errors: false, hopt: '', auto: '' });\n\n      const stack = this.getObject(),\n            hist = stack.fHistogram || (stack.fHists ? stack.fHists.arr[0] : null) || (stack.fStack ? stack.fStack.arr[0] : null),\n\n       hasErrors = hist => {\n         if (hist.fSumw2 && (hist.fSumw2.length > 0)) {\n            for (let n = 0; n < hist.fSumw2.length; ++n)\n               if (hist.fSumw2[n] > 0) return true;\n         }\n         return false;\n      };\n\n      if (hist && (hist._typename.indexOf(clTH2) === 0))\n         this.options.ndim = 2;\n\n      if ((this.options.ndim === 2) && !opt)\n         opt = 'lego1';\n\n      if (stack.fHists && !this.options.nostack) {\n         for (let k = 0; k < stack.fHists.arr.length; ++k)\n            this.options.has_errors = this.options.has_errors || hasErrors(stack.fHists.arr[k]);\n      }\n\n      this.options.nhist = stack.fHists?.arr?.length ?? 1;\n\n      const d = new DrawOptions(opt);\n\n      this.options.nostack = d.check('NOSTACK');\n      if (d.check('STACK')) this.options.nostack = false;\n      this.options.same = d.check('SAME');\n\n      d.check('NOCLEAR'); // ignore noclear option\n\n      ['PFC', 'PLC', 'PMC'].forEach(f => { if (d.check(f)) this.options.auto += ' ' + f; });\n\n      this.options.pads = d.check('PADS');\n      if (this.options.pads) this.options.nostack = true;\n\n      this.options.hopt = d.remain(); // use remaining draw options for histogram draw\n\n      const dolego = d.check('LEGO');\n\n      this.options.errors = d.check('E');\n\n      // if any histogram appears with pre-calculated errors, use E for all histograms\n      if (!this.options.nostack && this.options.has_errors && !dolego && !d.check('HIST') && (this.options.hopt.indexOf('E') < 0))\n         this.options.draw_errors = true;\n\n      this.options.horder = this.options.nostack || dolego;\n   }\n\n   /** @summary Create main histogram for THStack axis drawing */\n   createHistogram(stack) {\n      const histos = stack.fHists,\n            numhistos = histos ? histos.arr.length : 0;\n\n      if (!numhistos) {\n         const histo = createHistogram(clTH1I, 100);\n         setHistogramTitle(histo, stack.fTitle);\n         histo.fBits |= kNoStats;\n         return histo;\n      }\n\n      const h0 = histos.arr[0],\n            histo = createHistogram((this.options.ndim === 1) ? clTH1I : clTH2I, h0.fXaxis.fNbins, h0.fYaxis.fNbins);\n      histo.fName = 'axis_hist';\n      histo.fBits |= kNoStats;\n      Object.assign(histo.fXaxis, h0.fXaxis);\n      if (this.options.ndim === 2)\n         Object.assign(histo.fYaxis, h0.fYaxis);\n\n      // this code is not exists in ROOT painter, can be skipped?\n      for (let n = 1; n < numhistos; ++n) {\n         const h = histos.arr[n];\n\n         if (!histo.fXaxis.fLabels) {\n            histo.fXaxis.fXmin = Math.min(histo.fXaxis.fXmin, h.fXaxis.fXmin);\n            histo.fXaxis.fXmax = Math.max(histo.fXaxis.fXmax, h.fXaxis.fXmax);\n         }\n\n         if ((this.options.ndim === 2) && !histo.fYaxis.fLabels) {\n            histo.fYaxis.fXmin = Math.min(histo.fYaxis.fXmin, h.fYaxis.fXmin);\n            histo.fYaxis.fXmax = Math.max(histo.fYaxis.fXmax, h.fYaxis.fXmax);\n         }\n      }\n\n      histo.fTitle = stack.fTitle;\n\n      return histo;\n   }\n\n   /** @summary Update thstack object */\n   updateObject(obj) {\n      if (!this.matchObjectType(obj)) return false;\n\n      const stack = this.getObject();\n\n      stack.fHists = obj.fHists;\n      stack.fStack = obj.fStack;\n      stack.fTitle = obj.fTitle;\n      stack.fMinimum = obj.fMinimum;\n      stack.fMaximum = obj.fMaximum;\n\n      if (!this.options.nostack)\n         this.options.nostack = !this.buildStack(stack);\n\n      if (this.firstpainter) {\n         let src = obj.fHistogram;\n         if (!src)\n            src = stack.fHistogram = this.createHistogram(stack);\n\n         const mm = this.getMinMax(this.options.errors || this.options.draw_errors);\n         this.firstpainter.options.hmin = mm.min;\n         this.firstpainter.options.hmax = mm.max;\n\n         this.firstpainter._checked_zooming = false; // force to check 3d zooming\n\n         if (this.options.ndim === 1) {\n            this.firstpainter.ymin = mm.min;\n            this.firstpainter.ymax = mm.max;\n         } else {\n            this.firstpainter.zmin = mm.min;\n            this.firstpainter.zmax = mm.max;\n         }\n\n         this.firstpainter.updateObject(src);\n\n         this.firstpainter.options.ignore_min_max = this.options.nostack || !src.TestBit(kIsZoomed);\n      }\n\n      // and now update histograms\n      const hlst = this.options.nostack ? stack.fHists : stack.fStack,\n            nhists = hlst?.arr?.length ?? 0;\n\n      if (nhists !== this.painters.length) {\n         this.did_update = 1;\n         this.getPadPainter()?.cleanPrimitives(objp => this.painters.indexOf(objp) >= 0);\n         this.painters = [];\n      } else {\n         this.did_update = 2;\n         for (let indx = 0; indx < nhists; ++indx) {\n            const rindx = this.options.horder ? indx : nhists - indx - 1,\n                  hist = hlst.arr[rindx];\n            this.painters[indx].updateObject(hist, this.getHistDrawOption(hist, hlst.opt[rindx]));\n         }\n      }\n\n      return true;\n   }\n\n   /** @summary Redraw THStack\n     * @desc Do something if previous update had changed number of histograms */\n   redraw(reason) {\n      if (!this.did_update)\n         return;\n\n      const full_redraw = this.did_update === 1;\n      delete this.did_update;\n\n      const pr = this.firstpainter ? this.firstpainter.redraw(reason) : Promise.resolve(this);\n\n      return pr.then(() => {\n         if (full_redraw)\n            return this.drawNextHisto(0, this.options.pads ? this.getPadPainter() : null);\n\n         const redrawSub = indx => {\n            if (indx >= this.painters.length)\n               return this;\n            return this.painters[indx].redraw(reason).then(() => redrawSub(indx+1));\n         };\n         return redrawSub(0);\n      });\n   }\n\n   /** @summary Fill hstack context menu */\n   fillContextMenuItems(menu) {\n      menu.addchk(this.options.draw_errors, 'Draw errors', flag => {\n         this.options.draw_errors = flag;\n         const stack = this.getObject(),\n               hlst = this.options.nostack ? stack.fHists : stack.fStack,\n               nhists = hlst?.arr?.length ?? 0;\n         for (let indx = 0; indx < nhists; ++indx) {\n            const rindx = this.options.horder ? indx : nhists - indx - 1,\n                  hist = hlst.arr[rindx];\n            this.painters[indx].decodeOptions(this.getHistDrawOption(hist, hlst.opt[rindx]));\n         }\n         this.redrawPad();\n      }, 'Change draw erros in the stack');\n   }\n\n   /** @summary draw THStack object */\n   static async draw(dom, stack, opt) {\n      if (!stack.fHists || !stack.fHists.arr)\n         return null; // drawing not needed\n\n      const painter = new THStackPainter(dom, stack, opt);\n      let pad_painter = null, skip_drawing = false;\n\n      return ensureTCanvas(painter, false).then(() => {\n         painter.decodeOptions(opt);\n\n         painter.hdraw_func = (painter.options.ndim === 1) ? TH1Painter.draw : TH2Painter.draw;\n\n         if (painter.options.pads) {\n            pad_painter = painter.getPadPainter();\n            if (pad_painter.doingDraw() && pad_painter.pad?.fPrimitives &&\n                (pad_painter.pad.fPrimitives.arr.length > 1) && (pad_painter.pad.fPrimitives.arr.indexOf(stack) === 0)) {\n               skip_drawing = true;\n               console.log('special case with THStack with is already rendered - do nothing');\n               return;\n            }\n\n            pad_painter.cleanPrimitives(p => p !== painter);\n            return pad_painter.divide(painter.options.nhist);\n         }\n\n         if (!painter.options.nostack)\n             painter.options.nostack = !painter.buildStack(stack);\n\n         if (painter.options.same || !stack.fHists?.arr.length) {\n            painter.addToPadPrimitives();\n            return;\n         }\n\n         const no_histogram = !stack.fHistogram;\n\n         if (no_histogram)\n             stack.fHistogram = painter.createHistogram(stack);\n\n         const mm = painter.getMinMax(painter.options.errors || painter.options.draw_errors),\n               hopt = painter.options.hopt + ';' + mm.hopt;\n\n         return painter.hdraw_func(dom, stack.fHistogram, hopt).then(subp => {\n            painter.addToPadPrimitives();\n            painter.firstpainter = subp;\n            subp.setSecondaryId(painter, 'hist'); // mark hist painter as created by hstack\n         });\n      }).then(() => skip_drawing ? painter : painter.drawNextHisto(0, pad_painter));\n   }\n\n} // class THStackPainter\n\nexport { THStackPainter };\n"],"names":["kIsZoomed","BIT","THStackPainter","ObjectPainter","constructor","dom","stack","opt","super","this","firstpainter","painters","cleanup","getPadPainter","cleanPrimitives","objp","indexOf","buildStack","fHists","nhists","arr","length","lst","create","clTList","Add","clone","i","hnext","hnextopt","hprev","xnext","fXaxis","xprev","match","fNbins","fXmin","fXmax","Math","abs","Array","fNcells","fill","n","fArray","Object","assign","console","warn","fName","Clear","fStack","getMinMax","iserr","getObject","pad","getRootPad","min","max","getHistMinMax","hist","witherr","res","domin","domax","fMinimum","kNoZoom","fMaximum","i1","i2","j1","j2","first","TestBit","EAxisBits","kAxisRange","fFirst","fLast","_typename","clTH2","fYaxis","j","val","getBinContent","err","getBinError","getBin","options","nostack","resh","gStyle","fHistTopMargin","fLogv","ndim","fLogy","fLogz","kmin","log10","kmax","hopt","fHistogram","getHistDrawOption","fOption","toUpperCase","draw_errors","pads","auto","drawNextHisto","indx","pad_painter","hlst","rindx","horder","subid","subpad_painter","getSubPadPainter","prev_name","selectCurrentPad","this_pad_name","hdraw_func","getDom","then","subp","setSecondaryId","push","$baseh","$num_histos","decodeOptions","same","has_errors","hasErrors","fSumw2","k","nhist","d","DrawOptions","check","forEach","f","remain","dolego","errors","createHistogram","histos","numhistos","histo","clTH1I","setHistogramTitle","fTitle","fBits","kNoStats","h0","clTH2I","h","fLabels","updateObject","obj","matchObjectType","src","mm","hmin","hmax","_checked_zooming","ymin","ymax","zmin","zmax","ignore_min_max","did_update","redraw","reason","full_redraw","Promise","resolve","redrawSub","fillContextMenuItems","menu","addchk","flag","redrawPad","draw","painter","skip_drawing","ensureTCanvas","TH1Painter","TH2Painter","doingDraw","fPrimitives","log","p","divide","addToPadPrimitives"],"sourceRoot":""}