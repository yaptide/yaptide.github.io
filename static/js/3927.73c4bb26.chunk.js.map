{"version":3,"file":"static/js/3927.73c4bb26.chunk.js","mappings":"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","sources":["../node_modules/jsroot/modules/hist/TF1Painter.mjs","../node_modules/jsroot/modules/hist/TF2Painter.mjs"],"sourcesContent":["import { settings, gStyle, isStr, isFunc, clTH1D, createHistogram, setHistogramTitle, clTF1, kNoStats } from '../core.mjs';\nimport { floatToString } from '../base/BasePainter.mjs';\nimport { getElementMainPainter, ObjectPainter } from '../base/ObjectPainter.mjs';\nimport { THistPainter } from '../hist2d/THistPainter.mjs';\nimport { TH1Painter } from '../hist2d/TH1Painter.mjs';\nimport { proivdeEvalPar, _getTF1Save } from '../base/func.mjs';\n\n\n/** @summary Create log scale for axis bins\n  * @private */\nfunction produceTAxisLogScale(axis, num, min, max) {\n   let lmin, lmax;\n\n   if (max > 0) {\n      lmax = Math.log(max);\n      lmin = min > 0 ? Math.log(min) : lmax - 5;\n   } else {\n      lmax = -10;\n      lmin = -15;\n   }\n\n   axis.fNbins = num;\n   axis.fXbins = new Array(num + 1);\n   for (let i = 0; i <= num; ++i)\n      axis.fXbins[i] = Math.exp(lmin + i / num * (lmax - lmin));\n   axis.fXmin = Math.exp(lmin);\n   axis.fXmax = Math.exp(lmax);\n}\n\nfunction scanTF1Options(opt) {\n   if (!isStr(opt)) opt = '';\n   let p = opt.indexOf(';webcanv_hist'), webcanv_hist = false, use_saved = 0;\n   if (p >= 0) {\n      webcanv_hist = true;\n      opt = opt.slice(0, p);\n   }\n   p = opt.indexOf(';force_saved');\n   if (p >= 0) {\n      use_saved = 2;\n      opt = opt.slice(0, p);\n   }\n   p = opt.indexOf(';prefer_saved');\n   if (p >= 0) {\n      use_saved = 1;\n      opt = opt.slice(0, p);\n   }\n   return { opt, webcanv_hist, use_saved };\n}\n\n\n/**\n  * @summary Painter for TF1 object\n  *\n  * @private\n  */\n\nclass TF1Painter extends TH1Painter {\n\n   /** @summary Returns drawn object name */\n   getObjectName() { return this.$func?.fName ?? 'func'; }\n\n   /** @summary Returns drawn object class name */\n   getClassName() { return this.$func?._typename ?? clTF1; }\n\n   /** @summary Returns true while function is drawn */\n   isTF1() { return true; }\n\n   /** @summary Returns primary function which was then drawn as histogram */\n   getPrimaryObject() { return this.$func; }\n\n   /** @summary Update function */\n   updateObject(obj /*, opt */) {\n      if (!obj || (this.getClassName() !== obj._typename)) return false;\n      delete obj.evalPar;\n      const histo = this.getHisto();\n\n      if (this.webcanv_hist) {\n         const h0 = this.getPadPainter()?.findInPrimitives('Func', clTH1D);\n         if (h0) this.updateAxes(histo, h0, this.getFramePainter());\n      }\n\n      this.$func = obj;\n      this.createTF1Histogram(obj, histo);\n      this.scanContent();\n      return true;\n   }\n\n   /** @summary Redraw TF1\n     * @private */\n   redraw(reason) {\n      if (!this._use_saved_points && (reason === 'logx' || reason === 'zoom')) {\n         this.createTF1Histogram(this.$func, this.getHisto());\n         this.scanContent();\n      }\n\n      return super.redraw(reason);\n   }\n\n   /** @summary Create histogram for TF1 drawing\n     * @private */\n   createTF1Histogram(tf1, hist) {\n      const fp = this.getFramePainter(),\n            pad = this.getPadPainter()?.getRootPad(true),\n            logx = pad?.fLogx,\n            gr = fp?.getGrFuncs(this.second_x, this.second_y);\n      let xmin = tf1.fXmin, xmax = tf1.fXmax, np = Math.max(tf1.fNpx, 100);\n\n      if (gr?.zoom_xmin !== gr?.zoom_xmax) {\n         const dx = (xmax - xmin) / np;\n         if ((xmin < gr.zoom_xmin) && (gr.zoom_xmin < xmax))\n            xmin = Math.max(xmin, gr.zoom_xmin - dx);\n         if ((xmin < gr.zoom_xmax) && (gr.zoom_xmax < xmax))\n            xmax = Math.min(xmax, gr.zoom_xmax + dx);\n      }\n\n      this._use_saved_points = (tf1.fSave.length > 3) && (settings.PreferSavedPoints || (this.use_saved > 1));\n\n      const ensureBins = num => {\n         if (hist.fNcells !== num + 2) {\n            hist.fNcells = num + 2;\n            hist.fArray = new Float32Array(hist.fNcells);\n         }\n         hist.fArray.fill(0);\n         hist.fXaxis.fNbins = num;\n         hist.fXaxis.fXbins = [];\n      };\n\n      delete this._fail_eval;\n\n      // this._use_saved_points = true;\n\n      if (!this._use_saved_points) {\n         let iserror = false;\n\n         if (!tf1.evalPar) {\n            try {\n               if (!proivdeEvalPar(tf1))\n                  iserror = true;\n            } catch {\n               iserror = true;\n            }\n         }\n\n         ensureBins(np);\n\n         if (logx)\n            produceTAxisLogScale(hist.fXaxis, np, xmin, xmax);\n          else {\n            hist.fXaxis.fXmin = xmin;\n            hist.fXaxis.fXmax = xmax;\n         }\n\n         for (let n = 0; (n < np) && !iserror; n++) {\n            const x = hist.fXaxis.GetBinCenter(n + 1);\n            let y = 0;\n            try {\n               y = tf1.evalPar(x);\n            } catch (err) {\n               iserror = true;\n            }\n\n            if (!iserror)\n               hist.setBinContent(n + 1, Number.isFinite(y) ? y : 0);\n         }\n\n         if (iserror)\n            this._fail_eval = true;\n\n         if (iserror && (tf1.fSave.length > 3))\n            this._use_saved_points = true;\n      }\n\n      // in the case there were points have saved and we cannot calculate function\n      // if we don't have the user's function\n      if (this._use_saved_points) {\n         np = tf1.fSave.length - 3;\n         let custom_xaxis = null;\n         xmin = tf1.fSave[np + 1];\n         xmax = tf1.fSave[np + 2];\n\n         if (xmin === xmax) {\n            // xmin = tf1.fSave[np];\n            const mp = this.getMainPainter();\n            if (isFunc(mp?.getHisto))\n               custom_xaxis = mp?.getHisto()?.fXaxis;\n         }\n\n         if (custom_xaxis) {\n            ensureBins(hist.fXaxis.fNbins);\n            Object.assign(hist.fXaxis, custom_xaxis);\n            // TODO: find first bin\n\n            for (let n = 0; n < np; ++n) {\n               const y = tf1.fSave[n];\n               hist.setBinContent(n + 1, Number.isFinite(y) ? y : 0);\n            }\n         } else {\n            ensureBins(tf1.fNpx);\n            hist.fXaxis.fXmin = tf1.fXmin;\n            hist.fXaxis.fXmax = tf1.fXmax;\n\n            for (let n = 0; n < tf1.fNpx; ++n) {\n               const y = _getTF1Save(tf1, hist.fXaxis.GetBinCenter(n + 1));\n               hist.setBinContent(n + 1, Number.isFinite(y) ? y : 0);\n            }\n         }\n      }\n\n      hist.fName = 'Func';\n      setHistogramTitle(hist, tf1.fTitle);\n      hist.fMinimum = tf1.fMinimum;\n      hist.fMaximum = tf1.fMaximum;\n      hist.fLineColor = tf1.fLineColor;\n      hist.fLineStyle = tf1.fLineStyle;\n      hist.fLineWidth = tf1.fLineWidth;\n      hist.fFillColor = tf1.fFillColor;\n      hist.fFillStyle = tf1.fFillStyle;\n      hist.fMarkerColor = tf1.fMarkerColor;\n      hist.fMarkerStyle = tf1.fMarkerStyle;\n      hist.fMarkerSize = tf1.fMarkerSize;\n      hist.fBits |= kNoStats;\n   }\n\n   /** @summary Extract function ranges */\n   extractAxesProperties(ndim) {\n      super.extractAxesProperties(ndim);\n\n      const func = this.$func, nsave = func?.fSave.length ?? 0;\n\n      if (nsave > 3 && this._use_saved_points) {\n         this.xmin = Math.min(this.xmin, func.fSave[nsave - 2]);\n         this.xmax = Math.max(this.xmax, func.fSave[nsave - 1]);\n      }\n      if (func) {\n         this.xmin = Math.min(this.xmin, func.fXmin);\n         this.xmax = Math.max(this.xmax, func.fXmax);\n      }\n   }\n\n   /** @summary Checks if it makes sense to zoom inside specified axis range */\n   canZoomInside(axis, min, max) {\n      const nsave = this.$func?.fSave.length ?? 0;\n      if ((nsave > 3) && this._use_saved_points && (axis === 'x')) {\n         // in the case where the points have been saved, useful for example\n         // if we don't have the user's function\n         const nb_points = nsave - 2,\n             xmin = this.$func.fSave[nsave - 2],\n             xmax = this.$func.fSave[nsave - 1];\n\n         return Math.abs(xmax - xmin) / nb_points < Math.abs(max - min);\n      }\n\n      // if function calculated, one always could zoom inside\n      return (axis === 'x') || (axis === 'y');\n   }\n\n      /** @summary retrurn tooltips for TF2 */\n   getTF1Tooltips(pnt) {\n      delete this.$tmp_tooltip;\n      const lines = [this.getObjectHint()],\n            funcs = this.getFramePainter()?.getGrFuncs(this.options.second_x, this.options.second_y);\n\n      if (!funcs || !isFunc(this.$func?.evalPar)) {\n         lines.push('grx = ' + pnt.x, 'gry = ' + pnt.y);\n         return lines;\n      }\n\n      const x = funcs.revertAxis('x', pnt.x);\n      let y = 0, gry = 0, iserror = false;\n\n       try {\n          y = this.$func.evalPar(x);\n          gry = Math.round(funcs.gry(y));\n       } catch {\n          iserror = true;\n       }\n\n      lines.push('x = ' + funcs.axisAsText('x', x),\n                 'value = ' + (iserror ? '<fail>' : floatToString(y, gStyle.fStatFormat)));\n\n      if (!iserror)\n         this.$tmp_tooltip = { y, gry };\n      return lines;\n   }\n\n   /** @summary process tooltip event for TF1 object */\n   processTooltipEvent(pnt) {\n      if (this._use_saved_points)\n         return super.processTooltipEvent(pnt);\n\n      let ttrect = this.draw_g?.selectChild('.tooltip_bin');\n\n      if (!this.draw_g || !pnt) {\n         ttrect?.remove();\n         return null;\n      }\n\n      const res = { name: this.$func?.fName, title: this.$func?.fTitle,\n                    x: pnt.x, y: pnt.y,\n                    color1: this.lineatt?.color ?? 'green',\n                    color2: this.fillatt?.getFillColorAlt('blue') ?? 'blue',\n                    lines: this.getTF1Tooltips(pnt), exact: true, menu: true };\n\n      if (pnt.disabled)\n         ttrect.remove();\n      else {\n         if (ttrect.empty()) {\n            ttrect = this.draw_g.append('svg:circle')\n                             .attr('class', 'tooltip_bin')\n                             .style('pointer-events', 'none')\n                             .style('fill', 'none')\n                             .attr('r', (this.lineatt?.width ?? 1) + 4);\n         }\n\n         ttrect.attr('cx', pnt.x)\n               .attr('cy', this.$tmp_tooltip.gry ?? pnt.y)\n               .call(this.lineatt?.func);\n      }\n\n      return res;\n   }\n\n   /** @summary fill information for TWebCanvas\n    * @desc Used to inform webcanvas when evaluation failed\n     * @private */\n   fillWebObjectOptions(opt) {\n      opt.fcust = this._fail_eval && !this.use_saved ? 'func_fail' : '';\n   }\n\n   /** @summary draw TF1 object */\n   static async draw(dom, tf1, opt) {\n      const web = scanTF1Options(opt);\n      opt = web.opt;\n      delete web.opt;\n      let hist;\n\n      if (web.webcanv_hist) {\n         const dummy = new ObjectPainter(dom);\n         hist = dummy.getPadPainter()?.findInPrimitives('Func', clTH1D);\n      }\n\n      if (!hist) {\n         hist = createHistogram(clTH1D, 100);\n         hist.fBits |= kNoStats;\n      }\n\n      if (!opt && getElementMainPainter(dom))\n         opt = 'same';\n\n      const painter = new TF1Painter(dom, hist);\n\n      painter.$func = tf1;\n      Object.assign(painter, web);\n\n      painter.createTF1Histogram(tf1, hist);\n\n      return THistPainter._drawHist(painter, opt);\n   }\n\n} // class TF1Painter\n\nexport { TF1Painter, produceTAxisLogScale, scanTF1Options };\n","import { createHistogram, setHistogramTitle, kNoStats, settings, gStyle, clTF2, clTH2F, isStr, isFunc } from '../core.mjs';\nimport { TH2Painter } from '../hist/TH2Painter.mjs';\nimport { proivdeEvalPar } from '../base/func.mjs';\nimport { produceTAxisLogScale, scanTF1Options } from '../hist/TF1Painter.mjs';\nimport { ObjectPainter, getElementMainPainter } from '../base/ObjectPainter.mjs';\nimport { DrawOptions, floatToString } from '../base/BasePainter.mjs';\nimport { THistPainter } from '../hist2d/THistPainter.mjs';\n\n\n/**\n  * @summary Painter for TF2 object\n  *\n  * @private\n  */\n\nclass TF2Painter extends TH2Painter {\n\n   /** @summary Returns drawn object name */\n   getObjectName() { return this.$func?.fName ?? 'func'; }\n\n   /** @summary Returns drawn object class name */\n   getClassName() { return this.$func?._typename ?? clTF2; }\n\n   /** @summary Returns true while function is drawn */\n   isTF1() { return true; }\n\n   /** @summary Returns primary function which was then drawn as histogram */\n   getPrimaryObject() { return this.$func; }\n\n   /** @summary Update histogram */\n   updateObject(obj /*, opt */) {\n      if (!obj || (this.getClassName() !== obj._typename)) return false;\n      delete obj.evalPar;\n      const histo = this.getHisto();\n\n      if (this.webcanv_hist) {\n         const h0 = this.getPadPainter()?.findInPrimitives('Func', clTH2F);\n         if (h0) this.updateAxes(histo, h0, this.getFramePainter());\n      }\n\n      this.$func = obj;\n      this.createTF2Histogram(obj, histo);\n      this.scanContent();\n      return true;\n   }\n\n   /** @summary Redraw TF2\n     * @private */\n   redraw(reason) {\n      if (!this._use_saved_points && (reason === 'logx' || reason === 'logy' || reason === 'zoom')) {\n         this.createTF2Histogram(this.$func, this.getHisto());\n         this.scanContent();\n      }\n\n      return super.redraw(reason);\n   }\n\n   /** @summary Create histogram for TF2 drawing\n     * @private */\n   createTF2Histogram(func, hist) {\n      let nsave = func.fSave.length - 6;\n      if ((nsave > 0) && (nsave !== (func.fSave[nsave+4]+1) * (func.fSave[nsave+5]+1)))\n         nsave = 0;\n\n      this._use_saved_points = (nsave > 0) && (settings.PreferSavedPoints || (this.use_saved > 1));\n\n      const fp = this.getFramePainter(),\n            pad = this.getPadPainter()?.getRootPad(true),\n            logx = pad?.fLogx, logy = pad?.fLogy,\n            gr = fp?.getGrFuncs(this.second_x, this.second_y);\n      let xmin = func.fXmin, xmax = func.fXmax,\n          ymin = func.fYmin, ymax = func.fYmax,\n          npx = Math.max(func.fNpx, 20),\n          npy = Math.max(func.fNpy, 20);\n\n      if (gr?.zoom_xmin !== gr?.zoom_xmax) {\n         const dx = (xmax - xmin) / npx;\n         if ((xmin < gr.zoom_xmin) && (gr.zoom_xmin < xmax))\n            xmin = Math.max(xmin, gr.zoom_xmin - dx);\n         if ((xmin < gr.zoom_xmax) && (gr.zoom_xmax < xmax))\n            xmax = Math.min(xmax, gr.zoom_xmax + dx);\n      }\n\n      if (gr?.zoom_ymin !== gr?.zoom_ymax) {\n         const dy = (ymax - ymin) / npy;\n         if ((ymin < gr.zoom_ymin) && (gr.zoom_ymin < ymax))\n            ymin = Math.max(ymin, gr.zoom_ymin - dy);\n         if ((ymin < gr.zoom_ymax) && (gr.zoom_ymax < ymax))\n            ymax = Math.min(ymax, gr.zoom_ymax + dy);\n      }\n\n      const ensureBins = (nx, ny) => {\n         if (hist.fNcells !== (nx + 2) * (ny + 2)) {\n            hist.fNcells = (nx + 2) * (ny + 2);\n            hist.fArray = new Float32Array(hist.fNcells);\n         }\n         hist.fArray.fill(0);\n         hist.fXaxis.fNbins = nx;\n         hist.fXaxis.fXbins = [];\n         hist.fYaxis.fNbins = ny;\n         hist.fYaxis.fXbins = [];\n      };\n\n      delete this._fail_eval;\n\n      if (!this._use_saved_points) {\n         let iserror = false;\n\n         if (!func.evalPar && !proivdeEvalPar(func))\n            iserror = true;\n\n         ensureBins(npx, npy);\n         hist.fXaxis.fXmin = xmin;\n         hist.fXaxis.fXmax = xmax;\n         hist.fYaxis.fXmin = ymin;\n         hist.fYaxis.fXmax = ymax;\n\n         if (logx)\n            produceTAxisLogScale(hist.fXaxis, npx, xmin, xmax);\n         if (logy)\n            produceTAxisLogScale(hist.fYaxis, npy, ymin, ymax);\n\n         for (let j = 0; (j < npy) && !iserror; ++j) {\n            for (let i = 0; (i < npx) && !iserror; ++i) {\n               const x = hist.fXaxis.GetBinCenter(i+1),\n                     y = hist.fYaxis.GetBinCenter(j+1);\n               let z = 0;\n\n               try {\n                  z = func.evalPar(x, y);\n               } catch {\n                  iserror = true;\n               }\n\n               if (!iserror)\n                  hist.setBinContent(hist.getBin(i + 1, j + 1), Number.isFinite(z) ? z : 0);\n            }\n         }\n\n         if (iserror)\n            this._fail_eval = true;\n\n         if (iserror && (nsave > 6))\n            this._use_saved_points = true;\n      }\n\n      if (this._use_saved_points) {\n         npx = Math.round(func.fSave[nsave+4]);\n         npy = Math.round(func.fSave[nsave+5]);\n         const xmin = func.fSave[nsave], xmax = func.fSave[nsave+1],\n               ymin = func.fSave[nsave+2], ymax = func.fSave[nsave+3],\n               dx = (xmax - xmin) / npx,\n               dy = (ymax - ymin) / npy;\n          function getSave(x, y) {\n            if (x < xmin || x > xmax) return 0;\n            if (dx <= 0) return 0;\n            if (y < ymin || y > ymax) return 0;\n            if (dy <= 0) return 0;\n            const ibin = Math.min(npx-1, Math.floor((x-xmin)/dx)),\n                  jbin = Math.min(npy-1, Math.floor((y-ymin)/dy)),\n                  xlow = xmin + ibin*dx,\n                  ylow = ymin + jbin*dy,\n                  t = (x-xlow)/dx,\n                  u = (y-ylow)/dy,\n                  k1 = jbin*(npx+1) + ibin,\n                  k2 = jbin*(npx+1) + ibin +1,\n                  k3 = (jbin+1)*(npx+1) + ibin +1,\n                  k4 = (jbin+1)*(npx+1) + ibin;\n            return (1-t)*(1-u)*func.fSave[k1] +t*(1-u)*func.fSave[k2] +t*u*func.fSave[k3] + (1-t)*u*func.fSave[k4];\n         }\n\n         ensureBins(func.fNpx, func.fNpy);\n         hist.fXaxis.fXmin = func.fXmin;\n         hist.fXaxis.fXmax = func.fXmax;\n         hist.fYaxis.fXmin = func.fYmin;\n         hist.fYaxis.fXmax = func.fYmax;\n\n         for (let j = 0; j < func.fNpy; ++j) {\n            const y = hist.fYaxis.GetBinCenter(j + 1);\n            for (let i = 0; i < func.fNpx; ++i) {\n               const x = hist.fXaxis.GetBinCenter(i + 1),\n                     z = getSave(x, y);\n               hist.setBinContent(hist.getBin(i+1, j+1), Number.isFinite(z) ? z : 0);\n            }\n         }\n      }\n\n      hist.fName = 'Func';\n      setHistogramTitle(hist, func.fTitle);\n      hist.fMinimum = func.fMinimum;\n      hist.fMaximum = func.fMaximum;\n      // fHistogram->SetContour(fContour.fN, levels);\n      hist.fLineColor = func.fLineColor;\n      hist.fLineStyle = func.fLineStyle;\n      hist.fLineWidth = func.fLineWidth;\n      hist.fFillColor = func.fFillColor;\n      hist.fFillStyle = func.fFillStyle;\n      hist.fMarkerColor = func.fMarkerColor;\n      hist.fMarkerStyle = func.fMarkerStyle;\n      hist.fMarkerSize = func.fMarkerSize;\n      hist.fBits |= kNoStats;\n\n      return hist;\n   }\n\n   /** @summary Extract function ranges */\n   extractAxesProperties(ndim) {\n      super.extractAxesProperties(ndim);\n\n      const func = this.$func, nsave = func?.fSave.length ?? 0;\n\n      if (nsave > 6 && this._use_saved_points) {\n         this.xmin = Math.min(this.xmin, func.fSave[nsave-6]);\n         this.xmax = Math.max(this.xmax, func.fSave[nsave-5]);\n         this.ymin = Math.min(this.ymin, func.fSave[nsave-4]);\n         this.ymax = Math.max(this.ymax, func.fSave[nsave-3]);\n      }\n      if (func) {\n         this.xmin = Math.min(this.xmin, func.fXmin);\n         this.xmax = Math.max(this.xmax, func.fXmax);\n         this.ymin = Math.min(this.ymin, func.fYmin);\n         this.ymax = Math.max(this.ymax, func.fYmax);\n      }\n   }\n\n   /** @summary retrurn tooltips for TF2 */\n   getTF2Tooltips(pnt) {\n      const lines = [this.getObjectHint()],\n            funcs = this.getFramePainter()?.getGrFuncs(this.options.second_x, this.options.second_y);\n\n      if (!funcs || !isFunc(this.$func?.evalPar)) {\n         lines.push('grx = ' + pnt.x, 'gry = ' + pnt.y);\n         return lines;\n      }\n\n      const x = funcs.revertAxis('x', pnt.x),\n            y = funcs.revertAxis('y', pnt.y);\n      let z = 0, iserror = false;\n\n       try {\n          z = this.$func.evalPar(x, y);\n       } catch {\n          iserror = true;\n       }\n\n      lines.push('x = ' + funcs.axisAsText('x', x),\n                 'y = ' + funcs.axisAsText('y', y),\n                 'value = ' + (iserror ? '<fail>' : floatToString(z, gStyle.fStatFormat)));\n      return lines;\n   }\n\n   /** @summary process tooltip event for TF2 object */\n   processTooltipEvent(pnt) {\n      if (this._use_saved_points)\n         return super.processTooltipEvent(pnt);\n\n      let ttrect = this.draw_g?.selectChild('.tooltip_bin');\n\n      if (!this.draw_g || !pnt) {\n         ttrect?.remove();\n         return null;\n      }\n\n      const res = { name: this.$func?.fName, title: this.$func?.fTitle,\n                  x: pnt.x, y: pnt.y,\n                  color1: this.lineatt?.color ?? 'green',\n                  color2: this.fillatt?.getFillColorAlt('blue') ?? 'blue',\n                  lines: this.getTF2Tooltips(pnt), exact: true, menu: true };\n\n      if (pnt.disabled)\n         ttrect.remove();\n      else {\n         if (ttrect.empty()) {\n            ttrect = this.draw_g.append('svg:circle')\n                                .attr('class', 'tooltip_bin')\n                                .style('pointer-events', 'none')\n                                .style('fill', 'none')\n                                .attr('r', (this.lineatt?.width ?? 1) + 4);\n         }\n\n         ttrect.attr('cx', pnt.x)\n               .attr('cy', pnt.y)\n               .call(this.lineatt?.func);\n      }\n\n      return res;\n   }\n\n   /** @summary fill information for TWebCanvas\n    * @desc Used to inform webcanvas when evaluation failed\n     * @private */\n   fillWebObjectOptions(opt) {\n      opt.fcust = this._fail_eval && !this.use_saved ? 'func_fail' : '';\n   }\n\n   /** @summary draw TF2 object */\n   static async draw(dom, tf2, opt) {\n      const web = scanTF1Options(opt);\n      opt = web.opt;\n      delete web.opt;\n\n      const d = new DrawOptions(opt);\n      if (d.empty())\n         opt = 'cont3';\n      else if (d.opt === 'SAME')\n         opt = 'cont2 same';\n\n      // workaround for old waves.C\n      const o2 = isStr(opt) ? opt.toUpperCase() : '';\n      if (o2 === 'SAMECOLORZ' || o2 === 'SAMECOLOR' || o2 === 'SAMECOLZ')\n         opt = 'samecol';\n\n      if ((opt.indexOf('same') === 0) || (opt.indexOf('SAME') === 0)) {\n         if (!getElementMainPainter(dom))\n            opt = 'A_ADJUST_FRAME_' + opt.slice(4);\n      }\n\n      let hist;\n\n      if (web.webcanv_hist) {\n         const dummy = new ObjectPainter(dom);\n         hist = dummy.getPadPainter()?.findInPrimitives('Func', clTH2F);\n      }\n\n      if (!hist) {\n         hist = createHistogram(clTH2F, 20, 20);\n         hist.fBits |= kNoStats;\n      }\n\n      const painter = new TF2Painter(dom, hist);\n\n      painter.$func = tf2;\n      Object.assign(painter, web);\n      painter.createTF2Histogram(tf2, hist);\n      return THistPainter._drawHist(painter, opt);\n   }\n\n} // class TF2Painter\n\nexport { TF2Painter };\n"],"names":["produceTAxisLogScale","axis","num","min","max","lmin","lmax","Math","log","fNbins","fXbins","Array","i","exp","fXmin","fXmax","scanTF1Options","opt","isStr","p","indexOf","webcanv_hist","use_saved","slice","TF1Painter","TH1Painter","getObjectName","this","$func","fName","getClassName","_typename","clTF1","isTF1","getPrimaryObject","updateObject","obj","evalPar","histo","getHisto","h0","getPadPainter","findInPrimitives","clTH1D","updateAxes","getFramePainter","createTF1Histogram","scanContent","redraw","reason","_use_saved_points","super","tf1","hist","fp","pad","getRootPad","logx","fLogx","gr","getGrFuncs","second_x","second_y","xmin","xmax","np","fNpx","zoom_xmin","zoom_xmax","dx","fSave","length","settings","PreferSavedPoints","ensureBins","fNcells","fArray","Float32Array","fill","fXaxis","_fail_eval","iserror","proivdeEvalPar","n","x","GetBinCenter","y","err","setBinContent","Number","isFinite","custom_xaxis","mp","getMainPainter","isFunc","Object","assign","_getTF1Save","setHistogramTitle","fTitle","fMinimum","fMaximum","fLineColor","fLineStyle","fLineWidth","fFillColor","fFillStyle","fMarkerColor","fMarkerStyle","fMarkerSize","fBits","kNoStats","extractAxesProperties","ndim","func","nsave","canZoomInside","nb_points","abs","getTF1Tooltips","pnt","$tmp_tooltip","lines","getObjectHint","funcs","options","push","revertAxis","gry","round","axisAsText","floatToString","gStyle","fStatFormat","processTooltipEvent","ttrect","draw_g","selectChild","remove","res","name","title","color1","lineatt","color","color2","fillatt","getFillColorAlt","exact","menu","disabled","empty","append","attr","style","width","call","fillWebObjectOptions","fcust","draw","dom","web","dummy","ObjectPainter","createHistogram","getElementMainPainter","painter","THistPainter","_drawHist","TF2Painter","TH2Painter","clTF2","clTH2F","createTF2Histogram","logy","fLogy","ymin","fYmin","ymax","fYmax","npx","npy","fNpy","zoom_ymin","zoom_ymax","dy","nx","ny","fYaxis","j","z","getBin","getSave","ibin","floor","jbin","t","u","k1","k2","k3","k4","getTF2Tooltips","tf2","d","DrawOptions","o2","toUpperCase"],"sourceRoot":""}