{"version":3,"file":"static/js/3921.d940e4cc.chunk.js","mappings":"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","sources":["../node_modules/jsroot/modules/hist2d/TGraphPainter.mjs"],"sourcesContent":["import { gStyle, BIT, settings, create, createHistogram, setHistogramTitle, isFunc, isStr,\n         clTPaveStats, clTCutG, clTH1I, clTH2I, clTF1, clTF2, clTPad, kNoZoom, kNoStats } from '../core.mjs';\nimport { select as d3_select } from '../d3.mjs';\nimport { DrawOptions, buildSvgCurve, makeTranslate, addHighlightStyle } from '../base/BasePainter.mjs';\nimport { ObjectPainter, kAxisNormal } from '../base/ObjectPainter.mjs';\nimport { FunctionsHandler } from './THistPainter.mjs';\nimport { TH1Painter, PadDrawOptions } from './TH1Painter.mjs';\nimport { kBlack, kWhite } from '../base/colors.mjs';\nimport { addMoveHandler } from '../gui/utils.mjs';\nimport { assignContextMenu } from '../gui/menu.mjs';\n\n\nconst kNotEditable = BIT(18),   // bit set if graph is non editable\n      clTGraphErrors = 'TGraphErrors',\n      clTGraphAsymmErrors = 'TGraphAsymmErrors',\n      clTGraphBentErrors = 'TGraphBentErrors',\n      clTGraphMultiErrors = 'TGraphMultiErrors';\n\n/**\n * @summary Painter for TGraph object.\n *\n * @private\n */\n\n\nclass TGraphPainter extends ObjectPainter {\n\n   constructor(dom, graph) {\n      super(dom, graph);\n      this.axes_draw = false; // indicate if graph histogram was drawn for axes\n      this.bins = null;\n      this.xmin = this.ymin = this.xmax = this.ymax = 0;\n      this.wheel_zoomy = true;\n      this.is_bent = (graph._typename === clTGraphBentErrors);\n      this.has_errors = (graph._typename === clTGraphErrors) ||\n                        (graph._typename === clTGraphMultiErrors) ||\n                        (graph._typename === clTGraphAsymmErrors) ||\n                         this.is_bent || graph._typename.match(/^RooHist/);\n   }\n\n   /** @summary Return drawn graph object */\n   getGraph() { return this.getObject(); }\n\n   /** @summary Return histogram object used for axis drawings */\n   getHistogram() { return this.getObject()?.fHistogram; }\n\n   /** @summary Set histogram object to graph */\n   setHistogram(histo) {\n      const obj = this.getObject();\n      if (obj) obj.fHistogram = histo;\n   }\n\n   /** @summary Redraw graph\n     * @desc may redraw histogram which was used to draw axes\n     * @return {Promise} for ready */\n   async redraw() {\n      let promise = Promise.resolve(true);\n\n      if (this.$redraw_hist) {\n         delete this.$redraw_hist;\n         const hist_painter = this.getMainPainter();\n         if (hist_painter?.isSecondary(this) && this.axes_draw)\n            promise = hist_painter.redraw();\n      }\n\n      return promise.then(() => this.drawGraph()).then(() => {\n         const res = this._funcHandler?.drawNext(0) ?? this;\n         delete this._funcHandler;\n         return res;\n      });\n   }\n\n   /** @summary Cleanup graph painter */\n   cleanup() {\n      delete this.interactive_bin; // break mouse handling\n      delete this.bins;\n      super.cleanup();\n   }\n\n   /** @summary Returns object if this drawing TGraphMultiErrors object */\n   get_gme() {\n      const graph = this.getGraph();\n      return graph?._typename === clTGraphMultiErrors ? graph : null;\n   }\n\n   /** @summary Decode options */\n   decodeOptions(opt, first_time) {\n      if (isStr(opt) && (opt.indexOf('same ') === 0))\n         opt = opt.slice(5);\n\n      const graph = this.getGraph(),\n          is_gme = !!this.get_gme(),\n          has_main = first_time ? !!this.getMainPainter() : !this.axes_draw;\n      let blocks_gme = [];\n\n      if (!this.options) this.options = {};\n\n      // decode main draw options for the graph\n      const decodeBlock = (d, res) => {\n         Object.assign(res, { Line: 0, Curve: 0, Rect: 0, Mark: 0, Bar: 0, OutRange: 0, EF: 0, Fill: 0, MainError: 1, Ends: 1, ScaleErrX: 1 });\n\n         if (is_gme && d.check('S=', true)) res.ScaleErrX = d.partAsFloat();\n\n         if (d.check('L')) res.Line = 1;\n         if (d.check('F')) res.Fill = 1;\n         if (d.check('CC')) res.Curve = 2; // draw all points without reduction\n         if (d.check('C')) res.Curve = 1;\n         if (d.check('*')) res.Mark = 103;\n         if (d.check('P0')) res.Mark = 104;\n         if (d.check('P')) res.Mark = 1;\n         if (d.check('B')) { res.Bar = 1; res.Errors = 0; }\n         if (d.check('Z')) { res.Errors = 1; res.Ends = 0; }\n         if (d.check('||')) { res.Errors = 1; res.MainError = 0; res.Ends = 1; }\n         if (d.check('[]')) { res.Errors = 1; res.MainError = 0; res.Ends = 2; }\n         if (d.check('|>')) { res.Errors = 1; res.Ends = 3; }\n         if (d.check('>')) { res.Errors = 1; res.Ends = 4; }\n         if (d.check('0')) { res.Mark = 1; res.Errors = 1; res.OutRange = 1; }\n         if (d.check('1')) if (res.Bar === 1) res.Bar = 2;\n         if (d.check('2')) { res.Rect = 1; res.Errors = 0; }\n         if (d.check('3')) { res.EF = 1; res.Errors = 0; }\n         if (d.check('4')) { res.EF = 2; res.Errors = 0; }\n         if (d.check('5')) { res.Rect = 2; res.Errors = 0; }\n         if (d.check('X')) res.Errors = 0;\n      };\n\n      Object.assign(this.options, { Axis: '', NoOpt: 0, PadStats: false, PadPalette: false, original: opt, second_x: false, second_y: false, individual_styles: false });\n\n      if (is_gme && opt) {\n         if (opt.indexOf(';') > 0) {\n            blocks_gme = opt.split(';');\n            opt = blocks_gme.shift();\n         } else if (opt.indexOf('_') > 0) {\n            blocks_gme = opt.split('_');\n            opt = blocks_gme.shift();\n         }\n      }\n\n      const res = this.options;\n      let d = new DrawOptions(opt), hopt = '';\n\n      PadDrawOptions.forEach(name => { if (d.check(name)) hopt += ';' + name; });\n      if (d.check('XAXIS_', true)) hopt += ';XAXIS_' + d.part;\n      if (d.check('YAXIS_', true)) hopt += ';YAXIS_' + d.part;\n\n      if (d.empty()) {\n         res.original = has_main ? 'lp' : 'alp';\n         d = new DrawOptions(res.original);\n      }\n\n      if (d.check('NOOPT')) res.NoOpt = 1;\n\n      if (d.check('POS3D_', true)) res.pos3d = d.partAsInt() - 0.5;\n\n      if (d.check('PFC') && !res._pfc)\n         res._pfc = 2;\n      if (d.check('PLC') && !res._plc)\n         res._plc = 2;\n      if (d.check('PMC') && !res._pmc)\n         res._pmc = 2;\n\n      if (d.check('A')) res.Axis = d.check('I') ? 'A;' : ' '; // I means invisible axis\n      if (d.check('X+')) { res.Axis += 'X+'; res.second_x = has_main; }\n      if (d.check('Y+')) { res.Axis += 'Y+'; res.second_y = has_main; }\n      if (d.check('RX')) res.Axis += 'RX';\n      if (d.check('RY')) res.Axis += 'RY';\n\n      if (is_gme) {\n         res.blocks = [];\n         res.skip_errors_x0 = res.skip_errors_y0 = false;\n         if (d.check('X0')) res.skip_errors_x0 = true;\n         if (d.check('Y0')) res.skip_errors_y0 = true;\n      }\n\n      decodeBlock(d, res);\n\n      if (is_gme)\n         if (d.check('S')) res.individual_styles = true;\n\n\n      // if (d.check('E')) res.Errors = 1; // E option only defined for TGraphPolar\n\n      if (res.Errors === undefined)\n         res.Errors = this.has_errors && (!is_gme || !blocks_gme.length) ? 1 : 0;\n\n      // special case - one could use svg:path to draw many pixels (\n      if ((res.Mark === 1) && (graph.fMarkerStyle === 1)) res.Mark = 101;\n\n      // if no drawing option is selected and if opt === '' nothing is done.\n      if (res.Line + res.Fill + res.Curve + res.Mark + res.Bar + res.EF + res.Rect + res.Errors === 0)\n         if (d.empty()) res.Line = 1;\n\n\n      if (this.matchObjectType(clTGraphErrors)) {\n         const len = graph.fEX.length;\n         let m = 0;\n         for (let k = 0; k < len; ++k)\n            m = Math.max(m, graph.fEX[k], graph.fEY[k]);\n         if (m < 1e-100)\n            res.Errors = 0;\n      }\n\n      this._cutg = this.matchObjectType(clTCutG);\n      this._cutg_lastsame = this._cutg && (graph.fNpoints > 3) &&\n                            (graph.fX[0] === graph.fX[graph.fNpoints-1]) && (graph.fY[0] === graph.fY[graph.fNpoints-1]);\n\n      if (!res.Axis) {\n         // check if axis should be drawn\n         // either graph drawn directly or\n         // graph is first object in list of primitives\n         const pad = this.getPadPainter()?.getRootPad(true);\n         if (!pad || (pad?.fPrimitives?.arr[0] === this.getObject())) res.Axis = ' ';\n      }\n\n      res.Axis += hopt;\n\n      for (let bl = 0; bl < blocks_gme.length; ++bl) {\n         const subd = new DrawOptions(blocks_gme[bl]), subres = {};\n         decodeBlock(subd, subres);\n         subres.skip_errors_x0 = res.skip_errors_x0;\n         subres.skip_errors_y0 = res.skip_errors_y0;\n         res.blocks.push(subres);\n      }\n   }\n\n   /** @summary Extract errors for TGraphMultiErrors */\n   extractGmeErrors(nblock) {\n      if (!this.bins) return;\n      const gr = this.getGraph();\n      this.bins.forEach(bin => {\n         bin.eylow = gr.fEyL[nblock][bin.indx];\n         bin.eyhigh = gr.fEyH[nblock][bin.indx];\n      });\n   }\n\n   /** @summary Create bins for TF1 drawing */\n   createBins() {\n      const gr = this.getGraph();\n      if (!gr) return;\n\n      let kind = 0, npoints = gr.fNpoints;\n      if (this._cutg && this._cutg_lastsame)\n         npoints--;\n\n      if (gr._typename === clTGraphErrors)\n         kind = 1;\n      else if (gr._typename === clTGraphMultiErrors)\n         kind = 2;\n      else if (gr._typename === clTGraphAsymmErrors || gr._typename === clTGraphBentErrors || gr._typename.match(/^RooHist/))\n         kind = 3;\n\n      this.bins = new Array(npoints);\n\n      for (let p = 0; p < npoints; ++p) {\n         const bin = this.bins[p] = { x: gr.fX[p], y: gr.fY[p], indx: p };\n         switch (kind) {\n            case 1:\n               bin.exlow = bin.exhigh = gr.fEX[p];\n               bin.eylow = bin.eyhigh = gr.fEY[p];\n               break;\n            case 2:\n               bin.exlow = gr.fExL[p];\n               bin.exhigh = gr.fExH[p];\n               bin.eylow = gr.fEyL[0][p];\n               bin.eyhigh = gr.fEyH[0][p];\n               break;\n            case 3:\n               bin.exlow = gr.fEXlow[p];\n               bin.exhigh = gr.fEXhigh[p];\n               bin.eylow = gr.fEYlow[p];\n               bin.eyhigh = gr.fEYhigh[p];\n               break;\n         }\n\n         if (p === 0) {\n            this.xmin = this.xmax = bin.x;\n            this.ymin = this.ymax = bin.y;\n         }\n\n         if (kind > 0) {\n            this.xmin = Math.min(this.xmin, bin.x - bin.exlow, bin.x + bin.exhigh);\n            this.xmax = Math.max(this.xmax, bin.x - bin.exlow, bin.x + bin.exhigh);\n            this.ymin = Math.min(this.ymin, bin.y - bin.eylow, bin.y + bin.eyhigh);\n            this.ymax = Math.max(this.ymax, bin.y - bin.eylow, bin.y + bin.eyhigh);\n         } else {\n            this.xmin = Math.min(this.xmin, bin.x);\n            this.xmax = Math.max(this.xmax, bin.x);\n            this.ymin = Math.min(this.ymin, bin.y);\n            this.ymax = Math.max(this.ymax, bin.y);\n         }\n      }\n   }\n\n   /** @summary Return margins for histogram ranges */\n   getHistRangeMargin() { return 0.1; }\n\n   /** @summary Create histogram for graph\n     * @desc graph bins should be created when calling this function\n     * @param {boolean} [set_x] - set X axis range\n     * @param {boolean} [set_y] - set Y axis range */\n   createHistogram(set_x, set_y) {\n      if (!set_x && !set_y)\n         set_x = set_y = true;\n\n      const graph = this.getGraph(),\n            xmin = this.xmin,\n            margin = this.getHistRangeMargin();\n      let xmax = this.xmax, ymin = this.ymin, ymax = this.ymax;\n\n      if (xmin >= xmax) xmax = xmin + 1;\n      if (ymin >= ymax) ymax = ymin + 1;\n      const dx = (xmax - xmin) * margin, dy = (ymax - ymin) * margin;\n      let uxmin = xmin - dx, uxmax = xmax + dx,\n          minimum = ymin - dy, maximum = ymax + dy;\n\n      if ((ymin > 0) && (minimum <= 0))\n         minimum = (1 - margin) * ymin;\n      if ((ymax < 0) && (maximum >= 0))\n         maximum = (1 - margin) * ymax;\n\n      if (!this._not_adjust_hrange) {\n         const pad_logx = this.getPadPainter()?.getPadLog('x');\n\n         if ((uxmin < 0) && (xmin >= 0))\n            uxmin = pad_logx ? xmin * (1 - margin) : 0;\n         if ((uxmax > 0) && (xmax <= 0))\n            uxmax = pad_logx ? (1 + margin) * xmax : 0;\n      }\n\n      const minimum0 = minimum, maximum0 = maximum;\n      let histo = this.getHistogram();\n\n      if (!histo) {\n         histo = this._need_2dhist ? createHistogram(clTH2I, 30, 30) : createHistogram(clTH1I, 100);\n         histo.fName = graph.fName + '_h';\n         histo.fBits |= kNoStats;\n         this._own_histogram = true;\n         this.setHistogram(histo);\n      } else if ((histo.fMaximum !== kNoZoom) && (histo.fMinimum !== kNoZoom)) {\n         minimum = histo.fMinimum;\n         maximum = histo.fMaximum;\n      }\n\n      if (graph.fMinimum !== kNoZoom) minimum = ymin = graph.fMinimum;\n      if (graph.fMaximum !== kNoZoom) maximum = graph.fMaximum;\n      if ((minimum < 0) && (ymin >= 0))\n         minimum = (1 - margin)*ymin;\n      if ((ymax < 0) && (maximum >= 0))\n         maximum = (1 - margin) * ymax;\n\n      setHistogramTitle(histo, this.getObject().fTitle);\n\n      if (set_x && !histo.fXaxis.fLabels) {\n         histo.fXaxis.fXmin = uxmin;\n         histo.fXaxis.fXmax = uxmax;\n      }\n\n      if (set_y && !histo.fYaxis.fLabels) {\n         histo.fYaxis.fXmin = Math.min(minimum0, minimum);\n         histo.fYaxis.fXmax = Math.max(maximum0, maximum);\n         if (!this._need_2dhist) {\n            histo.fMinimum = minimum;\n            histo.fMaximum = maximum;\n         }\n      }\n\n      return histo;\n   }\n\n   /** @summary Check if user range can be unzommed\n     * @desc Used when graph points covers larger range than provided histogram */\n   unzoomUserRange(dox, doy /*, doz */) {\n      const graph = this.getGraph();\n      if (this._own_histogram || !graph) return false;\n\n      const histo = this.getHistogram();\n\n      dox = dox && histo && ((histo.fXaxis.fXmin > this.xmin) || (histo.fXaxis.fXmax < this.xmax));\n      doy = doy && histo && ((histo.fYaxis.fXmin > this.ymin) || (histo.fYaxis.fXmax < this.ymax));\n      if (!dox && !doy) return false;\n\n      this.createHistogram(dox, doy);\n      this.getMainPainter()?.extractAxesProperties(1); // just to enforce ranges extraction\n\n      return true;\n   }\n\n   /** @summary Returns true if graph drawing can be optimize */\n   canOptimize() {\n      return (settings.OptimizeDraw > 0) && !this.options.NoOpt;\n   }\n\n   /** @summary Returns optimized bins - if optimization enabled */\n   optimizeBins(maxpnt, filter_func) {\n      if ((this.bins.length < 30) && !filter_func)\n         return this.bins;\n\n      let selbins = null;\n      if (isFunc(filter_func)) {\n         for (let n = 0; n < this.bins.length; ++n) {\n            if (filter_func(this.bins[n], n)) {\n               if (!selbins) selbins = (n === 0) ? [] : this.bins.slice(0, n);\n            } else\n               if (selbins) selbins.push(this.bins[n]);\n         }\n      }\n      if (!selbins) selbins = this.bins;\n\n      if (!maxpnt) maxpnt = 500000;\n\n      if ((selbins.length < maxpnt) || !this.canOptimize()) return selbins;\n      let step = Math.floor(selbins.length / maxpnt);\n      if (step < 2) step = 2;\n      const optbins = [];\n      for (let n = 0; n < selbins.length; n+=step)\n         optbins.push(selbins[n]);\n\n      return optbins;\n   }\n\n   /** @summary Check if such function should be drawn directly */\n   needDrawFunc(graph, func) {\n      if (func._typename === clTPaveStats)\n          return (func.fName !== 'stats') || !graph.TestBit(kNoStats); // kNoStats is same for graph and histogram\n\n       if ((func._typename === clTF1) || (func._typename === clTF2))\n          return !func.TestBit(BIT(9)); // TF1::kNotDraw\n\n       return true;\n   }\n\n   /** @summary Returns tooltip for specified bin */\n   getTooltips(d) {\n      const pmain = this.get_main(), lines = [],\n          funcs = pmain.getGrFuncs(this.options.second_x, this.options.second_y),\n          gme = this.get_gme();\n\n      lines.push(this.getObjectHint());\n\n      if (d && funcs) {\n         if (d.indx !== undefined)\n            lines.push('p = ' + d.indx);\n         lines.push('x = ' + funcs.axisAsText('x', d.x), 'y = ' + funcs.axisAsText('y', d.y));\n         if (gme)\n            lines.push('error x = -' + funcs.axisAsText('x', gme.fExL[d.indx]) + '/+' + funcs.axisAsText('x', gme.fExH[d.indx]));\n         else if (this.options.Errors && (funcs.x_handle.kind === kAxisNormal) && (d.exlow || d.exhigh))\n            lines.push('error x = -' + funcs.axisAsText('x', d.exlow) + '/+' + funcs.axisAsText('x', d.exhigh));\n\n         if (gme) {\n            for (let ny = 0; ny < gme.fNYErrors; ++ny)\n               lines.push(`error y${ny} = -${funcs.axisAsText('y', gme.fEyL[ny][d.indx])}/+${funcs.axisAsText('y', gme.fEyH[ny][d.indx])}`);\n         } else if ((this.options.Errors || (this.options.EF > 0)) && (funcs.y_handle.kind === kAxisNormal) && (d.eylow || d.eyhigh))\n            lines.push('error y = -' + funcs.axisAsText('y', d.eylow) + '/+' + funcs.axisAsText('y', d.eyhigh));\n      }\n      return lines;\n   }\n\n   /** @summary Provide frame painter for graph\n     * @desc If not exists, emulate its behaviour */\n   get_main() {\n      let pmain = this.getFramePainter();\n\n      if (pmain?.grx && pmain?.gry) return pmain;\n\n      // FIXME: check if needed, can be removed easily\n      const pp = this.getPadPainter(),\n            rect = pp?.getPadRect() || { width: 800, height: 600 };\n\n      pmain = {\n          pad_layer: true,\n          pad: pp?.getRootPad(true) ?? create(clTPad),\n          pw: rect.width,\n          ph: rect.height,\n          fX1NDC: 0.1, fX2NDC: 0.9, fY1NDC: 0.1, fY2NDC: 0.9,\n          getFrameWidth() { return this.pw; },\n          getFrameHeight() { return this.ph; },\n          grx(value) {\n             if (this.pad.fLogx)\n                value = (value > 0) ? Math.log10(value) : this.pad.fUxmin;\n             else\n                value = (value - this.pad.fX1) / (this.pad.fX2 - this.pad.fX1);\n             return value * this.pw;\n          },\n          gry(value) {\n             if (this.pad.fLogv ?? this.pad.fLogy)\n                value = (value > 0) ? Math.log10(value) : this.pad.fUymin;\n             else\n                value = (value - this.pad.fY1) / (this.pad.fY2 - this.pad.fY1);\n             return (1 - value) * this.ph;\n          },\n          revertAxis(name, v) {\n            if (name === 'x')\n               return v / this.pw * (this.pad.fX2 - this.pad.fX1) + this.pad.fX1;\n            if (name === 'y')\n               return (1 - v / this.ph) * (this.pad.fY2 - this.pad.fY1) + this.pad.fY1;\n            return v;\n          },\n          getGrFuncs() { return this; }\n      };\n\n      return pmain.pad ? pmain : null;\n   }\n\n   /** @summary append exclusion area to created path */\n   appendExclusion(is_curve, path, drawbins, excl_width) {\n      const extrabins = [];\n      for (let n = drawbins.length-1; n >= 0; --n) {\n         const bin = drawbins[n],\n             dlen = Math.sqrt(bin.dgrx**2 + bin.dgry**2);\n         if (dlen > 1e-10) {\n            // shift point\n            bin.grx += excl_width*bin.dgry/dlen;\n            bin.gry -= excl_width*bin.dgrx/dlen;\n         }\n         extrabins.push(bin);\n      }\n\n      const path2 = buildSvgCurve(extrabins, { cmd: 'L', line: !is_curve });\n\n      this.draw_g.append('svg:path')\n                 .attr('d', path + path2 + 'Z')\n                 .call(this.fillatt.func)\n                 .style('opacity', 0.75);\n   }\n\n   /** @summary draw TGraph bins with specified options\n     * @desc Can be called several times */\n   drawBins(funcs, options, draw_g, w, h, lineatt, fillatt, main_block) {\n      const graph = this.getGraph();\n      if (!graph?.fNpoints) return;\n\n      let excl_width = 0, drawbins = null;\n\n      if (main_block && lineatt.excl_side) {\n         excl_width = lineatt.excl_width;\n         if ((lineatt.width > 0) && !options.Line && !options.Curve) options.Line = 1;\n      }\n\n      if (options.EF) {\n         drawbins = this.optimizeBins((options.EF > 1) ? 20000 : 0);\n\n         // build lower part\n         for (let n = 0; n < drawbins.length; ++n) {\n            const bin = drawbins[n];\n            bin.grx = funcs.grx(bin.x);\n            bin.gry = funcs.gry(bin.y - bin.eylow);\n         }\n\n         const path1 = buildSvgCurve(drawbins, { line: options.EF < 2, qubic: true }),\n             bins2 = [];\n\n         for (let n = drawbins.length-1; n >= 0; --n) {\n            const bin = drawbins[n];\n            bin.gry = funcs.gry(bin.y + bin.eyhigh);\n            bins2.push(bin);\n         }\n\n         // build upper part (in reverse direction)\n         const path2 = buildSvgCurve(bins2, { line: options.EF < 2, cmd: 'L', qubic: true }),\n            area = draw_g.append('svg:path')\n               .attr('d', path1 + path2 + 'Z')\n               .call(fillatt.func);\n\n         // Let behaves as ROOT - see JIRA ROOT-8131\n         if (fillatt.empty() && fillatt.colorindx)\n            area.style('stroke', this.getColor(fillatt.colorindx));\n         if (main_block)\n            this.draw_kind = 'lines';\n      }\n\n      if (options.Line || options.Fill) {\n         let close_symbol = '';\n         if (this._cutg) {\n            close_symbol = 'Z';\n            if (!options.original) options.Fill = 1;\n         }\n\n         if (options.Fill) {\n            close_symbol = 'Z'; // always close area if we want to fill it\n            excl_width = 0;\n         }\n\n         if (!drawbins) drawbins = this.optimizeBins(0);\n\n         for (let n = 0; n < drawbins.length; ++n) {\n            const bin = drawbins[n];\n            bin.grx = funcs.grx(bin.x);\n            bin.gry = funcs.gry(bin.y);\n         }\n\n         const path = buildSvgCurve(drawbins, { line: true, calc: excl_width });\n\n         if (excl_width)\n             this.appendExclusion(false, path, drawbins, excl_width);\n\n         const elem = draw_g.append('svg:path').attr('d', path + close_symbol);\n         if (options.Line)\n            elem.call(lineatt.func);\n\n         if (options.Fill)\n            elem.call(fillatt.func);\n         else\n            elem.style('fill', 'none');\n\n         if (main_block)\n            this.draw_kind = 'lines';\n      }\n\n      if (options.Curve) {\n         let curvebins = drawbins;\n         if ((this.draw_kind !== 'lines') || !curvebins || ((options.Curve === 1) && (curvebins.length > 20000))) {\n            curvebins = this.optimizeBins((options.Curve === 1) ? 20000 : 0);\n            for (let n = 0; n < curvebins.length; ++n) {\n               const bin = curvebins[n];\n               bin.grx = funcs.grx(bin.x);\n               bin.gry = funcs.gry(bin.y);\n            }\n         }\n\n         const path = buildSvgCurve(curvebins, { qubic: !excl_width });\n         if (excl_width)\n            this.appendExclusion(true, path, curvebins, excl_width);\n\n         draw_g.append('svg:path')\n               .attr('d', path)\n               .call(lineatt.func)\n               .style('fill', 'none');\n         if (main_block)\n            this.draw_kind = 'lines'; // handled same way as lines\n      }\n\n      let nodes = null;\n\n      if (options.Errors || options.Rect || options.Bar) {\n         drawbins = this.optimizeBins(5000, (pnt, i) => {\n            const grx = funcs.grx(pnt.x);\n\n            // when drawing bars, take all points\n            if (!options.Bar && ((grx < 0) || (grx > w))) return true;\n\n            const gry = funcs.gry(pnt.y);\n\n            if (!options.Bar && !options.OutRange && ((gry < 0) || (gry > h))) return true;\n\n            pnt.grx1 = Math.round(grx);\n            pnt.gry1 = Math.round(gry);\n\n            if (this.has_errors) {\n               pnt.grx0 = Math.round(funcs.grx(pnt.x - options.ScaleErrX*pnt.exlow) - grx);\n               pnt.grx2 = Math.round(funcs.grx(pnt.x + options.ScaleErrX*pnt.exhigh) - grx);\n               pnt.gry0 = Math.round(funcs.gry(pnt.y - pnt.eylow) - gry);\n               pnt.gry2 = Math.round(funcs.gry(pnt.y + pnt.eyhigh) - gry);\n\n               if (this.is_bent) {\n                  pnt.grdx0 = Math.round(funcs.gry(pnt.y + graph.fEXlowd[i]) - gry);\n                  pnt.grdx2 = Math.round(funcs.gry(pnt.y + graph.fEXhighd[i]) - gry);\n                  pnt.grdy0 = Math.round(funcs.grx(pnt.x + graph.fEYlowd[i]) - grx);\n                  pnt.grdy2 = Math.round(funcs.grx(pnt.x + graph.fEYhighd[i]) - grx);\n               } else\n                  pnt.grdx0 = pnt.grdx2 = pnt.grdy0 = pnt.grdy2 = 0;\n            }\n\n            return false;\n         });\n\n         if (main_block)\n            this.draw_kind = 'nodes';\n\n         nodes = draw_g.selectAll('.grpoint')\n                       .data(drawbins)\n                       .enter()\n                       .append('svg:g')\n                       .attr('class', 'grpoint')\n                       .attr('transform', d => makeTranslate(d.grx1, d.gry1));\n      }\n\n      if (options.Bar) {\n         // calculate bar width\n\n         let xmin = 0, xmax = 0;\n         for (let i = 0; i < drawbins.length; ++i) {\n            if (i === 0)\n               xmin = xmax = drawbins[i].grx1;\n            else {\n               xmin = Math.min(xmin, drawbins[i].grx1);\n               xmax = Math.max(xmax, drawbins[i].grx1);\n            }\n         }\n\n         if (drawbins.length === 1)\n            drawbins[0].width = w/4; // pathologic case of single bin\n         else {\n            for (let i = 0; i < drawbins.length; ++i)\n               drawbins[i].width = (xmax - xmin) / drawbins.length * gStyle.fBarWidth;\n         }\n\n         const yy0 = Math.round(funcs.gry(0));\n         let usefill = fillatt;\n\n         if (main_block) {\n            const fp = this.getFramePainter(),\n                  fpcol = !fp?.fillatt?.empty() ? fp.fillatt.getFillColor() : -1;\n\n            if (fpcol === fillatt.getFillColor())\n               usefill = this.createAttFill({ color: fpcol === 'white' ? kBlack : kWhite, pattern: 1001, std: false });\n         }\n\n         nodes.append('svg:path')\n              .attr('d', d => {\n                 d.bar = true; // element drawn as bar\n                 const dx = d.width > 1 ? Math.round(-d.width/2) : 0,\n                       dw = d.width > 1 ? Math.round(d.width) : 1,\n                       dy = (options.Bar !== 1) ? 0 : ((d.gry1 > yy0) ? yy0-d.gry1 : 0),\n                       dh = (options.Bar !== 1) ? (h > d.gry1 ? h - d.gry1 : 0) : Math.abs(yy0 - d.gry1);\n                 return `M${dx},${dy}h${dw}v${dh}h${-dw}z`;\n              })\n            .call(usefill.func);\n      }\n\n      if (options.Rect) {\n         nodes.filter(d => (d.exlow > 0) && (d.exhigh > 0) && (d.eylow > 0) && (d.eyhigh > 0))\n           .append('svg:path')\n           .attr('d', d => {\n               d.rect = true;\n               return `M${d.grx0},${d.gry0}H${d.grx2}V${d.gry2}H${d.grx0}Z`;\n            })\n           .call(fillatt.func)\n           .call(options.Rect === 2 ? lineatt.func : () => {});\n      }\n\n      this.error_size = 0;\n\n      if (options.Errors) {\n         // to show end of error markers, use line width attribute\n         let lw = lineatt.width + gStyle.fEndErrorSize, bb = 0;\n         const vv = options.Ends ? `m0,${lw}v${-2*lw}` : '',\n               hh = options.Ends ? `m${lw},0h${-2*lw}` : '';\n         let vleft = vv, vright = vv, htop = hh, hbottom = hh;\n\n         const mainLine = (dx, dy) => {\n            if (!options.MainError) return `M${dx},${dy}`;\n            const res = 'M0,0';\n            if (dx) return res + (dy ? `L${dx},${dy}` : `H${dx}`);\n            return dy ? res + `V${dy}` : res;\n         };\n\n         switch (options.Ends) {\n            case 2:  // option []\n               bb = Math.max(lineatt.width+1, Math.round(lw*0.66));\n               vleft = `m${bb},${lw}h${-bb}v${-2*lw}h${bb}`;\n               vright = `m${-bb},${lw}h${bb}v${-2*lw}h${-bb}`;\n               htop = `m${-lw},${bb}v${-bb}h${2*lw}v${bb}`;\n               hbottom = `m${-lw},${-bb}v${bb}h${2*lw}v${-bb}`;\n               break;\n            case 3: // option |>\n               lw = Math.max(lw, Math.round(graph.fMarkerSize*8*0.66));\n               bb = Math.max(lineatt.width+1, Math.round(lw*0.66));\n               vleft = `l${bb},${lw}v${-2*lw}l${-bb},${lw}`;\n               vright = `l${-bb},${lw}v${-2*lw}l${bb},${lw}`;\n               htop = `l${-lw},${bb}h${2*lw}l${-lw},${-bb}`;\n               hbottom = `l${-lw},${-bb}h${2*lw}l${-lw},${bb}`;\n               break;\n            case 4: // option >\n               lw = Math.max(lw, Math.round(graph.fMarkerSize*8*0.66));\n               bb = Math.max(lineatt.width+1, Math.round(lw*0.66));\n               vleft = `l${bb},${lw}m0,${-2*lw}l${-bb},${lw}`;\n               vright = `l${-bb},${lw}m0,${-2*lw}l${bb},${lw}`;\n               htop = `l${-lw},${bb}m${2*lw},0l${-lw},${-bb}`;\n               hbottom = `l${-lw},${-bb}m${2*lw},0l${-lw},${bb}`;\n               break;\n         }\n\n         this.error_size = lw;\n\n         lw = Math.floor((lineatt.width-1)/2); // one should take into account half of end-cup line width\n\n         let visible = nodes.filter(d => (d.exlow > 0) || (d.exhigh > 0) || (d.eylow > 0) || (d.eyhigh > 0));\n         if (options.skip_errors_x0 || options.skip_errors_y0)\n            visible = visible.filter(d => ((d.x !== 0) || !options.skip_errors_x0) && ((d.y !== 0) || !options.skip_errors_y0));\n\n         if (!this.isBatchMode() && settings.Tooltip && main_block) {\n            visible.append('svg:path')\n                   .style('fill', 'none')\n                   .style('pointer-events', 'visibleFill')\n                   .attr('d', d => `M${d.grx0},${d.gry0}h${d.grx2-d.grx0}v${d.gry2-d.gry0}h${d.grx0-d.grx2}z`);\n         }\n\n         visible.append('svg:path')\n             .call(lineatt.func)\n             .style('fill', 'none')\n             .attr('d', d => {\n                d.error = true;\n                return ((d.exlow > 0) ? mainLine(d.grx0+lw, d.grdx0) + vleft : '') +\n                       ((d.exhigh > 0) ? mainLine(d.grx2-lw, d.grdx2) + vright : '') +\n                       ((d.eylow > 0) ? mainLine(d.grdy0, d.gry0-lw) + hbottom : '') +\n                       ((d.eyhigh > 0) ? mainLine(d.grdy2, d.gry2+lw) + htop : '');\n              });\n      }\n\n      if (options.Mark) {\n         // for tooltips use markers only if nodes were not created\n         this.createAttMarker({ attr: graph, style: options.Mark - 100 });\n\n         this.marker_size = this.markeratt.getFullSize();\n\n         this.markeratt.resetPos();\n\n         const want_tooltip = !this.isBatchMode() && settings.Tooltip && (!this.markeratt.fill || (this.marker_size < 7)) && !nodes && main_block,\n               hsz = Math.max(5, Math.round(this.marker_size*0.7)),\n               maxnummarker = 1000000 / (this.markeratt.getMarkerLength() + 7); // let produce SVG at maximum 1MB\n\n         let path = '', pnt, grx, gry,\n             hints_marker = '', step = 1;\n\n         if (!drawbins)\n            drawbins = this.optimizeBins(maxnummarker);\n         else if (this.canOptimize() && (drawbins.length > 1.5*maxnummarker))\n            step = Math.min(2, Math.round(drawbins.length/maxnummarker));\n\n         for (let n = 0; n < drawbins.length; n += step) {\n            pnt = drawbins[n];\n            grx = funcs.grx(pnt.x);\n            if ((grx > -this.marker_size) && (grx < w + this.marker_size)) {\n               gry = funcs.gry(pnt.y);\n               if ((gry > -this.marker_size) && (gry < h + this.marker_size)) {\n                  path += this.markeratt.create(grx, gry);\n                  if (want_tooltip) hints_marker += `M${grx-hsz},${gry-hsz}h${2*hsz}v${2*hsz}h${-2*hsz}z`;\n               }\n            }\n         }\n\n         if (path) {\n            draw_g.append('svg:path')\n                  .attr('d', path)\n                  .call(this.markeratt.func);\n            if ((nodes === null) && (this.draw_kind === 'none') && main_block)\n               this.draw_kind = (options.Mark === 101) ? 'path' : 'mark';\n         }\n         if (want_tooltip && hints_marker) {\n            draw_g.append('svg:path')\n                  .attr('d', hints_marker)\n                  .style('fill', 'none')\n                  .style('pointer-events', 'visibleFill');\n         }\n      }\n   }\n\n   /** @summary append TGraphQQ part */\n   appendQQ(funcs, graph) {\n      const xqmin = Math.max(funcs.scale_xmin, graph.fXq1),\n            xqmax = Math.min(funcs.scale_xmax, graph.fXq2),\n            yqmin = Math.max(funcs.scale_ymin, graph.fYq1),\n            yqmax = Math.min(funcs.scale_ymax, graph.fYq2),\n            makeLine = (x1, y1, x2, y2) => `M${funcs.grx(x1)},${funcs.gry(y1)}L${funcs.grx(x2)},${funcs.gry(y2)}`,\n            yxmin = (graph.fYq2 - graph.fYq1)*(funcs.scale_xmin-graph.fXq1)/(graph.fXq2-graph.fXq1) + graph.fYq1,\n            yxmax = (graph.fYq2-graph.fYq1)*(funcs.scale_xmax-graph.fXq1)/(graph.fXq2-graph.fXq1) + graph.fYq1;\n\n      let path2 = '';\n      if (yxmin < funcs.scale_ymin) {\n         const xymin = (graph.fXq2 - graph.fXq1)*(funcs.scale_ymin-graph.fYq1)/(graph.fYq2-graph.fYq1) + graph.fXq1;\n         path2 = makeLine(xymin, funcs.scale_ymin, xqmin, yqmin);\n      } else\n         path2 = makeLine(funcs.scale_xmin, yxmin, xqmin, yqmin);\n\n\n      if (yxmax > funcs.scale_ymax) {\n         const xymax = (graph.fXq2-graph.fXq1)*(funcs.scale_ymax-graph.fYq1)/(graph.fYq2-graph.fYq1) + graph.fXq1;\n         path2 += makeLine(xqmax, yqmax, xymax, funcs.scale_ymax);\n      } else\n         path2 += makeLine(xqmax, yqmax, funcs.scale_xmax, yxmax);\n\n\n      const latt1 = this.createAttLine({ style: 1, width: 1, color: kBlack, std: false }),\n            latt2 = this.createAttLine({ style: 2, width: 1, color: kBlack, std: false });\n\n      this.draw_g.append('path')\n                 .attr('d', makeLine(xqmin, yqmin, xqmax, yqmax))\n                 .call(latt1.func)\n                 .style('fill', 'none');\n\n      this.draw_g.append('path')\n                 .attr('d', path2)\n                 .call(latt2.func)\n                 .style('fill', 'none');\n   }\n\n   drawBins3D(/* fp, graph */) {\n      console.log('Load ./hist/TGraphPainter.mjs to draw graph in 3D');\n   }\n\n   /** @summary Create necessary histogram draw attributes */\n   createGraphDrawAttributes(only_check_auto) {\n      const graph = this.getGraph(), o = this.options;\n      if (o._pfc > 1 || o._plc > 1 || o._pmc > 1) {\n         const pp = this.getPadPainter();\n         if (isFunc(pp?.getAutoColor)) {\n            const icolor = pp.getAutoColor(graph.$num_graphs);\n            this._auto_exec = ''; // can be reused when sending option back to server\n            if (o._pfc > 1) { o._pfc = 1; graph.fFillColor = icolor; this._auto_exec += `SetFillColor(${icolor});;`; delete this.fillatt; }\n            if (o._plc > 1) { o._plc = 1; graph.fLineColor = icolor; this._auto_exec += `SetLineColor(${icolor});;`; delete this.lineatt; }\n            if (o._pmc > 1) { o._pmc = 1; graph.fMarkerColor = icolor; this._auto_exec += `SetMarkerColor(${icolor});;`; delete this.markeratt; }\n         }\n      }\n\n      if (only_check_auto)\n         this.deleteAttr();\n      else {\n         this.createAttLine({ attr: graph, can_excl: true });\n         this.createAttFill({ attr: graph });\n      }\n   }\n\n   /** @summary draw TGraph */\n   drawGraph() {\n      const pmain = this.get_main(),\n            graph = this.getGraph();\n      if (!pmain) return;\n\n      // special mode for TMultiGraph 3d drawing\n      if (this.options.pos3d)\n         return this.drawBins3D(pmain, graph);\n\n      const is_gme = !!this.get_gme(),\n            funcs = pmain.getGrFuncs(this.options.second_x, this.options.second_y),\n            w = pmain.getFrameWidth(),\n            h = pmain.getFrameHeight();\n\n      this.createG(!pmain.pad_layer);\n\n      this.createGraphDrawAttributes();\n\n      this.fillatt.used = false; // mark used only when really used\n\n      this.draw_kind = 'none'; // indicate if special svg:g were created for each bin\n      this.marker_size = 0; // indicate if markers are drawn\n      const draw_g = is_gme ? this.draw_g.append('svg:g') : this.draw_g;\n\n      this.drawBins(funcs, this.options, draw_g, w, h, this.lineatt, this.fillatt, true);\n\n      if (graph._typename === 'TGraphQQ')\n         this.appendQQ(funcs, graph);\n\n      if (is_gme) {\n         for (let k = 0; k < graph.fNYErrors; ++k) {\n            let lineatt = this.lineatt, fillatt = this.fillatt;\n            if (this.options.individual_styles) {\n               lineatt = this.createAttLine({ attr: graph.fAttLine[k], std: false });\n               fillatt = this.createAttFill({ attr: graph.fAttFill[k], std: false });\n            }\n            const sub_g = this.draw_g.append('svg:g'),\n                options = (k < this.options.blocks.length) ? this.options.blocks[k] : this.options;\n            this.extractGmeErrors(k);\n            this.drawBins(funcs, options, sub_g, w, h, lineatt, fillatt);\n         }\n         this.extractGmeErrors(0); // ensure that first block kept at the end\n      }\n\n      if (!this.isBatchMode()) {\n         addMoveHandler(this, this.testEditable());\n         assignContextMenu(this);\n      }\n   }\n\n   /** @summary Provide tooltip at specified point */\n   extractTooltip(pnt) {\n      if (!pnt) return null;\n\n      if ((this.draw_kind === 'lines') || (this.draw_kind === 'path') || (this.draw_kind === 'mark'))\n         return this.extractTooltipForPath(pnt);\n\n      if (this.draw_kind !== 'nodes') return null;\n\n      const pmain = this.get_main(),\n            height = pmain.getFrameHeight(),\n            esz = this.error_size,\n            isbar1 = (this.options.Bar === 1),\n            funcs = isbar1 ? pmain.getGrFuncs(this.options.second_x, this.options.second_y) : null,\n            msize = this.marker_size ? Math.round(this.marker_size/2 + 1.5) : 0;\n      let findbin = null, best_dist2 = 1e10, best = null;\n\n      this.draw_g.selectAll('.grpoint').each(function() {\n         const d = d3_select(this).datum();\n         if (d === undefined) return;\n         let dist2 = (pnt.x - d.grx1) ** 2;\n         if (pnt.nproc === 1) dist2 += (pnt.y - d.gry1) ** 2;\n         if (dist2 >= best_dist2) return;\n\n         let rect;\n\n         if (d.error || d.rect || d.marker) {\n            rect = { x1: Math.min(-esz, d.grx0, -msize),\n                     x2: Math.max(esz, d.grx2, msize),\n                     y1: Math.min(-esz, d.gry2, -msize),\n                     y2: Math.max(esz, d.gry0, msize) };\n         } else if (d.bar) {\n             rect = { x1: -d.width/2, x2: d.width/2, y1: 0, y2: height - d.gry1 };\n\n             if (isbar1) {\n                const yy0 = funcs.gry(0);\n                rect.y1 = (d.gry1 > yy0) ? yy0-d.gry1 : 0;\n                rect.y2 = (d.gry1 > yy0) ? 0 : yy0-d.gry1;\n             }\n          } else\n             rect = { x1: -5, x2: 5, y1: -5, y2: 5 };\n\n          const matchx = (pnt.x >= d.grx1 + rect.x1) && (pnt.x <= d.grx1 + rect.x2),\n              matchy = (pnt.y >= d.gry1 + rect.y1) && (pnt.y <= d.gry1 + rect.y2);\n\n          if (matchx && (matchy || (pnt.nproc > 1))) {\n             best_dist2 = dist2;\n             findbin = this;\n             best = rect;\n             best.exact = /* matchx && */ matchy;\n          }\n       });\n\n      if (findbin === null) return null;\n\n      const d = d3_select(findbin).datum(),\n            gr = this.getGraph(),\n            res = { name: gr.fName, title: gr.fTitle,\n                    x: d.grx1, y: d.gry1,\n                    color1: this.lineatt.color,\n                    lines: this.getTooltips(d),\n                    rect: best, d3bin: findbin };\n\n       res.user_info = { obj: gr, name: gr.fName, bin: d.indx, cont: d.y, grx: d.grx1, gry: d.gry1 };\n\n      if (this.fillatt?.used && !this.fillatt?.empty())\n         res.color2 = this.fillatt.getFillColor();\n\n      if (best.exact) res.exact = true;\n      res.menu = res.exact; // activate menu only when exactly locate bin\n      res.menu_dist = 3; // distance always fixed\n      res.bin = d;\n      res.binindx = d.indx;\n\n      return res;\n   }\n\n   /** @summary Show tooltip */\n   showTooltip(hint) {\n      let ttrect = this.draw_g?.selectChild('.tooltip_bin');\n\n      if (!hint || !this.draw_g) {\n         ttrect?.remove();\n         return;\n      }\n\n      if (hint.usepath)\n         return this.showTooltipForPath(hint);\n\n      const d = d3_select(hint.d3bin).datum();\n\n      if (ttrect.empty()) {\n         ttrect = this.draw_g.append('svg:rect')\n                             .attr('class', 'tooltip_bin')\n                             .style('pointer-events', 'none')\n                             .call(addHighlightStyle);\n      }\n\n      hint.changed = ttrect.property('current_bin') !== hint.d3bin;\n\n      if (hint.changed) {\n         ttrect.attr('x', d.grx1 + hint.rect.x1)\n               .attr('width', hint.rect.x2 - hint.rect.x1)\n               .attr('y', d.gry1 + hint.rect.y1)\n               .attr('height', hint.rect.y2 - hint.rect.y1)\n               .style('opacity', '0.3')\n               .property('current_bin', hint.d3bin);\n      }\n   }\n\n   /** @summary Process tooltip event */\n   processTooltipEvent(pnt) {\n      const hint = this.extractTooltip(pnt);\n      if (!pnt || !pnt.disabled) this.showTooltip(hint);\n      return hint;\n   }\n\n   /** @summary Find best bin index for specified point */\n   findBestBin(pnt) {\n      if (!this.bins) return null;\n\n      const islines = (this.draw_kind === 'lines'),\n            funcs = this.get_main().getGrFuncs(this.options.second_x, this.options.second_y);\n      let bestindx = -1,\n          bestbin = null,\n          bestdist = 1e10,\n          dist, grx, gry, n, bin;\n\n      for (n = 0; n < this.bins.length; ++n) {\n         bin = this.bins[n];\n\n         grx = funcs.grx(bin.x);\n         gry = funcs.gry(bin.y);\n\n         dist = (pnt.x-grx)**2 + (pnt.y-gry)**2;\n\n         if (dist < bestdist) {\n            bestdist = dist;\n            bestbin = bin;\n            bestindx = n;\n         }\n      }\n\n      // check last point\n      if ((bestdist > 100) && islines) bestbin = null;\n\n      let radius = Math.max(this.lineatt.width + 3, 4);\n\n      if (this.marker_size > 0) radius = Math.max(this.marker_size, radius);\n\n      if (bestbin)\n         bestdist = Math.sqrt((pnt.x-funcs.grx(bestbin.x))**2 + (pnt.y-funcs.gry(bestbin.y))**2);\n\n      if (!islines && (bestdist > radius)) bestbin = null;\n\n      if (!bestbin) bestindx = -1;\n\n      const res = { bin: bestbin, indx: bestindx, dist: bestdist, radius: Math.round(radius) };\n\n      if (!bestbin && islines) {\n         bestdist = 1e10;\n\n         const IsInside = (x, x1, x2) => ((x1 >= x) && (x >= x2)) || ((x1 <= x) && (x <= x2));\n\n         let bin0 = this.bins[0], grx0 = funcs.grx(bin0.x), gry0, posy = 0;\n         for (n = 1; n < this.bins.length; ++n) {\n            bin = this.bins[n];\n            grx = funcs.grx(bin.x);\n\n            if (IsInside(pnt.x, grx0, grx)) {\n               // if inside interval, check Y distance\n               gry0 = funcs.gry(bin0.y);\n               gry = funcs.gry(bin.y);\n\n               if (Math.abs(grx - grx0) < 1) {\n                  // very close x - check only y\n                  posy = pnt.y;\n                  dist = IsInside(pnt.y, gry0, gry) ? 0 : Math.min(Math.abs(pnt.y-gry0), Math.abs(pnt.y-gry));\n               } else {\n                  posy = gry0 + (pnt.x - grx0) / (grx - grx0) * (gry - gry0);\n                  dist = Math.abs(posy - pnt.y);\n               }\n\n               if (dist < bestdist) {\n                  bestdist = dist;\n                  res.linex = pnt.x;\n                  res.liney = posy;\n               }\n            }\n\n            bin0 = bin;\n            grx0 = grx;\n         }\n\n         if (bestdist < radius*0.5) {\n            res.linedist = bestdist;\n            res.closeline = true;\n         }\n      }\n\n      return res;\n   }\n\n   /** @summary Check editable flag for TGraph\n     * @desc if arg specified changes or toggles editable flag */\n   testEditable(arg) {\n      const obj = this.getGraph();\n      if (!obj) return false;\n      if ((arg === 'toggle') || ((arg !== undefined) && (!arg !== obj.TestBit(kNotEditable))))\n         obj.InvertBit(kNotEditable);\n      return !obj.TestBit(kNotEditable);\n   }\n\n   /** @summary Provide tooltip at specified point for path-based drawing */\n   extractTooltipForPath(pnt) {\n      if (this.bins === null) return null;\n\n      const best = this.findBestBin(pnt);\n\n      if (!best || (!best.bin && !best.closeline)) return null;\n\n      const islines = (this.draw_kind === 'lines'),\n          ismark = (this.draw_kind === 'mark'),\n          pmain = this.get_main(),\n          funcs = pmain.getGrFuncs(this.options.second_x, this.options.second_y),\n          gr = this.getGraph(),\n          res = { name: gr.fName, title: gr.fTitle,\n                  x: best.bin ? funcs.grx(best.bin.x) : best.linex,\n                  y: best.bin ? funcs.gry(best.bin.y) : best.liney,\n                  color1: this.lineatt.color,\n                  lines: this.getTooltips(best.bin),\n                  usepath: true };\n\n      res.user_info = { obj: gr, name: gr.fName, bin: 0, cont: 0, grx: res.x, gry: res.y };\n\n      res.ismark = ismark;\n      res.islines = islines;\n\n      if (best.closeline) {\n         res.menu = res.exact = true;\n         res.menu_dist = best.linedist;\n      } else if (best.bin) {\n         if (this.options.EF && islines) {\n            res.gry1 = funcs.gry(best.bin.y - best.bin.eylow);\n            res.gry2 = funcs.gry(best.bin.y + best.bin.eyhigh);\n         } else\n            res.gry1 = res.gry2 = funcs.gry(best.bin.y);\n\n\n         res.binindx = best.indx;\n         res.bin = best.bin;\n         res.radius = best.radius;\n         res.user_info.bin = best.indx;\n         res.user_info.cont = best.bin.y;\n\n         res.exact = (Math.abs(pnt.x - res.x) <= best.radius) &&\n            ((Math.abs(pnt.y - res.gry1) <= best.radius) || (Math.abs(pnt.y - res.gry2) <= best.radius));\n\n         res.menu = res.exact;\n         res.menu_dist = Math.sqrt((pnt.x-res.x)**2 + Math.min(Math.abs(pnt.y-res.gry1), Math.abs(pnt.y-res.gry2))**2);\n      }\n\n      if (this.fillatt?.used && !this.fillatt?.empty())\n         res.color2 = this.fillatt.getFillColor();\n\n      if (!islines) {\n         res.color1 = this.getColor(gr.fMarkerColor);\n         if (!res.color2) res.color2 = res.color1;\n      }\n\n      return res;\n   }\n\n   /** @summary Show tooltip for path drawing */\n   showTooltipForPath(hint) {\n      let ttbin = this.draw_g?.selectChild('.tooltip_bin');\n\n      if (!hint?.bin || !this.draw_g) {\n         ttbin?.remove();\n         return;\n      }\n\n      if (ttbin.empty())\n         ttbin = this.draw_g.append('svg:g').attr('class', 'tooltip_bin');\n\n      hint.changed = ttbin.property('current_bin') !== hint.bin;\n\n      if (hint.changed) {\n         ttbin.selectAll('*').remove(); // first delete all children\n         ttbin.property('current_bin', hint.bin);\n\n         if (hint.ismark) {\n            ttbin.append('svg:rect')\n                 .style('pointer-events', 'none')\n                 .call(addHighlightStyle)\n                 .style('opacity', '0.3')\n                 .attr('x', Math.round(hint.x - hint.radius))\n                 .attr('y', Math.round(hint.y - hint.radius))\n                 .attr('width', 2*hint.radius)\n                 .attr('height', 2*hint.radius);\n         } else {\n            ttbin.append('svg:circle').attr('cy', Math.round(hint.gry1));\n            if (Math.abs(hint.gry1-hint.gry2) > 1)\n               ttbin.append('svg:circle').attr('cy', Math.round(hint.gry2));\n\n            const elem = ttbin.selectAll('circle')\n                            .attr('r', hint.radius)\n                            .attr('cx', Math.round(hint.x));\n\n            if (!hint.islines)\n               elem.style('stroke', hint.color1 === 'black' ? 'green' : 'black').style('fill', 'none');\n             else {\n               if (this.options.Line || this.options.Curve)\n                  elem.call(this.lineatt.func);\n               else\n                  elem.style('stroke', 'black');\n               if (this.options.Fill)\n                  elem.call(this.fillatt.func);\n               else\n                  elem.style('fill', 'none');\n            }\n         }\n      }\n   }\n\n   /** @summary Check if graph moving is enabled */\n   moveEnabled() {\n      return this.testEditable();\n   }\n\n   /** @summary Start moving of TGraph */\n   moveStart(x, y) {\n      this.pos_dx = this.pos_dy = 0;\n      this.move_funcs = this.get_main().getGrFuncs(this.options.second_x, this.options.second_y);\n      const hint = this.extractTooltip({ x, y });\n      if (hint && hint.exact && (hint.binindx !== undefined)) {\n         this.move_binindx = hint.binindx;\n         this.move_bin = hint.bin;\n         this.move_x0 = this.move_funcs.grx(this.move_bin.x);\n         this.move_y0 = this.move_funcs.gry(this.move_bin.y);\n      } else\n         delete this.move_binindx;\n   }\n\n   /** @summary Perform moving */\n   moveDrag(dx, dy) {\n      this.pos_dx += dx;\n      this.pos_dy += dy;\n\n      if (this.move_binindx === undefined)\n         makeTranslate(this.draw_g, this.pos_dx, this.pos_dy);\n       else if (this.move_funcs && this.move_bin) {\n         this.move_bin.x = this.move_funcs.revertAxis('x', this.move_x0 + this.pos_dx);\n         this.move_bin.y = this.move_funcs.revertAxis('y', this.move_y0 + this.pos_dy);\n         this.drawGraph();\n      }\n   }\n\n   /** @summary Complete moving */\n   moveEnd(not_changed) {\n      const graph = this.getGraph(), last = graph?.fNpoints-1;\n      let exec = '';\n\n      const changeBin = bin => {\n         exec += `SetPoint(${bin.indx},${bin.x},${bin.y});;`;\n         graph.fX[bin.indx] = bin.x;\n         graph.fY[bin.indx] = bin.y;\n         if ((bin.indx === 0) && this._cutg_lastsame) {\n            exec += `SetPoint(${last},${bin.x},${bin.y});;`;\n            graph.fX[last] = bin.x;\n            graph.fY[last] = bin.y;\n         }\n      };\n\n      if (this.move_binindx === undefined) {\n         this.draw_g.attr('transform', null);\n\n         if (this.move_funcs && this.bins && !not_changed) {\n            for (let k = 0; k < this.bins.length; ++k) {\n               const bin = this.bins[k];\n               bin.x = this.move_funcs.revertAxis('x', this.move_funcs.grx(bin.x) + this.pos_dx);\n               bin.y = this.move_funcs.revertAxis('y', this.move_funcs.gry(bin.y) + this.pos_dy);\n               changeBin(bin);\n            }\n            if (graph.$redraw_pad)\n               this.redrawPad();\n            else\n               this.drawGraph();\n         }\n      } else {\n         changeBin(this.move_bin);\n         delete this.move_binindx;\n         if (graph.$redraw_pad)\n            this.redrawPad();\n      }\n\n      delete this.move_funcs;\n\n      if (exec && !not_changed)\n         this.submitCanvExec(exec);\n   }\n\n   /** @summary Fill option object used in TWebCanvas */\n   fillWebObjectOptions(res) {\n      if (this._auto_exec && res) {\n         res.fcust = 'auto_exec:' + this._auto_exec;\n         delete this._auto_exec;\n      }\n   }\n\n   /** @summary Fill context menu */\n   fillContextMenuItems(menu) {\n      if (!this.snapid)\n         menu.addchk(this.testEditable(), 'Editable', () => { this.testEditable('toggle'); this.drawGraph(); });\n   }\n\n   /** @summary Execute menu command\n     * @private */\n   executeMenuCommand(method, args) {\n      if (super.executeMenuCommand(method, args)) return true;\n\n      const canp = this.getCanvPainter(), pmain = this.get_main();\n\n      if ((method.fName === 'RemovePoint') || (method.fName === 'InsertPoint')) {\n         if (!canp || canp._readonly) return true; // ignore function\n\n         const pnt = isFunc(pmain?.getLastEventPos) ? pmain.getLastEventPos() : null,\n             hint = this.extractTooltip(pnt);\n\n         if (method.fName === 'InsertPoint') {\n            if (pnt) {\n               const funcs = pmain.getGrFuncs(this.options.second_x, this.options.second_y),\n                     userx = funcs.revertAxis('x', pnt.x) ?? 0,\n                     usery = funcs.revertAxis('y', pnt.y) ?? 0;\n               this.submitCanvExec(`AddPoint(${userx.toFixed(3)}, ${usery.toFixed(3)})`, method.$execid);\n            }\n         } else if (method.$execid && (hint?.binindx !== undefined))\n            this.submitCanvExec(`RemovePoint(${hint.binindx})`, method.$execid);\n\n\n         return true; // call is processed\n      }\n\n      return false;\n   }\n\n   /** @summary Update TGraph object members\n     * @private */\n   _updateMembers(graph, obj) {\n      graph.fBits = obj.fBits;\n      graph.fTitle = obj.fTitle;\n      graph.fX = obj.fX;\n      graph.fY = obj.fY;\n      graph.fNpoints = obj.fNpoints;\n      graph.fMinimum = obj.fMinimum;\n      graph.fMaximum = obj.fMaximum;\n\n      const o = this.options;\n\n      if (this.snapid !== undefined)\n         o._pfc = o._plc = o._pmc = 0; // auto colors should be processed in web canvas\n\n      if (!o._pfc)\n         graph.fFillColor = obj.fFillColor;\n      graph.fFillStyle = obj.fFillStyle;\n      if (!o._plc)\n         graph.fLineColor = obj.fLineColor;\n      graph.fLineStyle = obj.fLineStyle;\n      graph.fLineWidth = obj.fLineWidth;\n      if (!o._pmc)\n         graph.fMarkerColor = obj.fMarkerColor;\n      graph.fMarkerSize = obj.fMarkerSize;\n      graph.fMarkerStyle = obj.fMarkerStyle;\n\n      return obj.fFunctions;\n   }\n\n   /** @summary Update TGraph object */\n   updateObject(obj, opt) {\n      if (!this.matchObjectType(obj)) return false;\n\n      if (opt && (opt !== this.options.original))\n         this.decodeOptions(opt);\n\n      const new_funcs = this._updateMembers(this.getObject(), obj);\n\n      this.createBins();\n\n      delete this.$redraw_hist;\n\n      // if our own histogram was used as axis drawing, we need update histogram as well\n      if (this.axes_draw) {\n         const histo = this.createHistogram(),\n               hist_painter = this.getMainPainter();\n         if (hist_painter?.isSecondary(this)) {\n            hist_painter.updateObject(histo, this.options.Axis);\n            this.$redraw_hist = true;\n         }\n      }\n\n      this._funcHandler = new FunctionsHandler(this, this.getPadPainter(), new_funcs);\n\n      return true;\n   }\n\n   /** @summary Checks if it makes sense to zoom inside specified axis range\n     * @desc allow to zoom TGraph only when at least one point in the range */\n   canZoomInside(axis, min, max) {\n      const gr = this.getGraph();\n      if (!gr || (axis !== (this.options.pos3d ? 'y' : 'x'))) return false;\n\n      for (let n = 0; n < gr.fNpoints; ++n)\n         if ((min < gr.fX[n]) && (gr.fX[n] < max)) return true;\n\n      return false;\n   }\n\n   /** @summary Process click on graph-defined buttons */\n   clickButton(funcname) {\n      if (funcname !== 'ToggleZoom') return false;\n\n      if ((this.xmin === this.xmax) && (this.ymin === this.ymax)) return false;\n\n      return this.getFramePainter()?.zoom(this.xmin, this.xmax, this.ymin, this.ymax);\n   }\n\n   /** @summary Find TF1/TF2 in TGraph list of functions */\n   findFunc() {\n      return this.getGraph()?.fFunctions?.arr?.find(func => (func._typename === clTF1) || (func._typename === clTF2));\n   }\n\n   /** @summary Find stat box in TGraph list of functions */\n   findStat() {\n      return this.getGraph()?.fFunctions?.arr?.find(func => (func._typename === clTPaveStats) && (func.fName === 'stats'));\n   }\n\n   /** @summary Create stat box */\n   createStat() {\n      const func = this.findFunc();\n      if (!func) return null;\n\n      let stats = this.findStat();\n      if (stats) return stats;\n\n      // do not create stats box when drawing canvas\n      if (this.getCanvPainter()?.normal_canvas) return null;\n\n      this.create_stats = true;\n\n      const st = gStyle;\n\n      stats = create(clTPaveStats);\n      Object.assign(stats, { fName: 'stats', fOptStat: 0, fOptFit: st.fOptFit || 111, fBorderSize: 1,\n                             fX1NDC: st.fStatX - st.fStatW, fY1NDC: st.fStatY - st.fStatH, fX2NDC: st.fStatX, fY2NDC: st.fStatY,\n                             fFillColor: st.fStatColor, fFillStyle: st.fStatStyle });\n\n      stats.fTextAngle = 0;\n      stats.fTextSize = st.fStatFontSize; // 9 ??\n      stats.fTextAlign = 12;\n      stats.fTextColor = st.fStatTextColor;\n      stats.fTextFont = st.fStatFont;\n\n      stats.AddText(func.fName);\n\n      // while TF1 was found, one can be sure that stats is existing\n      this.getGraph().fFunctions.Add(stats);\n\n      return stats;\n   }\n\n   /** @summary Fill statistic */\n   fillStatistic(stat, _dostat, dofit) {\n      const func = this.findFunc();\n\n      if (!func || !dofit) return false;\n\n      stat.clearPave();\n\n      stat.fillFunctionStat(func, (dofit === 1) ? 111 : dofit, 1);\n\n      return true;\n   }\n\n   /** @summary Draw axis histogram\n     * @private */\n   async drawAxisHisto() {\n      const histo = this.createHistogram();\n      return TH1Painter.draw(this.getDom(), histo, this.options.Axis);\n   }\n\n   /** @summary Draw TGraph\n     * @private */\n   static async _drawGraph(painter, opt) {\n      painter.decodeOptions(opt, true);\n      painter.createBins();\n      painter.createStat();\n      const graph = painter.getGraph();\n      if (!settings.DragGraphs && graph && !graph.TestBit(kNotEditable))\n         graph.InvertBit(kNotEditable);\n\n      let promise = Promise.resolve();\n\n      if ((!painter.getMainPainter() || painter.options.second_x || painter.options.second_y) && painter.options.Axis) {\n         promise = painter.drawAxisHisto().then(hist_painter => {\n            hist_painter?.setSecondaryId(painter, 'hist');\n            painter.axes_draw = !!hist_painter;\n         });\n      }\n\n      return promise.then(() => {\n         painter.addToPadPrimitives();\n         return painter.drawGraph();\n      }).then(() => {\n         const handler = new FunctionsHandler(painter, painter.getPadPainter(), graph.fFunctions, true);\n         return handler.drawNext(0); // returns painter\n      });\n   }\n\n   static async draw(dom, graph, opt) {\n      return TGraphPainter._drawGraph(new TGraphPainter(dom, graph), opt);\n   }\n\n} // class TGraphPainter\n\nexport { clTGraphAsymmErrors, TGraphPainter };\n"],"names":["kNotEditable","BIT","clTGraphErrors","clTGraphAsymmErrors","clTGraphBentErrors","clTGraphMultiErrors","TGraphPainter","ObjectPainter","constructor","dom","graph","super","this","axes_draw","bins","xmin","ymin","xmax","ymax","wheel_zoomy","is_bent","_typename","has_errors","match","getGraph","getObject","getHistogram","fHistogram","setHistogram","histo","obj","redraw","promise","Promise","resolve","$redraw_hist","hist_painter","getMainPainter","isSecondary","then","drawGraph","res","_funcHandler","drawNext","cleanup","interactive_bin","get_gme","decodeOptions","opt","first_time","isStr","indexOf","slice","is_gme","has_main","blocks_gme","options","decodeBlock","d","Object","assign","Line","Curve","Rect","Mark","Bar","OutRange","EF","Fill","MainError","Ends","ScaleErrX","check","partAsFloat","Errors","Axis","NoOpt","PadStats","PadPalette","original","second_x","second_y","individual_styles","split","shift","DrawOptions","hopt","PadDrawOptions","forEach","name","part","empty","pos3d","partAsInt","_pfc","_plc","_pmc","blocks","skip_errors_x0","skip_errors_y0","undefined","length","fMarkerStyle","matchObjectType","len","fEX","m","k","Math","max","fEY","_cutg","clTCutG","_cutg_lastsame","fNpoints","fX","fY","pad","getPadPainter","getRootPad","fPrimitives","arr","bl","subres","push","extractGmeErrors","nblock","gr","bin","eylow","fEyL","indx","eyhigh","fEyH","createBins","kind","npoints","Array","p","x","y","exlow","exhigh","fExL","fExH","fEXlow","fEXhigh","fEYlow","fEYhigh","min","getHistRangeMargin","createHistogram","set_x","set_y","margin","dx","dy","uxmin","uxmax","minimum","maximum","_not_adjust_hrange","pad_logx","getPadLog","minimum0","maximum0","fMaximum","kNoZoom","fMinimum","_need_2dhist","clTH2I","clTH1I","fName","fBits","kNoStats","_own_histogram","setHistogramTitle","fTitle","fXaxis","fLabels","fXmin","fXmax","fYaxis","unzoomUserRange","dox","doy","extractAxesProperties","canOptimize","settings","OptimizeDraw","optimizeBins","maxpnt","filter_func","selbins","isFunc","n","step","floor","optbins","needDrawFunc","func","clTPaveStats","TestBit","clTF1","clTF2","getTooltips","lines","funcs","get_main","getGrFuncs","gme","getObjectHint","axisAsText","x_handle","kAxisNormal","ny","fNYErrors","y_handle","pmain","getFramePainter","grx","gry","pp","rect","getPadRect","width","height","pad_layer","create","clTPad","pw","ph","fX1NDC","fX2NDC","fY1NDC","fY2NDC","getFrameWidth","getFrameHeight","value","fLogx","log10","fUxmin","fX1","fX2","fLogv","fLogy","fUymin","fY1","fY2","revertAxis","v","appendExclusion","is_curve","path","drawbins","excl_width","extrabins","dlen","sqrt","dgrx","dgry","path2","buildSvgCurve","cmd","line","draw_g","append","attr","call","fillatt","style","drawBins","w","h","lineatt","main_block","excl_side","path1","qubic","bins2","area","colorindx","getColor","draw_kind","close_symbol","calc","elem","curvebins","nodes","pnt","i","grx1","round","gry1","grx0","grx2","gry0","gry2","grdx0","fEXlowd","grdx2","fEXhighd","grdy0","fEYlowd","grdy2","fEYhighd","selectAll","data","enter","makeTranslate","gStyle","fBarWidth","yy0","usefill","fp","fpcol","getFillColor","createAttFill","color","kBlack","kWhite","pattern","std","bar","dw","abs","filter","error_size","lw","fEndErrorSize","bb","vv","hh","vleft","vright","htop","hbottom","mainLine","fMarkerSize","visible","isBatchMode","Tooltip","error","createAttMarker","marker_size","markeratt","getFullSize","resetPos","want_tooltip","fill","hsz","maxnummarker","getMarkerLength","hints_marker","appendQQ","xqmin","scale_xmin","fXq1","xqmax","scale_xmax","fXq2","yqmin","scale_ymin","fYq1","yqmax","scale_ymax","fYq2","makeLine","x1","y1","x2","y2","yxmin","yxmax","latt1","createAttLine","latt2","drawBins3D","console","log","createGraphDrawAttributes","only_check_auto","o","getAutoColor","icolor","$num_graphs","_auto_exec","fFillColor","fLineColor","fMarkerColor","deleteAttr","can_excl","createG","used","fAttLine","fAttFill","sub_g","addMoveHandler","testEditable","assignContextMenu","extractTooltip","extractTooltipForPath","esz","isbar1","msize","findbin","best_dist2","best","each","d3_select","datum","dist2","nproc","marker","matchx","matchy","exact","title","color1","d3bin","user_info","cont","color2","menu","menu_dist","binindx","showTooltip","hint","ttrect","selectChild","remove","usepath","showTooltipForPath","addHighlightStyle","changed","property","processTooltipEvent","disabled","findBestBin","islines","dist","bestindx","bestbin","bestdist","radius","IsInside","bin0","posy","linex","liney","linedist","closeline","arg","InvertBit","ismark","ttbin","moveEnabled","moveStart","pos_dx","pos_dy","move_funcs","move_binindx","move_bin","move_x0","move_y0","moveDrag","moveEnd","not_changed","last","exec","changeBin","$redraw_pad","redrawPad","submitCanvExec","fillWebObjectOptions","fcust","fillContextMenuItems","snapid","addchk","executeMenuCommand","method","args","canp","getCanvPainter","_readonly","getLastEventPos","userx","usery","toFixed","$execid","_updateMembers","fFillStyle","fLineStyle","fLineWidth","fFunctions","updateObject","new_funcs","FunctionsHandler","canZoomInside","axis","clickButton","funcname","zoom","findFunc","find","findStat","createStat","stats","normal_canvas","create_stats","st","fOptStat","fOptFit","fBorderSize","fStatX","fStatW","fStatY","fStatH","fStatColor","fStatStyle","fTextAngle","fTextSize","fStatFontSize","fTextAlign","fTextColor","fStatTextColor","fTextFont","fStatFont","AddText","Add","fillStatistic","stat","_dostat","dofit","clearPave","fillFunctionStat","drawAxisHisto","TH1Painter","draw","getDom","_drawGraph","painter","DragGraphs","setSecondaryId","addToPadPrimitives"],"sourceRoot":""}