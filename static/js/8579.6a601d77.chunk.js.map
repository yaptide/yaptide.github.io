{"version":3,"file":"static/js/8579.6a601d77.chunk.js","mappings":"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","sources":["../node_modules/jsroot/modules/hist/RPavePainter.mjs"],"sourcesContent":["import { settings, isFunc, isStr, gStyle, nsREX } from '../core.mjs';\nimport { floatToString, makeTranslate } from '../base/BasePainter.mjs';\nimport { RObjectPainter } from '../base/RObjectPainter.mjs';\nimport { ensureRCanvas } from '../gpad/RCanvasPainter.mjs';\nimport { addDragHandler } from '../gpad/TFramePainter.mjs';\nimport { createMenu } from '../gui/menu.mjs';\n\n\nconst ECorner = { kTopLeft: 1, kTopRight: 2, kBottomLeft: 3, kBottomRight: 4 };\n\n/**\n * @summary Painter for RPave class\n *\n * @private\n */\n\nclass RPavePainter extends RObjectPainter {\n\n   /** @summary Draw pave content\n     * @desc assigned depending on pave class */\n   async drawContent() { return this; }\n\n   /** @summary Draw pave */\n   async drawPave() {\n      const rect = this.getPadPainter().getPadRect(),\n            fp = this.getFramePainter();\n\n      this.onFrame = fp && this.v7EvalAttr('onFrame', true);\n      this.corner = this.v7EvalAttr('corner', ECorner.kTopRight);\n\n      const visible = this.v7EvalAttr('visible', true),\n            offsetx = this.v7EvalLength('offsetX', rect.width, 0.02),\n            offsety = this.v7EvalLength('offsetY', rect.height, 0.02),\n            pave_width = this.v7EvalLength('width', rect.width, 0.3),\n            pave_height = this.v7EvalLength('height', rect.height, 0.3);\n\n      this.createG();\n\n      this.draw_g.classed('most_upper_primitives', true); // this primitive will remain on top of list\n\n      if (!visible)\n         return this;\n\n      this.createv7AttLine('border_');\n\n      this.createv7AttFill();\n\n      const fr = this.onFrame ? fp.getFrameRect() : rect;\n      let pave_x = 0, pave_y = 0;\n      switch (this.corner) {\n         case ECorner.kTopLeft:\n            pave_x = fr.x + offsetx;\n            pave_y = fr.y + offsety;\n            break;\n         case ECorner.kBottomLeft:\n            pave_x = fr.x + offsetx;\n            pave_y = fr.y + fr.height - offsety - pave_height;\n            break;\n         case ECorner.kBottomRight:\n            pave_x = fr.x + fr.width - offsetx - pave_width;\n            pave_y = fr.y + fr.height - offsety - pave_height;\n            break;\n         case ECorner.kTopRight:\n         default:\n            pave_x = fr.x + fr.width - offsetx - pave_width;\n            pave_y = fr.y + offsety;\n      }\n\n      makeTranslate(this.draw_g, pave_x, pave_y);\n\n      this.draw_g.append('svg:rect')\n                 .attr('x', 0)\n                 .attr('width', pave_width)\n                 .attr('y', 0)\n                 .attr('height', pave_height)\n                 .call(this.lineatt.func)\n                 .call(this.fillatt.func);\n\n      this.pave_width = pave_width;\n      this.pave_height = pave_height;\n\n      // here should be fill and draw of text\n\n      return this.drawContent().then(() => {\n         if (!this.isBatchMode()) {\n            // TODO: provide pave context menu as in v6\n            if (settings.ContextMenu && this.paveContextMenu)\n               this.draw_g.on('contextmenu', evnt => this.paveContextMenu(evnt));\n\n            addDragHandler(this, { x: pave_x, y: pave_y, width: pave_width, height: pave_height,\n                                   minwidth: 20, minheight: 20, redraw: d => this.sizeChanged(d) });\n         }\n\n         return this;\n      });\n   }\n\n   /** @summary Process interactive moving of the stats box */\n   sizeChanged(drag) {\n      this.pave_width = drag.width;\n      this.pave_height = drag.height;\n\n      const pave_x = drag.x,\n            pave_y = drag.y,\n            rect = this.getPadPainter().getPadRect(),\n            fr = this.onFrame ? this.getFramePainter().getFrameRect() : rect,\n            changes = {};\n      let offsetx = 0, offsety = 0;\n\n      switch (this.corner) {\n         case ECorner.kTopLeft:\n            offsetx = pave_x - fr.x;\n            offsety = pave_y - fr.y;\n            break;\n         case ECorner.kBottomLeft:\n            offsetx = pave_x - fr.x;\n            offsety = fr.y + fr.height - pave_y - this.pave_height;\n            break;\n         case ECorner.kBottomRight:\n            offsetx = fr.x + fr.width - pave_x - this.pave_width;\n            offsety = fr.y + fr.height - pave_y - this.pave_height;\n            break;\n         case ECorner.kTopRight:\n         default:\n            offsetx = fr.x + fr.width - pave_x - this.pave_width;\n            offsety = pave_y - fr.y;\n      }\n\n      this.v7AttrChange(changes, 'offsetX', offsetx / rect.width);\n      this.v7AttrChange(changes, 'offsetY', offsety / rect.height);\n      this.v7AttrChange(changes, 'width', this.pave_width / rect.width);\n      this.v7AttrChange(changes, 'height', this.pave_height / rect.height);\n      this.v7SendAttrChanges(changes, false); // do not invoke canvas update on the server\n\n      this.draw_g.selectChild('rect')\n                 .attr('width', this.pave_width)\n                 .attr('height', this.pave_height);\n\n      this.drawContent();\n   }\n\n   /** @summary Redraw RPave object */\n   async redraw(/* reason */) {\n      return this.drawPave();\n   }\n\n   /** @summary draw RPave object */\n   static async draw(dom, pave, opt) {\n      const painter = new RPavePainter(dom, pave, opt, 'pave');\n      return ensureRCanvas(painter, false).then(() => painter.drawPave());\n   }\n\n}\n\n\n/**\n * @summary Painter for RLegend class\n *\n * @private\n */\n\nclass RLegendPainter extends RPavePainter {\n\n   /** @summary draw RLegend content */\n   async drawContent() {\n      const legend = this.getObject(),\n            textFont = this.v7EvalFont('text', { size: 12, color: 'black', align: 22 }),\n            width = this.pave_width,\n            height = this.pave_height,\n            pp = this.getPadPainter();\n\n      let nlines = legend.fEntries.length;\n      if (legend.fTitle) nlines++;\n\n      if (!nlines || !pp) return this;\n\n      const stepy = height / nlines, margin_x = 0.02 * width;\n      let posy = 0;\n\n      textFont.setSize(height/(nlines * 1.2));\n      this.startTextDrawing(textFont, 'font');\n\n      if (legend.fTitle) {\n         this.drawText({ latex: 1, width: width - 2*margin_x, height: stepy, x: margin_x, y: posy, text: legend.fTitle });\n         posy += stepy;\n      }\n\n      for (let i = 0; i < legend.fEntries.length; ++i) {\n         const entry = legend.fEntries[i], w4 = Math.round(width/4);\n         let objp = null;\n\n         this.drawText({ latex: 1, width: 0.75*width - 3*margin_x, height: stepy, x: 2*margin_x + w4, y: posy, text: entry.fLabel });\n\n         if (entry.fDrawableId !== 'custom')\n            objp = pp.findSnap(entry.fDrawableId, true);\n          else if (entry.fDrawable.fIO) {\n            objp = new RObjectPainter(this.getDom(), entry.fDrawable.fIO);\n            if (entry.fLine) objp.createv7AttLine();\n            if (entry.fFill) objp.createv7AttFill();\n            if (entry.fMarker) objp.createv7AttMarker();\n         }\n\n         if (entry.fFill && objp?.fillatt) {\n            this.draw_g\n                .append('svg:path')\n                .attr('d', `M${Math.round(margin_x)},${Math.round(posy + stepy*0.1)}h${w4}v${Math.round(stepy*0.8)}h${-w4}z`)\n                .call(objp.fillatt.func);\n         }\n\n         if (entry.fLine && objp?.lineatt) {\n            this.draw_g\n                .append('svg:path')\n                .attr('d', `M${Math.round(margin_x)},${Math.round(posy + stepy/2)}h${w4}`)\n                .call(objp.lineatt.func);\n         }\n\n         if (entry.fError && objp?.lineatt) {\n            this.draw_g\n                .append('svg:path')\n                .attr('d', `M${Math.round(margin_x + width/8)},${Math.round(posy + stepy*0.2)}v${Math.round(stepy*0.6)}`)\n                .call(objp.lineatt.func);\n         }\n\n         if (entry.fMarker && objp?.markeratt) {\n            this.draw_g.append('svg:path')\n                .attr('d', objp.markeratt.create(margin_x + width/8, posy + stepy/2))\n                .call(objp.markeratt.func);\n         }\n\n         posy += stepy;\n      }\n\n      return this.finishTextDrawing();\n   }\n\n   /** @summary draw RLegend object */\n   static async draw(dom, legend, opt) {\n      const painter = new RLegendPainter(dom, legend, opt, 'legend');\n      return ensureRCanvas(painter, false).then(() => painter.drawPave());\n   }\n\n} // class RLegendPainter\n\n\n/**\n * @summary Painter for RPaveText class\n *\n * @private\n */\n\nclass RPaveTextPainter extends RPavePainter {\n\n   /** @summary draw RPaveText content */\n   drawContent() {\n      const pavetext = this.getObject(),\n            textFont = this.v7EvalFont('text', { size: 12, color: 'black', align: 22 }),\n            width = this.pave_width,\n            height = this.pave_height,\n            nlines = pavetext.fText.length;\n\n      if (!nlines) return;\n\n      const stepy = height / nlines, margin_x = 0.02 * width;\n      let posy = 0;\n\n      textFont.setSize(height/(nlines * 1.2));\n\n      this.startTextDrawing(textFont, 'font');\n\n      for (let i = 0; i < pavetext.fText.length; ++i) {\n         const line = pavetext.fText[i];\n\n         this.drawText({ latex: 1, width: width - 2*margin_x, height: stepy, x: margin_x, y: posy, text: line });\n         posy += stepy;\n      }\n\n      return this.finishTextDrawing(undefined, true);\n   }\n\n   /** @summary draw RPaveText object */\n   static async draw(dom, pave, opt) {\n      const painter = new RPaveTextPainter(dom, pave, opt, 'pavetext');\n      return ensureRCanvas(painter, false).then(() => painter.drawPave());\n   }\n\n} // class RPaveTextPainter\n\n/**\n * @summary Painter for RHistStats class\n *\n * @private\n */\n\nclass RHistStatsPainter extends RPavePainter {\n\n   /** @summary clear entries from stat box */\n   clearStat() {\n      this.stats_lines = [];\n   }\n\n   /** @summary add text entry to stat box */\n   addText(line) {\n      this.stats_lines.push(line);\n   }\n\n   /** @summary update statistic from the server */\n   updateStatistic(reply) {\n      this.stats_lines = reply.lines;\n      this.drawStatistic(this.stats_lines);\n   }\n\n   /** @summary fill statistic */\n   fillStatistic() {\n      const pp = this.getPadPainter();\n      if (pp?._fast_drawing) return false;\n\n      const obj = this.getObject();\n      if (obj.fLines !== undefined) {\n         this.stats_lines = obj.fLines;\n         delete obj.fLines;\n         return true;\n      }\n\n      if (this.v7OfflineMode()) {\n         const main = this.getMainPainter();\n         if (!isFunc(main?.fillStatistic)) return false;\n         // we take statistic from main painter\n         return main.fillStatistic(this, gStyle.fOptStat, gStyle.fOptFit);\n      }\n\n      // show lines which are exists, maybe server request will be recieved later\n      return (this.stats_lines !== undefined);\n   }\n\n   /** @summary format float value as string\n     * @private */\n   format(value, fmt) {\n      if (!fmt) fmt = 'stat';\n\n      switch (fmt) {\n         case 'stat' : fmt = gStyle.fStatFormat; break;\n         case 'fit': fmt = gStyle.fFitFormat; break;\n         case 'entries': if ((Math.abs(value) < 1e9) && (Math.round(value) === value)) return value.toFixed(0); fmt = '14.7g'; break;\n         case 'last': fmt = this.lastformat; break;\n      }\n\n      const res = floatToString(value, fmt || '6.4g', true);\n\n      this.lastformat = res[1];\n\n      return res[0];\n   }\n\n   /** @summary Draw content */\n   async drawContent() {\n      if (this.fillStatistic())\n         return this.drawStatistic(this.stats_lines);\n\n      return this;\n   }\n\n   /** @summary Change mask */\n   changeMask(nbit) {\n      const obj = this.getObject(), mask = (1<<nbit);\n      if (obj.fShowMask & mask)\n         obj.fShowMask = obj.fShowMask & ~mask;\n      else\n         obj.fShowMask = obj.fShowMask | mask;\n\n      if (this.fillStatistic())\n         this.drawStatistic(this.stats_lines);\n   }\n\n   /** @summary Context menu */\n   statsContextMenu(evnt) {\n      evnt.preventDefault();\n      evnt.stopPropagation(); // disable main context menu\n\n      createMenu(evnt, this).then(menu => {\n         const obj = this.getObject(),\n             action = this.changeMask.bind(this);\n\n         menu.add('header: StatBox');\n\n         for (let n=0; n<obj.fEntries.length; ++n)\n            menu.addchk((obj.fShowMask & (1<<n)), obj.fEntries[n], n, action);\n\n         return this.fillObjectExecMenu(menu);\n     }).then(menu => menu.show());\n   }\n\n   /** @summary Draw statistic */\n   async drawStatistic(lines) {\n      if (!lines) return this;\n      const textFont = this.v7EvalFont('stats_text', { size: 12, color: 'black', align: 22 }),\n            width = this.pave_width,\n            height = this.pave_height,\n            nlines = lines.length;\n      let first_stat = 0, num_cols = 0, maxlen = 0;\n\n      // adjust font size\n      for (let j = 0; j < nlines; ++j) {\n         const line = lines[j];\n         if (j > 0) maxlen = Math.max(maxlen, line.length);\n         if ((j === 0) || (line.indexOf('|') < 0)) continue;\n         if (first_stat === 0) first_stat = j;\n         const parts = line.split('|');\n         if (parts.length > num_cols)\n            num_cols = parts.length;\n      }\n\n      // for characters like 'p' or 'y' several more pixels required to stay in the box when drawn in last line\n      const stepy = height / nlines, margin_x = 0.02 * width;\n      let has_head = false,\n          text_g = this.draw_g.selectChild('.statlines');\n      if (text_g.empty())\n         text_g = this.draw_g.append('svg:g').attr('class', 'statlines');\n      else\n         text_g.selectAll('*').remove();\n\n      textFont.setSize(height/(nlines * 1.2));\n      this.startTextDrawing(textFont, 'font', text_g);\n\n      if (nlines === 1)\n         this.drawText({ width, height, text: lines[0], latex: 1, draw_g: text_g });\n       else {\n         for (let j = 0; j < nlines; ++j) {\n            const posy = j*stepy;\n\n            if (first_stat && (j >= first_stat)) {\n               const parts = lines[j].split('|');\n               for (let n = 0; n < parts.length; ++n) {\n                  this.drawText({ align: 'middle', x: width * n / num_cols, y: posy, latex: 0,\n                                  width: width/num_cols, height: stepy, text: parts[n], draw_g: text_g });\n               }\n            } else if (lines[j].indexOf('=') < 0) {\n               if (j === 0) {\n                  has_head = true;\n                  const max_hlen = Math.max(maxlen, Math.round((width-2*margin_x)/stepy/0.65));\n                  if (lines[j].length > max_hlen + 5)\n                     lines[j] = lines[j].slice(0, max_hlen+2) + '...';\n               }\n               this.drawText({ align: (j === 0) ? 'middle' : 'start', x: margin_x, y: posy,\n                               width: width - 2*margin_x, height: stepy, text: lines[j], draw_g: text_g });\n            } else {\n               const parts = lines[j].split('='), args = [];\n\n               for (let n = 0; n < 2; ++n) {\n                  const arg = {\n                     align: (n === 0) ? 'start' : 'end', x: margin_x, y: posy,\n                     width: width-2*margin_x, height: stepy, text: parts[n], draw_g: text_g,\n                     _expected_width: width-2*margin_x, _args: args,\n                     post_process(painter) {\n                       if (this._args[0].ready && this._args[1].ready)\n                          painter.scaleTextDrawing(1.05*(this._args[0].result_width && this._args[1].result_width)/this.__expected_width, this.draw_g);\n                     }\n                  };\n                  args.push(arg);\n               }\n\n               for (let n = 0; n < 2; ++n)\n                  this.drawText(args[n]);\n            }\n         }\n      }\n\n      let lpath = '';\n\n      if (has_head)\n         lpath += 'M0,' + Math.round(stepy) + 'h' + width;\n\n      if ((first_stat > 0) && (num_cols > 1)) {\n         for (let nrow = first_stat; nrow < nlines; ++nrow)\n            lpath += 'M0,' + Math.round(nrow * stepy) + 'h' + width;\n         for (let ncol = 0; ncol < num_cols - 1; ++ncol)\n            lpath += 'M' + Math.round(width / num_cols * (ncol + 1)) + ',' + Math.round(first_stat * stepy) + 'V' + height;\n      }\n\n      if (lpath) this.draw_g.append('svg:path').attr('d', lpath);\n\n      return this.finishTextDrawing(text_g);\n   }\n\n   /** @summary Redraw stats box */\n   async redraw(reason) {\n      if (reason && isStr(reason) && (reason.indexOf('zoom') === 0) && this.v7NormalMode()) {\n         const req = {\n            _typename: `${nsREX}RHistStatBoxBase::RRequest`,\n            mask: this.getObject().fShowMask // lines to show in stat box\n         };\n\n         this.v7SubmitRequest('stat', req, reply => this.updateStatistic(reply));\n      }\n\n      return this.drawPave();\n   }\n\n   /** @summary draw RHistStats object */\n   static async draw(dom, stats, opt) {\n      const painter = new RHistStatsPainter(dom, stats, opt, stats);\n      return ensureRCanvas(painter, false).then(() => painter.drawPave());\n   }\n\n} // class RHistStatsPainter\n\nexport { RPavePainter, RLegendPainter, RPaveTextPainter, RHistStatsPainter };\n"],"names":["ECorner","RPavePainter","RObjectPainter","drawContent","this","drawPave","rect","getPadPainter","getPadRect","fp","getFramePainter","onFrame","v7EvalAttr","corner","visible","offsetx","v7EvalLength","width","offsety","height","pave_width","pave_height","createG","draw_g","classed","createv7AttLine","createv7AttFill","fr","getFrameRect","pave_x","pave_y","x","y","makeTranslate","append","attr","call","lineatt","func","fillatt","then","isBatchMode","settings","ContextMenu","paveContextMenu","on","evnt","addDragHandler","minwidth","minheight","redraw","d","sizeChanged","drag","changes","v7AttrChange","v7SendAttrChanges","selectChild","draw","dom","pave","opt","painter","ensureRCanvas","RLegendPainter","legend","getObject","textFont","v7EvalFont","size","color","align","pp","nlines","fEntries","length","fTitle","stepy","margin_x","posy","setSize","startTextDrawing","drawText","latex","text","i","entry","w4","Math","round","objp","fLabel","fDrawableId","findSnap","fDrawable","fIO","getDom","fLine","fFill","fMarker","createv7AttMarker","fError","markeratt","create","finishTextDrawing","RPaveTextPainter","pavetext","fText","line","undefined","RHistStatsPainter","clearStat","stats_lines","addText","push","updateStatistic","reply","lines","drawStatistic","fillStatistic","_fast_drawing","obj","fLines","v7OfflineMode","main","getMainPainter","isFunc","gStyle","fOptStat","fOptFit","format","value","fmt","fStatFormat","fFitFormat","abs","toFixed","lastformat","res","floatToString","changeMask","nbit","mask","fShowMask","statsContextMenu","preventDefault","stopPropagation","createMenu","menu","action","bind","add","n","addchk","fillObjectExecMenu","show","first_stat","num_cols","maxlen","j","max","indexOf","parts","split","has_head","text_g","empty","selectAll","remove","max_hlen","slice","args","arg","_expected_width","_args","post_process","ready","scaleTextDrawing","result_width","__expected_width","lpath","nrow","ncol","reason","isStr","v7NormalMode","req","_typename","nsREX","v7SubmitRequest","stats"],"sourceRoot":""}