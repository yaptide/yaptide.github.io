"use strict";(self.webpackChunkthreejs_editor_react=self.webpackChunkthreejs_editor_react||[]).push([[3784],{5033:(t,e,i)=>{i.d(e,{Y:()=>n});var r=i(9490),s=i(273);async function n(){const t=this.$fp||this.getFramePainter();if(delete this.$fp,!(0,r.isObject)(t)||!t.grx||!t.gry||!t.grz)return this;const e=this.getObject(),i=e.fP;let n=1,a=0;for(let r=0;r<i.length;r+=3)i[r]<t.scale_xmin||i[r]>t.scale_xmax||i[r+1]<t.scale_ymin||i[r+1]>t.scale_ymax||i[r+2]<t.scale_zmin||i[r+2]>t.scale_zmax||++a;r.settings.OptimizeDraw>0&&a>5e4&&(n=Math.floor(a/5e4),n<=2&&(n=2));const l=Math.floor(a/n),o=new s._l(l,t.webgl,t.size_x3d/100),c=new Int32Array(l);let x=0,h=0;for(let r=0;r<i.length;r+=3)i[r]<t.scale_xmin||i[r]>t.scale_xmax||i[r+1]<t.scale_ymin||i[r+1]>t.scale_ymax||i[r+2]<t.scale_zmin||i[r+2]>t.scale_zmax||n>1&&(x=(x+1)%n,0!==x)||(c[h++]=r,o.addPoint(t.grx(i[r]),t.gry(i[r+1]),t.grz(i[r+2])));return o.createPoints({color:this.getColor(e.fMarkerColor),style:e.fMarkerStyle}).then((i=>(i.tip_color=3===e.fMarkerColor?16711680:65280,i.tip_name=e.fName||"Poly3D",i.poly=e,i.fp=t,i.scale0=.7*o.scale,i.index=c,t.add3DMesh(i,this,!0),i.tooltip=function(t){let e=Math.floor(t.index/this.nvertex);if(e<0||e>=this.index.length)return null;e=this.index[e];const i=this.fp,r=i.grx(this.poly.fP[e]),s=i.gry(this.poly.fP[e+1]),n=i.grz(this.poly.fP[e+2]);return{x1:r-this.scale0,x2:r+this.scale0,y1:s-this.scale0,y2:s+this.scale0,z1:n-this.scale0,z2:n+this.scale0,color:this.tip_color,lines:[this.tip_name,"pnt: "+e/3,"x: "+i.axisAsText("x",this.poly.fP[e]),"y: "+i.axisAsText("y",this.poly.fP[e+1]),"z: "+i.axisAsText("z",this.poly.fP[e+2])]}},t.render3D(100),this)))}},3784:(t,e,i)=>{i.r(e),i.d(e,{drawPolyLine3D:()=>x,drawPolyMarker3D:()=>c});var r=i(9490),s=i(273),n=i(9162),a=i(5033);function l(t){const e=t.getFramePainter();if(!e?.mode3d||!t.getObject())return null;if(e?.toplevel)return e;const i=t.getMainPainter();if(i&&!(0,r.isFunc)(i.drawExtras))return null;return(i?Promise.resolve(i):(0,n.drawDummy3DGeom)(t)).then((e=>{const i=t.getPadPainter();return i&&(i._disable_dragging=!0),e._dummy&&(0,r.isFunc)(t.get3DBox)&&e.extendCustomBoundingBox(t.get3DBox()),e.drawExtras(t.getObject(),"",!0,!0)}))}function o(){const t=this.getObject();if(!t?.fP.length)return null;const e={min:{x:0,y:0,z:0},max:{x:0,y:0,z:0}};for(let i=0;i<t.fP.length;i+=3){const r=t.fP[i],s=t.fP[i+1],n=t.fP[i+2];0===i?(e.min.x=e.max.x=r,e.min.y=e.max.y=s,e.min.z=e.max.z=n):(e.min.x=Math.min(r,e.min.x),e.max.x=Math.max(r,e.max.x),e.min.y=Math.min(s,e.min.y),e.max.y=Math.max(s,e.max.y),e.min.z=Math.min(n,e.min.z),e.max.z=Math.max(n,e.max.z))}return e}async function c(){this.get3DBox=o;const t=l(this);return(0,r.isObject)(t)&&t.grx&&t.gry&&t.grz?(this.$fp=t,a.Y.bind(this)()):t}async function x(){this.get3DBox=o;const t=this.getObject(),e=l(this);if(!(0,r.isObject)(e)||!e.grx||!e.gry||!e.grz)return e;const i=3*t.fN,n=t.fP,a=[];for(let r=3;r<i;r+=3)a.push(e.grx(n[r-3]),e.gry(n[r-2]),e.grz(n[r-1]),e.grx(n[r]),e.gry(n[r+1]),e.grz(n[r+2]));const c=(0,s.Fc)(a,(0,s.DH)(this,t));return e.add3DMesh(c,this,!0),e.render3D(100),!0}}}]);
//# sourceMappingURL=3784.4e18bc49.chunk.js.map