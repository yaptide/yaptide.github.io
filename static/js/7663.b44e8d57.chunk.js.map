{"version":3,"file":"static/js/7663.b44e8d57.chunk.js","mappings":"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","sources":["../node_modules/jsroot/modules/hist2d/RHistPainter.mjs"],"sourcesContent":["import { gStyle, settings, isObject, isFunc, isStr, nsREX, getPromise } from '../core.mjs';\nimport { kAxisLabels, kAxisTime } from '../base/ObjectPainter.mjs';\nimport { RObjectPainter } from '../base/RObjectPainter.mjs';\n\n\n/** @summary assign methods for the RAxis objects\n  * @private */\nfunction assignRAxisMethods(axis) {\n   if ((axis._typename === `${nsREX}RAxisEquidistant`) || (axis._typename === `${nsREX}RAxisLabels`)) {\n      if (axis.fInvBinWidth === 0) {\n         axis.$dummy = true;\n         axis.fInvBinWidth = 1;\n         axis.fNBinsNoOver = 0;\n         axis.fLow = 0;\n      }\n\n      axis.min = axis.fLow;\n      axis.max = axis.fLow + axis.fNBinsNoOver/axis.fInvBinWidth;\n      axis.GetNumBins = function() { return this.fNBinsNoOver; };\n      axis.GetBinCoord = function(bin) { return this.fLow + bin/this.fInvBinWidth; };\n      axis.FindBin = function(x, add) { return Math.floor((x - this.fLow)*this.fInvBinWidth + add); };\n   } else if (axis._typename === `${nsREX}RAxisIrregular`) {\n      axis.min = axis.fBinBorders[0];\n      axis.max = axis.fBinBorders[axis.fBinBorders.length - 1];\n      axis.GetNumBins = function() { return this.fBinBorders.length; };\n      axis.GetBinCoord = function(bin) {\n         const indx = Math.round(bin);\n         if (indx <= 0) return this.fBinBorders[0];\n         if (indx >= this.fBinBorders.length) return this.fBinBorders[this.fBinBorders.length - 1];\n         if (indx === bin) return this.fBinBorders[indx];\n         const indx2 = (bin < indx) ? indx - 1 : indx + 1;\n         return this.fBinBorders[indx] * Math.abs(bin-indx2) + this.fBinBorders[indx2] * Math.abs(bin-indx);\n      };\n      axis.FindBin = function(x, add) {\n         for (let k = 1; k < this.fBinBorders.length; ++k)\n            if (x < this.fBinBorders[k]) return Math.floor(k-1+add);\n         return this.fBinBorders.length - 1;\n      };\n   }\n\n   // to support some code from ROOT6 drawing\n\n   axis.GetBinCenter = function(bin) { return this.GetBinCoord(bin-0.5); };\n   axis.GetBinLowEdge = function(bin) { return this.GetBinCoord(bin-1); };\n}\n\n/** @summary Returns real histogram impl\n  * @private */\nfunction getHImpl(obj) {\n   return obj?.fHistImpl?.fIO || null;\n}\n\n\n/** @summary Base painter class for RHist objects\n *\n * @private\n */\n\nclass RHistPainter extends RObjectPainter {\n\n   /** @summary Constructor\n     * @param {object|string} dom - DOM element for drawing or element id\n     * @param {object} histo - RHist object */\n   constructor(dom, histo) {\n      super(dom, histo);\n      this.csstype = 'hist';\n      this.draw_content = true;\n      this.nbinsx = 0;\n      this.nbinsy = 0;\n      this.accept_drops = true; // indicate that one can drop other objects like doing Draw('same')\n      this.mode3d = false;\n\n      // initialize histogram methods\n      this.getHisto(true);\n   }\n\n   /** @summary Returns true if RHistDisplayItem is used */\n   isDisplayItem() {\n      return this.getObject()?.fAxes;\n   }\n\n   /** @summary get histogram */\n   getHisto(force) {\n      const obj = this.getObject();\n      let histo = getHImpl(obj);\n\n      if (histo && (!histo.getBinContent || force)) {\n         if (histo.fAxes._2) {\n            assignRAxisMethods(histo.fAxes._0);\n            assignRAxisMethods(histo.fAxes._1);\n            assignRAxisMethods(histo.fAxes._2);\n            histo.getBin = function(x, y, z) { return (x-1) + this.fAxes._0.GetNumBins()*(y-1) + this.fAxes._0.GetNumBins()*this.fAxes._1.GetNumBins()*(z-1); };\n            // all normal ROOT methods uses indx+1 logic, but RHist has no underflow/overflow bins now\n            histo.getBinContent = function(x, y, z) { return this.fStatistics.fBinContent[this.getBin(x, y, z)]; };\n            histo.getBinError = function(x, y, z) {\n               const bin = this.getBin(x, y, z);\n               if (this.fStatistics.fSumWeightsSquared)\n                  return Math.sqrt(this.fStatistics.fSumWeightsSquared[bin]);\n               return Math.sqrt(Math.abs(this.fStatistics.fBinContent[bin]));\n            };\n         } else if (histo.fAxes._1) {\n            assignRAxisMethods(histo.fAxes._0);\n            assignRAxisMethods(histo.fAxes._1);\n            histo.getBin = function(x, y) { return (x-1) + this.fAxes._0.GetNumBins()*(y-1); };\n            // all normal ROOT methods uses indx+1 logic, but RHist has no underflow/overflow bins now\n            histo.getBinContent = function(x, y) { return this.fStatistics.fBinContent[this.getBin(x, y)]; };\n            histo.getBinError = function(x, y) {\n               const bin = this.getBin(x, y);\n               if (this.fStatistics.fSumWeightsSquared)\n                  return Math.sqrt(this.fStatistics.fSumWeightsSquared[bin]);\n               return Math.sqrt(Math.abs(this.fStatistics.fBinContent[bin]));\n            };\n         } else {\n            assignRAxisMethods(histo.fAxes._0);\n            histo.getBin = function(x) { return x-1; };\n            // all normal ROOT methods uses indx+1 logic, but RHist has no underflow/overflow bins now\n            histo.getBinContent = function(x) { return this.fStatistics.fBinContent[x-1]; };\n            histo.getBinError = function(x) {\n               if (this.fStatistics.fSumWeightsSquared)\n                  return Math.sqrt(this.fStatistics.fSumWeightsSquared[x-1]);\n               return Math.sqrt(Math.abs(this.fStatistics.fBinContent[x-1]));\n            };\n         }\n      } else if (!histo && obj?.fAxes) {\n         // case of RHistDisplayItem\n\n         histo = obj;\n\n         if (!histo.getBinContent || force) {\n            if (histo.fAxes.length === 3) {\n               assignRAxisMethods(histo.fAxes[0]);\n               assignRAxisMethods(histo.fAxes[1]);\n               assignRAxisMethods(histo.fAxes[2]);\n\n               histo.nx = histo.fIndicies[1] - histo.fIndicies[0];\n               histo.dx = histo.fIndicies[0] + 1;\n               histo.stepx = histo.fIndicies[2];\n\n               histo.ny = histo.fIndicies[4] - histo.fIndicies[3];\n               histo.dy = histo.fIndicies[3] + 1;\n               histo.stepy = histo.fIndicies[5];\n\n               histo.nz = histo.fIndicies[7] - histo.fIndicies[6];\n               histo.dz = histo.fIndicies[6] + 1;\n               histo.stepz = histo.fIndicies[8];\n\n               // this is index in original histogram\n               histo.getBin = function(x, y, z) { return (x-1) + this.fAxes[0].GetNumBins()*(y-1) + this.fAxes[0].GetNumBins()*this.fAxes[1].GetNumBins()*(z-1); };\n\n               // this is index in current available data\n               if ((histo.stepx > 1) || (histo.stepy > 1) || (histo.stepz > 1))\n                  histo.getBin0 = function(x, y, z) { return Math.floor((x-this.dx)/this.stepx) + this.nx/this.stepx*Math.floor((y-this.dy)/this.stepy) + this.nx/this.stepx*this.ny/this.stepy*Math.floor((z-this.dz)/this.stepz); };\n               else\n                  histo.getBin0 = function(x, y, z) { return (x-this.dx) + this.nx*(y-this.dy) + this.nx*this.ny*(z-this.dz); };\n\n               histo.getBinContent = function(x, y, z) { return this.fBinContent[this.getBin0(x, y, z)]; };\n               histo.getBinError = function(x, y, z) { return Math.sqrt(Math.abs(this.getBinContent(x, y, z))); };\n            } else if (histo.fAxes.length === 2) {\n               assignRAxisMethods(histo.fAxes[0]);\n               assignRAxisMethods(histo.fAxes[1]);\n\n               histo.nx = histo.fIndicies[1] - histo.fIndicies[0];\n               histo.dx = histo.fIndicies[0] + 1;\n               histo.stepx = histo.fIndicies[2];\n\n               histo.ny = histo.fIndicies[4] - histo.fIndicies[3];\n               histo.dy = histo.fIndicies[3] + 1;\n               histo.stepy = histo.fIndicies[5];\n\n               // this is index in original histogram\n               histo.getBin = function(x, y) { return (x-1) + this.fAxes[0].GetNumBins()*(y-1); };\n\n               // this is index in current available data\n               if ((histo.stepx > 1) || (histo.stepy > 1))\n                  histo.getBin0 = function(x, y) { return Math.floor((x-this.dx)/this.stepx) + this.nx/this.stepx*Math.floor((y-this.dy)/this.stepy); };\n               else\n                  histo.getBin0 = function(x, y) { return (x-this.dx) + this.nx*(y-this.dy); };\n\n               histo.getBinContent = function(x, y) { return this.fBinContent[this.getBin0(x, y)]; };\n               histo.getBinError = function(x, y) { return Math.sqrt(Math.abs(this.getBinContent(x, y))); };\n            } else {\n               assignRAxisMethods(histo.fAxes[0]);\n               histo.nx = histo.fIndicies[1] - histo.fIndicies[0];\n               histo.dx = histo.fIndicies[0] + 1;\n               histo.stepx = histo.fIndicies[2];\n\n               histo.getBin = function(x) { return x-1; };\n               if (histo.stepx > 1)\n                  histo.getBin0 = function(x) { return Math.floor((x-this.dx)/this.stepx); };\n               else\n                  histo.getBin0 = function(x) { return x-this.dx; };\n               histo.getBinContent = function(x) { return this.fBinContent[this.getBin0(x)]; };\n               histo.getBinError = function(x) { return Math.sqrt(Math.abs(this.getBinContent(x))); };\n            }\n         }\n      }\n      return histo;\n   }\n\n   /** @summary Decode options */\n   decodeOptions(/* opt */) {\n      if (!this.options) this.options = { Hist: 1, System: 1 };\n   }\n\n   /** @summary Copy draw options from other painter */\n   copyOptionsFrom(src) {\n      if (src === this) return;\n      const o = this.options, o0 = src.options;\n      o.Mode3D = o0.Mode3D;\n   }\n\n   /** @summary copy draw options to all other histograms in the pad */\n   copyOptionsToOthers() {\n      this.forEachPainter(painter => {\n         if ((painter !== this) && isFunc(painter.copyOptionsFrom))\n            painter.copyOptionsFrom(this);\n      }, 'objects');\n   }\n\n   /** @summary Clear 3d drawings - if any */\n   clear3DScene() {\n      const fp = this.getFramePainter();\n      if (isFunc(fp?.create3DScene))\n         fp.create3DScene(-1);\n      this.mode3d = false;\n   }\n\n   /** @summary Cleanup hist painter */\n   cleanup() {\n      this.clear3DScene();\n\n      delete this.options;\n\n      super.cleanup();\n   }\n\n   /** @summary Returns histogram dimension */\n   getDimension() { return 1; }\n\n   /** @summary Scan histogram content\n     * @abstract */\n   scanContent(/* when_axis_changed */) {\n      // function will be called once new histogram or\n      // new histogram content is assigned\n      // one should find min,max,nbins, maxcontent values\n      // if when_axis_changed === true specified, content will be scanned after axis zoom changed\n   }\n\n   /** @summary Draw axes */\n   async drawFrameAxes() {\n      // return true when axes was drawn\n      const main = this.getFramePainter();\n      if (!main)\n         return false;\n\n      if (!this.draw_content)\n         return true;\n\n      if (!this.isMainPainter()) {\n         if (!this.options.second_x && !this.options.second_y)\n            return true;\n\n         main.setAxes2Ranges(this.options.second_x, this.getAxis('x'), this.xmin, this.xmax, this.options.second_y, this.getAxis('y'), this.ymin, this.ymax);\n         return main.drawAxes2(this.options.second_x, this.options.second_y);\n      }\n\n      main.cleanupAxes();\n      main.xmin = main.xmax = 0;\n      main.ymin = main.ymax = 0;\n      main.zmin = main.zmax = 0;\n      main.setAxesRanges(this.getAxis('x'), this.xmin, this.xmax, this.getAxis('y'), this.ymin, this.ymax, this.getAxis('z'), this.zmin, this.zmax);\n      return main.drawAxes();\n   }\n\n   /** @summary create attributes */\n   createHistDrawAttributes() {\n      this.createv7AttFill();\n      this.createv7AttLine();\n   }\n\n   /** @summary update display item */\n   updateDisplayItem(obj, src) {\n      if (!obj || !src) return false;\n\n      obj.fAxes = src.fAxes;\n      obj.fIndicies = src.fIndicies;\n      obj.fBinContent = src.fBinContent;\n      obj.fContMin = src.fContMin;\n      obj.fContMinPos = src.fContMinPos;\n      obj.fContMax = src.fContMax;\n\n      // update histogram attributes\n      this.getHisto(true);\n\n      return true;\n   }\n\n   /** @summary update histogram object */\n   updateObject(obj /* , opt */) {\n      const origin = this.getObject();\n\n      if (obj !== origin) {\n         if (!this.matchObjectType(obj)) return false;\n\n         if (this.isDisplayItem())\n\n            this.updateDisplayItem(origin, obj);\n\n          else {\n            const horigin = getHImpl(origin),\n                hobj = getHImpl(obj);\n\n            if (!horigin || !hobj) return false;\n\n            // make it easy - copy statistics without axes\n            horigin.fStatistics = hobj.fStatistics;\n\n            origin.fTitle = obj.fTitle;\n         }\n      }\n\n      this.scanContent();\n\n      this.histogram_updated = true; // indicate that object updated\n\n      return true;\n   }\n\n   /** @summary Get axis object */\n   getAxis(name) {\n      const histo = this.getHisto(), obj = this.getObject();\n      let axis;\n\n      if (obj?.fAxes) {\n         switch (name) {\n            case 'x': axis = obj.fAxes[0]; break;\n            case 'y': axis = obj.fAxes[1]; break;\n            case 'z': axis = obj.fAxes[2]; break;\n            default: axis = obj.fAxes[0]; break;\n         }\n      } else if (histo?.fAxes) {\n         switch (name) {\n            case 'x': axis = histo.fAxes._0; break;\n            case 'y': axis = histo.fAxes._1; break;\n            case 'z': axis = histo.fAxes._2; break;\n            default: axis = histo.fAxes._0; break;\n         }\n      }\n\n      if (axis && !axis.GetBinCoord)\n         assignRAxisMethods(axis);\n\n      return axis;\n   }\n\n   /** @summary Get tip text for axis bin */\n   getAxisBinTip(name, bin, step) {\n      const pmain = this.getFramePainter(),\n          handle = pmain[`${name}_handle`],\n          axis = this.getAxis(name),\n          x1 = axis.GetBinCoord(bin);\n\n      if (handle.kind === kAxisLabels)\n         return pmain.axisAsText(name, x1);\n\n      const x2 = axis.GetBinCoord(bin+(step || 1));\n\n      if (handle.kind === kAxisTime)\n         return pmain.axisAsText(name, (x1+x2)/2);\n\n      return `[${pmain.axisAsText(name, x1)}, ${pmain.axisAsText(name, x2)})`;\n   }\n\n   /** @summary Extract axes ranges and bins numbers\n     * @desc Also here ensured that all axes objects got their necessary methods */\n   extractAxesProperties(ndim) {\n      const histo = this.getHisto();\n      if (!histo) return;\n\n      this.nbinsx = this.nbinsy = this.nbinsz = 0;\n\n      let axis = this.getAxis('x');\n      this.nbinsx = axis.GetNumBins();\n      this.xmin = axis.min;\n      this.xmax = axis.max;\n\n      if (ndim < 2) return;\n      axis = this.getAxis('y');\n      this.nbinsy = axis.GetNumBins();\n      this.ymin = axis.min;\n      this.ymax = axis.max;\n\n      if (ndim < 3) return;\n      axis = this.getAxis('z');\n      this.nbinsz = axis.GetNumBins();\n      this.zmin = axis.min;\n      this.zmax = axis.max;\n   }\n\n   /** @summary Add interactive features, only main painter does it */\n   addInteractivity() {\n      // only first painter in list allowed to add interactive functionality to the frame\n\n      const ismain = this.isMainPainter(),\n            second_axis = this.options.second_x || this.options.second_y,\n            fp = ismain || second_axis ? this.getFramePainter() : null;\n      return fp?.addInteractivity(!ismain && second_axis) ?? true;\n   }\n\n   /** @summary Process item reply */\n   processItemReply(reply, req) {\n      if (!this.isDisplayItem())\n         return console.error('Get item when display normal histogram');\n\n      if (req.reqid === this.current_item_reqid) {\n         if (reply !== null)\n            this.updateDisplayItem(this.getObject(), reply.item);\n\n         req.resolveFunc(true);\n      }\n   }\n\n   /** @summary Special method to request bins from server if existing data insufficient\n     * @return {Promise} when ready */\n   async drawingBins(reason) {\n      let is_axes_zoomed = false;\n      if (reason && isStr(reason) && (reason.indexOf('zoom') === 0)) {\n         if (reason.indexOf('0') > 0) is_axes_zoomed = true;\n         if ((this.getDimension() > 1) && (reason.indexOf('1') > 0)) is_axes_zoomed = true;\n         if ((this.getDimension() > 2) && (reason.indexOf('2') > 0)) is_axes_zoomed = true;\n      }\n\n      if (this.isDisplayItem() && is_axes_zoomed && this.v7NormalMode()) {\n         const handle = this.prepareDraw({ only_indexes: true });\n\n         // submit request if histogram data not enough for display\n         if (handle.incomplete) {\n            return new Promise(resolveFunc => {\n               // use empty kind to always submit request\n               const req = this.v7SubmitRequest('', { _typename: `${nsREX}RHistDrawableBase::RRequest` },\n                                                  this.processItemReply.bind(this));\n               if (req) {\n                  this.current_item_reqid = req.reqid; // ignore all previous requests, only this one will be processed\n                  req.resolveFunc = resolveFunc;\n                  setTimeout(this.processItemReply.bind(this, null, req), 1000); // after 1 s draw something that we can\n               } else\n                  resolveFunc(true);\n            });\n         }\n      }\n\n      return true;\n   }\n\n   /** @summary Toggle statbox drawing\n     * @desc Not yet implemented */\n   toggleStat(/* arg */) {}\n\n   /** @summary get selected index for axis */\n   getSelectIndex(axis, size, add) {\n      // be aware - here indexes starts from 0\n      const taxis = this.getAxis(axis),\n            nbins = this['nbins'+axis] || 0;\n      let indx = 0;\n\n      if (this.options.second_x && axis === 'x') axis = 'x2';\n      if (this.options.second_y && axis === 'y') axis = 'y2';\n\n      const main = this.getFramePainter(),\n            min = main ? main[`zoom_${axis}min`] : 0,\n            max = main ? main[`zoom_${axis}max`] : 0;\n\n      if ((min !== max) && taxis) {\n         if (size === 'left')\n            indx = taxis.FindBin(min, add || 0);\n         else\n            indx = taxis.FindBin(max, (add || 0) + 0.5);\n         if (indx < 0)\n            indx = 0;\n         else if (indx > nbins)\n            indx = nbins;\n      } else\n         indx = (size === 'left') ? 0 : nbins;\n\n\n      return indx;\n   }\n\n   /** @summary Auto zoom into histogram non-empty range\n     * @abstract */\n   autoZoom() {}\n\n   /** @summary Process click on histogram-defined buttons */\n   clickButton(funcname) {\n      const fp = this.getFramePainter();\n      if (!fp) return false;\n\n      switch (funcname) {\n         case 'ToggleZoom':\n            if ((this.zoom_xmin !== this.zoom_xmax) || (this.zoom_ymin !== this.zoom_ymax) || (this.zoom_zmin !== this.zoom_zmax)) {\n               const res = this.unzoom();\n               fp.zoomChangedInteractive('reset');\n               return res;\n            }\n            if (this.draw_content)\n               return this.autoZoom();\n            break;\n         case 'ToggleLogX': return fp.toggleAxisLog('x');\n         case 'ToggleLogY': return fp.toggleAxisLog('y');\n         case 'ToggleLogZ': return fp.toggleAxisLog('z');\n         case 'ToggleStatBox': return getPromise(this.toggleStat());\n      }\n      return false;\n   }\n\n   /** @summary Fill pad toolbar with hist-related functions */\n   fillToolbar(not_shown) {\n      const pp = this.getPadPainter();\n      if (!pp) return;\n\n      pp.addPadButton('auto_zoom', 'Toggle between unzoom and autozoom-in', 'ToggleZoom', 'Ctrl *');\n      pp.addPadButton('arrow_right', 'Toggle log x', 'ToggleLogX', 'PageDown');\n      pp.addPadButton('arrow_up', 'Toggle log y', 'ToggleLogY', 'PageUp');\n      if (this.getDimension() > 1)\n         pp.addPadButton('arrow_diag', 'Toggle log z', 'ToggleLogZ');\n      if (this.draw_content)\n         pp.addPadButton('statbox', 'Toggle stat box', 'ToggleStatBox');\n      if (!not_shown) pp.showPadButtons();\n   }\n\n   /** @summary get tool tips used in 3d mode */\n   get3DToolTip(indx) {\n      const histo = this.getHisto(),\n          tip = { bin: indx, name: histo.fName || 'histo', title: histo.fTitle };\n      switch (this.getDimension()) {\n         case 1:\n            tip.ix = indx + 1; tip.iy = 1;\n            tip.value = histo.getBinContent(tip.ix);\n            tip.error = histo.getBinError(tip.ix);\n            tip.lines = this.getBinTooltips(indx-1);\n            break;\n         case 2:\n            tip.ix = (indx % this.nbinsx) + 1;\n            tip.iy = (indx - (tip.ix - 1)) / this.nbinsx + 1;\n            tip.value = histo.getBinContent(tip.ix, tip.iy);\n            tip.error = histo.getBinError(tip.ix, tip.iy);\n            tip.lines = this.getBinTooltips(tip.ix-1, tip.iy-1);\n            break;\n         case 3:\n            tip.ix = indx % this.nbinsx + 1;\n            tip.iy = ((indx - (tip.ix - 1)) / this.nbinsx) % this.nbinsy + 1;\n            tip.iz = (indx - (tip.ix - 1) - (tip.iy - 1) * this.nbinsx) / this.nbinsx / this.nbinsy + 1;\n            tip.value = histo.getBinContent(tip.ix, tip.iy, tip.iz);\n            tip.error = histo.getBinError(tip.ix, tip.iy, tip.iz);\n            tip.lines = this.getBinTooltips(tip.ix-1, tip.iy-1, tip.iz-1);\n            break;\n      }\n\n      return tip;\n   }\n\n   /** @summary Create contour levels for currently selected Z range */\n   createContour(main, palette, args) {\n      if (!main || !palette) return;\n\n      if (!args) args = {};\n\n      let nlevels = gStyle.fNumberContours,\n          zmin = this.minbin, zmax = this.maxbin, zminpos = this.minposbin;\n\n      if (args.scatter_plot) {\n         if (nlevels > 50) nlevels = 50;\n         zmin = this.minposbin;\n      }\n\n      if (zmin === zmax) { zmin = this.gminbin; zmax = this.gmaxbin; zminpos = this.gminposbin; }\n\n      if (this.getDimension() < 3) {\n         if (main.zoom_zmin !== main.zoom_zmax) {\n            zmin = main.zoom_zmin;\n            zmax = main.zoom_zmax;\n         } else if (args.full_z_range) {\n            zmin = main.zmin;\n            zmax = main.zmax;\n         }\n      }\n\n      palette.setFullRange(main.zmin, main.zmax);\n      palette.createContour(main.logz, nlevels, zmin, zmax, zminpos);\n\n      if (this.getDimension() < 3) {\n         main.scale_zmin = palette.colzmin;\n         main.scale_zmax = palette.colzmax;\n      }\n   }\n\n   /** @summary Start dialog to modify range of axis where histogram values are displayed */\n   changeValuesRange(menu, arg) {\n      const pmain = this.getFramePainter();\n      if (!pmain) return;\n      const prefix = pmain.isAxisZoomed(arg) ? 'zoom_' + arg : arg,\n          curr = '[' + pmain[`${prefix}min`] + ',' + pmain[`${prefix}max`] + ']';\n      menu.input('Enter values range for axis ' + arg + ' like [0,100] or empty string to unzoom', curr).then(res => {\n         res = res ? JSON.parse(res) : [];\n         if (!isObject(res) || (res.length !== 2) || !Number.isFinite(res[0]) || !Number.isFinite(res[1]))\n            pmain.unzoom(arg);\n         else\n            pmain.zoom(arg, res[0], res[1]);\n      });\n   }\n\n   /** @summary Fill histogram context menu */\n   fillContextMenuItems(menu) {\n      if (this.draw_content) {\n         menu.addchk(this.toggleStat('only-check'), 'Show statbox', () => this.toggleStat());\n\n         if (this.getDimension() === 2)\n             menu.add('Values range', () => this.changeValuesRange(menu, 'z'));\n\n         if (isFunc(this.fillHistContextMenu))\n            this.fillHistContextMenu(menu);\n      }\n\n      const fp = this.getFramePainter();\n\n      if (this.options.Mode3D) {\n         // menu for 3D drawings\n\n         if (menu.size() > 0)\n            menu.add('separator');\n\n         const main = this.getMainPainter() || this;\n\n         menu.addchk(main.isTooltipAllowed(), 'Show tooltips', () => main.setTooltipAllowed('toggle'));\n\n         menu.addchk(fp?.enable_highlight, 'Highlight bins', () => {\n            fp.enable_highlight = !fp.enable_highlight;\n            if (!fp.enable_highlight && main.mode3d && isFunc(main.highlightBin3D))\n               main.highlightBin3D(null);\n         });\n\n         if (isFunc(fp?.render3D)) {\n            menu.addchk(main.options.FrontBox, 'Front box', () => {\n               main.options.FrontBox = !main.options.FrontBox;\n               fp.render3D();\n            });\n            menu.addchk(main.options.BackBox, 'Back box', () => {\n               main.options.BackBox = !main.options.BackBox;\n               fp.render3D();\n            });\n         }\n\n         if (this.draw_content) {\n            menu.addchk(!this.options.Zero, 'Suppress zeros', () => {\n               this.options.Zero = !this.options.Zero;\n               this.redrawPad();\n            });\n\n            if ((this.options.Lego === 12) || (this.options.Lego === 14))\n               this.fillPaletteMenu(menu);\n         }\n\n         if (isFunc(main.control?.reset))\n            menu.add('Reset camera', () => main.control.reset());\n      }\n\n      if (this.histogram_updated && fp.zoomChangedInteractive())\n         menu.add('Let update zoom', () => fp.zoomChangedInteractive('reset'));\n   }\n\n   /** @summary Update palette drawing */\n   updatePaletteDraw() {\n      if (this.isMainPainter())\n         this.getPadPainter().findPainterFor(undefined, undefined, `${nsREX}RPaletteDrawable`)?.drawPalette();\n   }\n\n   /** @summary Fill menu entries for palette */\n   fillPaletteMenu(menu) {\n      menu.addPaletteMenu(this.options.Palette || settings.Palette, arg => {\n         // TODO: rewrite for RPalette functionality\n         this.options.Palette = parseInt(arg);\n         this.redraw(); // redraw histogram\n      });\n   }\n\n   /** @summary Toggle 3D drawing mode */\n   toggleMode3D() {\n      this.options.Mode3D = !this.options.Mode3D;\n\n      if (this.options.Mode3D) {\n         if (!this.options.Surf && !this.options.Lego && !this.options.Error) {\n            if ((this.nbinsx >= 50) || (this.nbinsy >= 50))\n               this.options.Lego = this.options.Color ? 14 : 13;\n            else\n               this.options.Lego = this.options.Color ? 12 : 1;\n\n            this.options.Zero = false; // do not show zeros by default\n         }\n      }\n\n      this.copyOptionsToOthers();\n      return this.interactiveRedraw('pad', 'drawopt');\n   }\n\n   /** @summary Calculate histogram inidicies and axes values for each visible bin */\n   prepareDraw(args) {\n      if (!args) args = { rounding: true, extra: 0, middle: 0 };\n\n      if (args.extra === undefined) args.extra = 0;\n      if (args.right_extra === undefined) args.right_extra = args.extra;\n      if (args.middle === undefined) args.middle = 0;\n\n      const histo = this.getHisto(), xaxis = this.getAxis('x'), yaxis = this.getAxis('y'),\n            pmain = this.getFramePainter(),\n            hdim = this.getDimension(),\n            res = {\n               i1: this.getSelectIndex('x', 'left', 0 - args.extra),\n               i2: this.getSelectIndex('x', 'right', 1 + args.right_extra),\n               j1: (hdim < 2) ? 0 : this.getSelectIndex('y', 'left', 0 - args.extra),\n               j2: (hdim < 2) ? 1 : this.getSelectIndex('y', 'right', 1 + args.right_extra),\n               k1: (hdim < 3) ? 0 : this.getSelectIndex('z', 'left', 0 - args.extra),\n               k2: (hdim < 3) ? 1 : this.getSelectIndex('z', 'right', 1 + args.right_extra),\n               stepi: 1, stepj: 1, stepk: 1,\n               min: 0, max: 0, sumz: 0, xbar1: 0, xbar2: 1, ybar1: 0, ybar2: 1\n            };\n      let i, j, x, y, binz, binarea;\n\n      if (this.isDisplayItem() && histo.fIndicies) {\n         if (res.i1 < histo.fIndicies[0]) { res.i1 = histo.fIndicies[0]; res.incomplete = true; }\n         if (res.i2 > histo.fIndicies[1]) { res.i2 = histo.fIndicies[1]; res.incomplete = true; }\n         res.stepi = histo.fIndicies[2];\n         if (res.stepi > 1) res.incomplete = true;\n         if ((hdim > 1) && (histo.fIndicies.length > 5)) {\n            if (res.j1 < histo.fIndicies[3]) { res.j1 = histo.fIndicies[3]; res.incomplete = true; }\n            if (res.j2 > histo.fIndicies[4]) { res.j2 = histo.fIndicies[4]; res.incomplete = true; }\n            res.stepj = histo.fIndicies[5];\n            if (res.stepj > 1) res.incomplete = true;\n         }\n         if ((hdim > 2) && (histo.fIndicies.length > 8)) {\n            if (res.k1 < histo.fIndicies[6]) { res.k1 = histo.fIndicies[6]; res.incomplete = true; }\n            if (res.k2 > histo.fIndicies[7]) { res.k2 = histo.fIndicies[7]; res.incomplete = true; }\n            res.stepk = histo.fIndicies[8];\n            if (res.stepk > 1) res.incomplete = true;\n         }\n      }\n\n      if (args.only_indexes) return res;\n\n      // no need for Float32Array, plain Array is 10% faster\n      // reserve more places to avoid complex boundary checks\n\n      res.grx = new Array(res.i2+res.stepi+1);\n      res.gry = new Array(res.j2+res.stepj+1);\n\n      if (args.original) {\n         res.original = true;\n         res.origx = new Array(res.i2+1);\n         res.origy = new Array(res.j2+1);\n      }\n\n      if (args.pixel_density) args.rounding = true;\n\n      const funcs = pmain.getGrFuncs(this.options.second_x, this.options.second_y);\n\n       // calculate graphical coordinates in advance\n      for (i = res.i1; i <= res.i2; ++i) {\n         x = xaxis.GetBinCoord(i + args.middle);\n         if (funcs.logx && (x <= 0)) { res.i1 = i+1; continue; }\n         if (res.origx) res.origx[i] = x;\n         res.grx[i] = funcs.grx(x);\n         if (args.rounding) res.grx[i] = Math.round(res.grx[i]);\n\n         if (args.use3d) {\n            if (res.grx[i] < -pmain.size_x3d) { res.i1 = i; res.grx[i] = -pmain.size_x3d; }\n            if (res.grx[i] > pmain.size_x3d) { res.i2 = i; res.grx[i] = pmain.size_x3d; }\n         }\n      }\n\n      if (args.use3d) {\n         if ((res.i1 < res.i2-2) && (res.grx[res.i1] === res.grx[res.i1+1])) res.i1++;\n         if ((res.i1 < res.i2-2) && (res.grx[res.i2-1] === res.grx[res.i2])) res.i2--;\n      }\n\n      // copy last valid value to higher indicies\n      while (i < res.i2 + res.stepi + 1)\n         res.grx[i++] = res.grx[res.i2];\n\n      if (hdim === 1) {\n         res.gry[0] = funcs.gry(0);\n         res.gry[1] = funcs.gry(1);\n      } else {\n         for (j = res.j1; j <= res.j2; ++j) {\n            y = yaxis.GetBinCoord(j + args.middle);\n            if (funcs.logy && (y <= 0)) { res.j1 = j+1; continue; }\n            if (res.origy) res.origy[j] = y;\n            res.gry[j] = funcs.gry(y);\n            if (args.rounding) res.gry[j] = Math.round(res.gry[j]);\n\n            if (args.use3d) {\n               if (res.gry[j] < -pmain.size_y3d) { res.j1 = j; res.gry[j] = -pmain.size_y3d; }\n               if (res.gry[j] > pmain.size_y3d) { res.j2 = j; res.gry[j] = pmain.size_y3d; }\n            }\n         }\n      }\n\n      if (args.use3d && (hdim > 1)) {\n         if ((res.j1 < res.j2-2) && (res.gry[res.j1] === res.gry[res.j1+1])) res.j1++;\n         if ((res.j1 < res.j2-2) && (res.gry[res.j2-1] === res.gry[res.j2])) res.j2--;\n      }\n\n      // copy last valid value to higher indicies\n      if (hdim > 1) {\n         while (j < res.j2 + res.stepj + 1)\n            res.gry[j++] = res.gry[res.j2];\n      }\n\n      //  find min/max values in selected range\n      this.maxbin = this.minbin = this.minposbin = null;\n\n      for (i = res.i1; i < res.i2; i += res.stepi) {\n         for (j = res.j1; j < res.j2; j += res.stepj) {\n            binz = histo.getBinContent(i + 1, j + 1);\n            if (!Number.isFinite(binz)) continue;\n            res.sumz += binz;\n            if (args.pixel_density) {\n               binarea = (res.grx[i+res.stepi]-res.grx[i])*(res.gry[j]-res.gry[j+res.stepj]);\n               if (binarea <= 0) continue;\n               res.max = Math.max(res.max, binz);\n               if ((binz > 0) && ((binz < res.min) || (res.min === 0))) res.min = binz;\n               binz = binz/binarea;\n            }\n            if (this.maxbin === null)\n               this.maxbin = this.minbin = binz;\n            else {\n               this.maxbin = Math.max(this.maxbin, binz);\n               this.minbin = Math.min(this.minbin, binz);\n            }\n            if (binz > 0)\n               if ((this.minposbin === null) || (binz < this.minposbin)) this.minposbin = binz;\n         }\n      }\n\n      res.palette = pmain.getHistPalette();\n\n      if (res.palette)\n         this.createContour(pmain, res.palette, args);\n\n      return res;\n   }\n\n} // class RHistPainter\n\nexport { RHistPainter };\n"],"names":["assignRAxisMethods","axis","_typename","nsREX","fInvBinWidth","$dummy","fNBinsNoOver","fLow","min","max","GetNumBins","this","GetBinCoord","bin","FindBin","x","add","Math","floor","fBinBorders","length","indx","round","indx2","abs","k","GetBinCenter","GetBinLowEdge","getHImpl","obj","fHistImpl","fIO","RHistPainter","RObjectPainter","constructor","dom","histo","super","csstype","draw_content","nbinsx","nbinsy","accept_drops","mode3d","getHisto","isDisplayItem","getObject","fAxes","force","getBinContent","nx","fIndicies","dx","stepx","ny","dy","stepy","nz","dz","stepz","getBin","y","z","getBin0","fBinContent","getBinError","sqrt","_2","_0","_1","fStatistics","fSumWeightsSquared","decodeOptions","options","Hist","System","copyOptionsFrom","src","o","o0","Mode3D","copyOptionsToOthers","forEachPainter","painter","isFunc","clear3DScene","fp","getFramePainter","create3DScene","cleanup","getDimension","scanContent","drawFrameAxes","main","isMainPainter","cleanupAxes","xmin","xmax","ymin","ymax","zmin","zmax","setAxesRanges","getAxis","drawAxes","second_x","second_y","setAxes2Ranges","drawAxes2","createHistDrawAttributes","createv7AttFill","createv7AttLine","updateDisplayItem","fContMin","fContMinPos","fContMax","updateObject","origin","matchObjectType","horigin","hobj","fTitle","histogram_updated","name","getAxisBinTip","step","pmain","handle","x1","kind","kAxisLabels","axisAsText","x2","kAxisTime","extractAxesProperties","ndim","nbinsz","addInteractivity","ismain","second_axis","processItemReply","reply","req","console","error","reqid","current_item_reqid","item","resolveFunc","drawingBins","reason","is_axes_zoomed","isStr","indexOf","v7NormalMode","prepareDraw","only_indexes","incomplete","Promise","v7SubmitRequest","bind","setTimeout","toggleStat","getSelectIndex","size","taxis","nbins","autoZoom","clickButton","funcname","zoom_xmin","zoom_xmax","zoom_ymin","zoom_ymax","zoom_zmin","zoom_zmax","res","unzoom","zoomChangedInteractive","toggleAxisLog","getPromise","fillToolbar","not_shown","pp","getPadPainter","addPadButton","showPadButtons","get3DToolTip","tip","fName","title","ix","iy","value","lines","getBinTooltips","iz","createContour","palette","args","nlevels","gStyle","fNumberContours","minbin","maxbin","zminpos","minposbin","scatter_plot","gminbin","gmaxbin","gminposbin","full_z_range","setFullRange","logz","scale_zmin","colzmin","scale_zmax","colzmax","changeValuesRange","menu","arg","prefix","isAxisZoomed","curr","input","then","JSON","parse","isObject","Number","isFinite","zoom","fillContextMenuItems","addchk","fillHistContextMenu","getMainPainter","isTooltipAllowed","setTooltipAllowed","enable_highlight","highlightBin3D","render3D","FrontBox","BackBox","Zero","redrawPad","Lego","fillPaletteMenu","control","reset","updatePaletteDraw","findPainterFor","undefined","drawPalette","addPaletteMenu","Palette","settings","parseInt","redraw","toggleMode3D","Surf","Error","Color","interactiveRedraw","rounding","extra","middle","right_extra","xaxis","yaxis","hdim","i1","i2","j1","j2","k1","k2","stepi","stepj","stepk","sumz","xbar1","xbar2","ybar1","ybar2","i","j","binz","binarea","grx","Array","gry","original","origx","origy","pixel_density","funcs","getGrFuncs","logx","use3d","size_x3d","logy","size_y3d","getHistPalette"],"sourceRoot":""}