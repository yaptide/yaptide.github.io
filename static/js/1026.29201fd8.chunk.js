"use strict";(self.webpackChunkthreejs_editor_react=self.webpackChunkthreejs_editor_react||[]).push([[1026],{1971:(t,a,i)=>{i.d(a,{k:()=>n});var e=i(3921),r=i(2848),s=i(273);class n extends e.TGraphPainter{drawBins3D(t,a){if(!t.mode3d||!t.grx||!t.gry||!t.grz||!t.toplevel)return console.log("Frame painter missing base 3d elements");if(t.zoom_xmin!==t.zoom_xmax&&(this.options.pos3d<t.zoom_xmin||this.options.pos3d>t.zoom_xmax))return;this.createGraphDrawAttributes(!0);const i=this.optimizeBins(1e3);let e=0,r=i.length-1;if(t.zoom_ymin!==t.zoom_ymax){for(;e<r&&i[e].x<t.zoom_ymin;)e++;for(;e<r&&i[r].x>t.zoom_ymax;)r--}if(e===r)return;const n=[],m=t.grx(this.options.pos3d);let h=i[e];for(let s=e+1;s<=r;++s){const a=i[s];n.push(m,t.gry(h.x),t.grz(h.y),m,t.gry(a.x),t.grz(a.y)),h=a}const o=(0,s.Fc)(n,(0,s.DH)(this,a));t.add3DMesh(o,this,!0),t.render3D(100)}async drawAxisHisto(){return r.TH1Painter.draw(this.getDom(),this.createHistogram(),this.options.Axis)}static async draw(t,a,i){return n._drawGraph(new n(t,a),i)}}},1026:(t,a,i)=>{i.r(a),i.d(a,{TMultiGraphPainter:()=>c});var e=i(9490),r=i(1597),s=i(6950),n=i(4913),m=i(4978),h=i(3921);class o extends s.JW{constructor(t,a){super(t,a),this.firstpainter=null,this.autorange=!1,this.painters=[]}cleanup(){this.painters=[],super.cleanup()}updateObject(t){if(!this.matchObjectType(t))return!1;const a=this.getObject(),i=t.fGraphs,e=this.getPadPainter();a.fTitle=t.fTitle;let r=!1;if(this.firstpainter){let a=t.fHistogram;this.autorange&&!a&&(a=this.scanGraphsRange(i)),this.firstpainter.updateObject(a)&&(r=!0)}const s=Math.min(i.arr.length,this.painters.length);for(let n=0;n<s;++n)this.painters[n].updateObject(i.arr[n],(i.opt[n]||this._restopt)+this._auto)&&(r=!0);return this._funcHandler=new n.eP(this,e,t.fFunctions),r}async redraw(t){const a=this.firstpainter?.redraw(t)??Promise.resolve(!0),i=async a=>a>=this.painters.length?this:this.painters[a].redraw(t).then((()=>i(a+1)));return a.then((()=>i(0))).then((()=>{const t=this._funcHandler?.drawNext(0)??this;return delete this._funcHandler,t}))}scanGraphsRange(t,a,i){const r=this.getObject(),s={xmin:0,xmax:0,ymin:0,ymax:0,first:!0};let n,m,h=!1,o=!1,f=!1,x="";i&&(h=i.fLogx,o=i.fLogv??i.fLogy,s.xmin=i.fUxmin,s.xmax=i.fUxmax,s.ymin=i.fUymin,s.ymax=i.fUymax,s.first=!1),this._3d&&a&&!a.fXaxis.fLabels&&(a=null),a||(this.autorange=!0,t.arr[0]?.fHistogram?.fXaxis?.fTimeDisplay&&(f=!0,x=t.arr[0].fHistogram.fXaxis.fTimeFormat)),t.arr.forEach((t=>{if(0!==t.fNpoints){s.first&&(s.xmin=s.xmax=t.fX[0],s.ymin=s.ymax=t.fY[0],s.first=!1);for(let a=0;a<t.fNpoints;++a)s.xmin=Math.min(s.xmin,t.fX[a]),s.xmax=Math.max(s.xmax,t.fX[a]),s.ymin=Math.min(s.ymin,t.fY[a]),s.ymax=Math.max(s.ymax,t.fY[a])}})),s.xmin===s.xmax&&(s.xmax+=1),s.ymin===s.ymax&&(s.ymax+=1);const c=.05*(s.xmax-s.xmin),d=.05*(s.ymax-s.ymin);let l=s.xmin-c,p=s.xmax+c;o?(s.ymin<=0&&(s.ymin=.001*s.ymax),m=s.ymin/(1+.5*Math.log10(s.ymax/s.ymin)),n=s.ymax*(1+.2*Math.log10(s.ymax/s.ymin))):(m=s.ymin-d,n=s.ymax+d),m<0&&s.ymin>=0&&(m=0),n>0&&s.ymax<=0&&(n=0);const y=m,g=n;if(l<0&&s.xmin>=0&&(l=h?.9*s.xmin:0),p>0&&s.xmax<=0&&(p=h?1.1*s.xmax:0),r.fMinimum!==e.kNoZoom&&(s.ymin=m=r.fMinimum),r.fMaximum!==e.kNoZoom&&(s.ymax=n=r.fMaximum),m<0&&s.ymin>=0&&o&&(m=.9*s.ymin),n>0&&s.ymax<=0&&o&&(n=1.1*s.ymax),m<=0&&o&&(m=.001*n),!o&&m>0&&m<.05*n&&(m=0),l<=0&&h&&(l=p>1e3?1:.001*p),!a){let i,s;if(this._3d){i=(a=(0,e.createHistogram)(e.clTH2I,t.arr.length,10)).fXaxis,i.fXmin=0,i.fXmax=t.arr.length,i.fLabels=(0,e.create)(e.clTHashList);for(let a=0;a<t.arr.length;a++){const r=(0,e.create)(e.clTObjString);r.fString=t.arr[a].fTitle||`gr${a}`,r.fUniqueID=t.arr.length-a,i.fLabels.Add(r,"")}i=a.fYaxis,s=a.fZaxis}else i=(a=(0,e.createHistogram)(e.clTH1I,10)).fXaxis,s=a.fYaxis;if(a.fTitle=r.fTitle,a.fTitle.indexOf(";")>=0){const t=a.fTitle.split(";");a.fTitle=t[0],t[1]&&(i.fTitle=t[1]),t[2]&&(s.fTitle=t[2])}i.fXmin=l,i.fXmax=p,i.fTimeDisplay=f,f&&(i.fTimeFormat=x)}const u=this._3d?a.fZaxis:a.fYaxis;return u.fXmin=Math.min(m,y),u.fXmax=Math.max(n,g),a.fMinimum=m,a.fMaximum=n,a.fBits|=e.kNoStats,a}async drawAxisHist(t,a){return m.N.draw(this.getDom(),t,a)}async drawGraph(t,a){return h.TGraphPainter.draw(this.getDom(),t,a)}async drawNextGraph(t){const a=this.getObject().fGraphs;if(t>=a.arr.length)return this;const i=a.arr[t],e=(a.opt[t]||this._restopt)+this._auto;return this._auto&&(i.$num_graphs=a.arr.length),this.drawGraph(i,e,a.arr.length-t).then((a=>(a&&(a.setSecondaryId(this,`graphs_${t}`),this.painters.push(a)),this.drawNextGraph(t+1))))}static async _drawMG(t,a){const i=new r.nC(a);t._3d=i.check("3D"),t._auto="",["PFC","PLC","PMC"].forEach((a=>{i.check(a)&&(t._auto+=" "+a)}));let e="";i.check("FB")&&t._3d&&(e+="FB"),m.c.forEach((t=>{i.check(t)&&(e+=";"+t)})),t._restopt=i.remain();let s=Promise.resolve(!0);if(i.check("A")||!t.getMainPainter()){const a=t.getObject(),i=t.scanGraphsRange(a.fGraphs,a.fHistogram,t.getPadPainter()?.getRootPad(!0));s=t.drawAxisHist(i,e).then((a=>{a.setSecondaryId(t,"hist"),t.firstpainter=a}))}return s.then((()=>(t.addToPadPrimitives(),t.drawNextGraph(0)))).then((()=>new n.eP(t,t.getPadPainter(),t.getObject().fFunctions,!0).drawNext(0)))}static async draw(t,a,i){return o._drawMG(new o(t,a),i)}}var f=i(1225),x=i(1971);class c extends o{async drawAxisHist(t,a){return this._3d?f.TH2Painter.draw(this.getDom(),t,"LEGO"+a):m.N.draw(this.getDom(),t,a)}async drawGraph(t,a,i){return this._3d&&(a+="pos3d_"+i),x.k.draw(this.getDom(),t,a)}static async draw(t,a,i){return c._drawMG(new c(t,a),i)}}}}]);
//# sourceMappingURL=1026.29201fd8.chunk.js.map