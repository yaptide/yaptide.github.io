{"version":3,"file":"static/js/1655.6d549e79.chunk.js","mappings":"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","sources":["../node_modules/jsroot/modules/hist2d/RH1Painter.mjs","../node_modules/jsroot/modules/hist/RH1Painter.mjs"],"sourcesContent":["import { gStyle, settings, constants, kInspect } from '../core.mjs';\nimport { rgb as d3_rgb } from '../d3.mjs';\nimport { floatToString, DrawOptions, buildSvgCurve, addHighlightStyle } from '../base/BasePainter.mjs';\nimport { RHistPainter } from './RHistPainter.mjs';\nimport { ensureRCanvas } from '../gpad/RCanvasPainter.mjs';\n\n\n/**\n * @summary Painter for RH1 classes\n *\n * @private\n */\n\nclass RH1Painter extends RHistPainter {\n\n   /** @summary Constructor\n     * @param {object|string} dom - DOM element or id\n     * @param {object} histo - histogram object */\n   constructor(dom, histo) {\n      super(dom, histo);\n      this.wheel_zoomy = false;\n   }\n\n   /** @summary Scan content */\n   scanContent(when_axis_changed) {\n      // if when_axis_changed === true specified, content will be scanned after axis zoom changed\n\n      const histo = this.getHisto();\n      if (!histo) return;\n\n      if (!this.nbinsx && when_axis_changed) when_axis_changed = false;\n\n      if (!when_axis_changed)\n         this.extractAxesProperties(1);\n\n      let hmin = 0, hmin_nz = 0, hmax = 0, hsum = 0;\n\n      if (this.isDisplayItem()) {\n         // take min/max values from the display item\n         hmin = histo.fContMin;\n         hmin_nz = histo.fContMinPos;\n         hmax = histo.fContMax;\n         hsum = hmax;\n      } else {\n         const left = this.getSelectIndex('x', 'left'),\n               right = this.getSelectIndex('x', 'right');\n\n         if (when_axis_changed)\n            if ((left === this.scan_xleft) && (right === this.scan_xright)) return;\n\n\n         this.scan_xleft = left;\n         this.scan_xright = right;\n\n         let first = true, value, err;\n\n         for (let i = 0; i < this.nbinsx; ++i) {\n            value = histo.getBinContent(i+1);\n            hsum += value;\n\n            if ((i<left) || (i>=right)) continue;\n\n            if (value > 0)\n               if ((hmin_nz === 0) || (value<hmin_nz)) hmin_nz = value;\n            if (first) {\n               hmin = hmax = value;\n               first = false;\n            }\n\n            err = 0;\n\n            hmin = Math.min(hmin, value - err);\n            hmax = Math.max(hmax, value + err);\n         }\n      }\n\n      this.stat_entries = hsum;\n\n      this.hmin = hmin;\n      this.hmax = hmax;\n\n      this.ymin_nz = hmin_nz; // value can be used to show optimal log scale\n\n      if ((this.nbinsx === 0) || ((Math.abs(hmin) < 1e-300) && (Math.abs(hmax) < 1e-300)))\n         this.draw_content = false;\n      else\n         this.draw_content = true;\n\n      if (this.draw_content) {\n         if (hmin >= hmax) {\n            if (hmin === 0) {\n               this.ymin = 0;\n               this.ymax = 1;\n            } else if (hmin < 0) {\n               this.ymin = 2 * hmin;\n               this.ymax = 0;\n            } else {\n               this.ymin = 0;\n               this.ymax = hmin * 2;\n            }\n         } else {\n            const dy = (hmax - hmin) * 0.05;\n            this.ymin = hmin - dy;\n            if ((this.ymin < 0) && (hmin >= 0)) this.ymin = 0;\n            this.ymax = hmax + dy;\n         }\n      }\n   }\n\n   /** @summary Count statistic */\n   countStat(cond) {\n      const histo = this.getHisto(), xaxis = this.getAxis('x'),\n            left = this.getSelectIndex('x', 'left'),\n            right = this.getSelectIndex('x', 'right'),\n            stat_sumwy = 0, stat_sumwy2 = 0,\n            res = { name: 'histo', meanx: 0, meany: 0, rmsx: 0, rmsy: 0, integral: 0, entries: this.stat_entries, xmax: 0, wmax: 0 };\n      let stat_sumw = 0, stat_sumwx = 0, stat_sumwx2 = 0,\n          i, xx = 0, w = 0, xmax = null, wmax = null;\n\n      for (i = left; i < right; ++i) {\n         xx = xaxis.GetBinCoord(i+0.5);\n\n         if (cond && !cond(xx)) continue;\n\n         w = histo.getBinContent(i + 1);\n\n         if ((xmax === null) || (w > wmax)) { xmax = xx; wmax = w; }\n\n         stat_sumw += w;\n         stat_sumwx += w * xx;\n         stat_sumwx2 += w * xx**2;\n      }\n\n      res.integral = stat_sumw;\n\n      if (Math.abs(stat_sumw) > 1e-300) {\n         res.meanx = stat_sumwx / stat_sumw;\n         res.meany = stat_sumwy / stat_sumw;\n         res.rmsx = Math.sqrt(Math.abs(stat_sumwx2 / stat_sumw - res.meanx**2));\n         res.rmsy = Math.sqrt(Math.abs(stat_sumwy2 / stat_sumw - res.meany**2));\n      }\n\n      if (xmax !== null) {\n         res.xmax = xmax;\n         res.wmax = wmax;\n      }\n\n      return res;\n   }\n\n   /** @summary Fill statistic */\n   fillStatistic(stat, dostat/*, dofit */) {\n      const histo = this.getHisto(),\n          data = this.countStat(),\n          print_name = dostat % 10,\n          print_entries = Math.floor(dostat / 10) % 10,\n          print_mean = Math.floor(dostat / 100) % 10,\n          print_rms = Math.floor(dostat / 1000) % 10,\n          print_under = Math.floor(dostat / 10000) % 10,\n          print_over = Math.floor(dostat / 100000) % 10,\n          print_integral = Math.floor(dostat / 1000000) % 10,\n          print_skew = Math.floor(dostat / 10000000) % 10,\n          print_kurt = Math.floor(dostat / 100000000) % 10;\n\n      // make empty at the beginning\n      stat.clearStat();\n\n      if (print_name > 0)\n         stat.addText(data.name);\n\n      if (print_entries > 0)\n         stat.addText('Entries = ' + stat.format(data.entries, 'entries'));\n\n      if (print_mean > 0)\n         stat.addText('Mean = ' + stat.format(data.meanx));\n\n      if (print_rms > 0)\n         stat.addText('Std Dev = ' + stat.format(data.rmsx));\n\n      if (print_under > 0)\n         stat.addText('Underflow = ' + stat.format(histo.getBinContent(0), 'entries'));\n\n      if (print_over > 0)\n         stat.addText('Overflow = ' + stat.format(histo.getBinContent(this.nbinsx+1), 'entries'));\n\n      if (print_integral > 0)\n         stat.addText('Integral = ' + stat.format(data.integral, 'entries'));\n\n      if (print_skew > 0)\n         stat.addText('Skew = <not avail>');\n\n      if (print_kurt > 0)\n         stat.addText('Kurt = <not avail>');\n\n      return true;\n   }\n\n   /** @summary Draw histogram as bars */\n   async drawBars(handle, funcs, width, height) {\n      this.createG(true);\n\n      const left = handle.i1, right = handle.i2, di = handle.stepi,\n            pmain = this.getFramePainter(),\n            histo = this.getHisto(), xaxis = this.getAxis('x');\n      let i, x1, x2, grx1, grx2, y, gry1, gry2, w,\n          bars = '', barsl = '', barsr = '';\n\n      gry2 = pmain.swap_xy ? 0 : height;\n      if (Number.isFinite(this.options.BaseLine)) {\n         if (this.options.BaseLine >= funcs.scale_ymin)\n            gry2 = Math.round(funcs.gry(this.options.BaseLine));\n      }\n\n      for (i = left; i < right; i += di) {\n         x1 = xaxis.GetBinCoord(i);\n         x2 = xaxis.GetBinCoord(i+di);\n\n         if (funcs.logx && (x2 <= 0)) continue;\n\n         grx1 = Math.round(funcs.grx(x1));\n         grx2 = Math.round(funcs.grx(x2));\n\n         y = histo.getBinContent(i+1);\n         if (funcs.logy && (y < funcs.scale_ymin)) continue;\n         gry1 = Math.round(funcs.gry(y));\n\n         w = grx2 - grx1;\n         grx1 += Math.round(this.options.BarOffset*w);\n         w = Math.round(this.options.BarWidth*w);\n\n         if (pmain.swap_xy)\n            bars += `M${gry2},${grx1}h${gry1-gry2}v${w}h${gry2-gry1}z`;\n         else\n            bars += `M${grx1},${gry1}h${w}v${gry2-gry1}h${-w}z`;\n\n         if (this.options.BarStyle > 0) {\n            grx2 = grx1 + w;\n            w = Math.round(w / 10);\n            if (pmain.swap_xy) {\n               barsl += `M${gry2},${grx1}h${gry1-gry2}v${w}h${gry2-gry1}z`;\n               barsr += `M${gry2},${grx2}h${gry1-gry2}v${-w}h${gry2-gry1}z`;\n            } else {\n               barsl += `M${grx1},${gry1}h${w}v${gry2-gry1}h${-w}z`;\n               barsr += `M${grx2},${gry1}h${-w}v${gry2-gry1}h${w}z`;\n            }\n         }\n      }\n\n      if (this.fillatt.empty()) this.fillatt.setSolidColor('blue');\n\n      if (bars) {\n         this.draw_g.append('svg:path')\n                    .attr('d', bars)\n                    .call(this.fillatt.func);\n      }\n\n      if (barsl) {\n         this.draw_g.append('svg:path')\n               .attr('d', barsl)\n               .call(this.fillatt.func)\n               .style('fill', d3_rgb(this.fillatt.color).brighter(0.5).formatHex());\n      }\n\n      if (barsr) {\n         this.draw_g.append('svg:path')\n               .attr('d', barsr)\n               .call(this.fillatt.func)\n               .style('fill', d3_rgb(this.fillatt.color).darker(0.5).formatHex());\n       }\n\n       return true;\n   }\n\n   /** @summary Draw histogram as filled errors */\n   async drawFilledErrors(handle, funcs /*, width, height */) {\n      this.createG(true);\n\n      const left = handle.i1, right = handle.i2, di = handle.stepi,\n            histo = this.getHisto(), xaxis = this.getAxis('x'),\n            bins1 = [], bins2 = [];\n      let i, x, grx, y, yerr, gry;\n\n      for (i = left; i < right; i += di) {\n         x = xaxis.GetBinCoord(i+0.5);\n         if (funcs.logx && (x <= 0)) continue;\n         grx = Math.round(funcs.grx(x));\n\n         y = histo.getBinContent(i+1);\n         yerr = histo.getBinError(i+1);\n         if (funcs.logy && (y-yerr < funcs.scale_ymin)) continue;\n\n         gry = Math.round(funcs.gry(y + yerr));\n         bins1.push({ grx, gry });\n\n         gry = Math.round(funcs.gry(y - yerr));\n         bins2.unshift({ grx, gry });\n      }\n\n      const path1 = buildSvgCurve(bins1, { line: this.options.ErrorKind !== 4 }),\n            path2 = buildSvgCurve(bins2, { line: this.options.ErrorKind !== 4, cmd: 'L' });\n\n      if (this.fillatt.empty()) this.fillatt.setSolidColor('blue');\n\n      this.draw_g.append('svg:path')\n                 .attr('d', path1 + path2 + 'Z')\n                 .call(this.fillatt.func);\n\n      return true;\n   }\n\n   /** @summary Draw 1D histogram as SVG */\n   async draw1DBins() {\n      const pmain = this.getFramePainter(),\n          rect = pmain.getFrameRect();\n\n      if (!this.draw_content || (rect.width <= 0) || (rect.height <= 0)) {\n         this.removeG();\n         return false;\n      }\n\n      this.createHistDrawAttributes();\n\n      const handle = this.prepareDraw({ extra: 1, only_indexes: true }),\n          funcs = pmain.getGrFuncs(this.options.second_x, this.options.second_y);\n\n      if (this.options.Bar)\n         return this.drawBars(handle, funcs, rect.width, rect.height);\n\n      if ((this.options.ErrorKind === 3) || (this.options.ErrorKind === 4))\n         return this.drawFilledErrors(handle, funcs, rect.width, rect.height);\n\n      return this.drawHistBins(handle, funcs, rect.width, rect.height);\n   }\n\n   /** @summary Draw histogram bins */\n   async drawHistBins(handle, funcs, width, height) {\n      this.createG(true);\n\n      const options = this.options,\n            left = handle.i1,\n            right = handle.i2,\n            di = handle.stepi,\n            histo = this.getHisto(),\n            want_tooltip = !this.isBatchMode() && settings.Tooltip,\n            xaxis = this.getAxis('x'),\n            exclude_zero = !options.Zero,\n            show_errors = options.Error,\n            show_line = options.Line,\n            show_text = options.Text;\n      let show_markers = options.Mark,\n          res = '', lastbin = false,\n          startx, currx, curry, x, grx, y, gry, curry_min, curry_max, prevy, prevx, i, bestimin, bestimax,\n          path_fill = null, path_err = null, path_marker = null, path_line = null,\n          hints_err = null,\n          endx = '', endy = '', dend = 0, my, yerr1, yerr2, bincont, binerr, mx1, mx2, midx,\n          text_font;\n\n      if (show_errors && !show_markers && (this.v7EvalAttr('marker_style', 1) > 1))\n         show_markers = true;\n\n      if (options.ErrorKind === 2) {\n         if (this.fillatt.empty()) show_markers = true;\n                              else path_fill = '';\n      } else if (options.Error) {\n         path_err = '';\n         hints_err = want_tooltip ? '' : null;\n      }\n\n      if (show_line) path_line = '';\n\n      if (show_markers) {\n         // draw markers also when e2 option was specified\n         this.createv7AttMarker();\n         if (this.markeratt.size > 0) {\n            // simply use relative move from point, can optimize in the future\n            path_marker = '';\n            this.markeratt.resetPos();\n         } else\n            show_markers = false;\n      }\n\n      if (show_text) {\n         text_font = this.v7EvalFont('text', { size: 20, color: 'black', align: 22 });\n\n         if (!text_font.angle && !options.TextKind) {\n             const space = width / (right - left + 1);\n             if (space < 3 * text_font.size) {\n                text_font.setAngle(270);\n                text_font.setSize(Math.round(space*0.7));\n             }\n         }\n\n         this.startTextDrawing(text_font, 'font');\n      }\n\n      // if there are too many points, exclude many vertical drawings at the same X position\n      // instead define min and max value and made min-max drawing\n      let use_minmax = ((right-left) > 3*width);\n\n      if (options.ErrorKind === 1) {\n         const lw = this.lineatt.width + gStyle.fEndErrorSize;\n         endx = `m0,${lw}v${-2*lw}m0,${lw}`;\n         endy = `m${lw},0h${-2*lw}m${lw},0`;\n         dend = Math.floor((this.lineatt.width-1)/2);\n      }\n\n      const draw_markers = show_errors || show_markers;\n\n      if (draw_markers || show_text || show_line) use_minmax = true;\n\n      const draw_bin = besti => {\n         bincont = histo.getBinContent(besti+1);\n         if (!exclude_zero || (bincont !== 0)) {\n            mx1 = Math.round(funcs.grx(xaxis.GetBinCoord(besti)));\n            mx2 = Math.round(funcs.grx(xaxis.GetBinCoord(besti+di)));\n            midx = Math.round((mx1+mx2)/2);\n            my = Math.round(funcs.gry(bincont));\n            yerr1 = yerr2 = 20;\n            if (show_errors) {\n               binerr = histo.getBinError(besti+1);\n               yerr1 = Math.round(my - funcs.gry(bincont + binerr)); // up\n               yerr2 = Math.round(funcs.gry(bincont - binerr) - my); // down\n            }\n\n            if (show_text && (bincont !== 0)) {\n               const lbl = (bincont === Math.round(bincont)) ? bincont.toString() : floatToString(bincont, gStyle.fPaintTextFormat);\n\n               if (text_font.angle)\n                  this.drawText({ align: 12, x: midx, y: Math.round(my - 2 - text_font.size / 5), text: lbl, latex: 0 });\n               else\n                  this.drawText({ x: Math.round(mx1 + (mx2 - mx1) * 0.1), y: Math.round(my - 2 - text_font.size), width: Math.round((mx2 - mx1) * 0.8), height: text_font.size, text: lbl, latex: 0 });\n            }\n\n            if (show_line && (path_line !== null))\n               path_line += ((path_line.length === 0) ? 'M' : 'L') + midx + ',' + my;\n\n            if (draw_markers) {\n               if ((my >= -yerr1) && (my <= height + yerr2)) {\n                  if (path_fill !== null)\n                     path_fill += `M${mx1},${my-yerr1}h${mx2-mx1}v${yerr1+yerr2+1}h${mx1-mx2}z`;\n                  if (path_marker !== null)\n                     path_marker += this.markeratt.create(midx, my);\n                  if (path_err !== null) {\n                     let edx = 5;\n                     if (this.options.errorX > 0) {\n                        edx = Math.round((mx2-mx1)*this.options.errorX);\n                        const mmx1 = midx - edx, mmx2 = midx + edx;\n                        path_err += `M${mmx1+dend},${my}${endx}h${mmx2-mmx1-2*dend}${endx}`;\n                     }\n                     path_err += `M${midx},${my-yerr1+dend}${endy}v${yerr1+yerr2-2*dend}${endy}`;\n                     if (hints_err !== null)\n                        hints_err += `M${midx-edx},${my-yerr1}h${2*edx}v${yerr1+yerr2}h${-2*edx}z`;\n                  }\n               }\n            }\n         }\n      };\n\n      for (i = left; i <= right; i += di) {\n         x = xaxis.GetBinCoord(i);\n\n         if (funcs.logx && (x <= 0)) continue;\n\n         grx = Math.round(funcs.grx(x));\n\n         lastbin = (i > right - di);\n\n         if (lastbin && (left < right))\n            gry = curry;\n          else {\n            y = histo.getBinContent(i+1);\n            gry = Math.round(funcs.gry(y));\n         }\n\n         if (res.length === 0) {\n            bestimin = bestimax = i;\n            prevx = startx = currx = grx;\n            prevy = curry_min = curry_max = curry = gry;\n            res = 'M'+currx+','+curry;\n         } else\n         if (use_minmax) {\n            if ((grx === currx) && !lastbin) {\n               if (gry < curry_min) bestimax = i; else\n               if (gry > curry_max) bestimin = i;\n               curry_min = Math.min(curry_min, gry);\n               curry_max = Math.max(curry_max, gry);\n               curry = gry;\n            } else {\n               if (draw_markers || show_text || show_line) {\n                  if (bestimin === bestimax) draw_bin(bestimin); else\n                     if (bestimin < bestimax) { draw_bin(bestimin); draw_bin(bestimax); } else {\n                        draw_bin(bestimax); draw_bin(bestimin);\n                     }\n               }\n\n               // when several points as same X differs, need complete logic\n               if (!draw_markers && ((curry_min !== curry_max) || (prevy !== curry_min))) {\n                  if (prevx !== currx)\n                     res += 'h'+(currx-prevx);\n\n                  if (curry === curry_min) {\n                     if (curry_max !== prevy)\n                        res += 'v' + (curry_max - prevy);\n                     if (curry_min !== curry_max)\n                        res += 'v' + (curry_min - curry_max);\n                  } else {\n                     if (curry_min !== prevy)\n                        res += 'v' + (curry_min - prevy);\n                     if (curry_max !== curry_min)\n                        res += 'v' + (curry_max - curry_min);\n                     if (curry !== curry_max)\n                       res += 'v' + (curry - curry_max);\n                  }\n\n                  prevx = currx;\n                  prevy = curry;\n               }\n\n               if (lastbin && (prevx !== grx))\n                  res += 'h'+(grx-prevx);\n\n               bestimin = bestimax = i;\n               curry_min = curry_max = curry = gry;\n               currx = grx;\n            }\n         } else\n         if ((gry !== curry) || lastbin) {\n            if (grx !== currx) res += 'h'+(grx-currx);\n            if (gry !== curry) res += 'v'+(gry-curry);\n            curry = gry;\n            currx = grx;\n         }\n      }\n\n      const fill_for_interactive = !this.isBatchMode() && this.fillatt.empty() && options.Hist && settings.Tooltip && !draw_markers && !show_line;\n      let h0 = height + 3;\n      if (!fill_for_interactive) {\n         const gry0 = Math.round(funcs.gry(0));\n         if (gry0 <= 0)\n            h0 = -3;\n         else if (gry0 < height)\n            h0 = gry0;\n      }\n      const close_path = `L${currx},${h0}H${startx}Z`;\n\n      if (draw_markers || show_line) {\n         if (path_fill) {\n            this.draw_g.append('svg:path')\n                       .attr('d', path_fill)\n                       .call(this.fillatt.func);\n         }\n\n         if (path_err) {\n            this.draw_g.append('svg:path')\n                   .attr('d', path_err)\n                   .call(this.lineatt.func);\n         }\n\n         if (hints_err) {\n            this.draw_g.append('svg:path')\n                   .attr('d', hints_err)\n                   .style('fill', 'none')\n                   .style('pointer-events', this.isBatchMode() ? null : 'visibleFill');\n         }\n\n         if (path_line) {\n            if (!this.fillatt.empty() && !options.Hist) {\n               this.draw_g.append('svg:path')\n                     .attr('d', path_line + close_path)\n                     .call(this.fillatt.func);\n            }\n\n            this.draw_g.append('svg:path')\n                   .attr('d', path_line)\n                   .style('fill', 'none')\n                   .call(this.lineatt.func);\n         }\n\n         if (path_marker) {\n            this.draw_g.append('svg:path')\n                .attr('d', path_marker)\n                .call(this.markeratt.func);\n         }\n      } else if (res && options.Hist) {\n         this.draw_g.append('svg:path')\n                    .attr('d', res + ((!this.fillatt.empty() || fill_for_interactive) ? close_path : ''))\n                    .style('stroke-linejoin', 'miter')\n                    .call(this.lineatt.func)\n                    .call(this.fillatt.func);\n      }\n\n      return show_text ? this.finishTextDrawing() : true;\n   }\n\n   /** @summary Provide text information (tooltips) for histogram bin */\n   getBinTooltips(bin) {\n      const tips = [],\n            name = this.getObjectHint(),\n            pmain = this.getFramePainter(),\n            histo = this.getHisto(),\n            xaxis = this.getAxis('x'),\n            di = this.isDisplayItem() ? histo.stepx : 1,\n            x1 = xaxis.GetBinCoord(bin),\n            x2 = xaxis.GetBinCoord(bin+di),\n            xlbl = this.getAxisBinTip('x', bin, di);\n\n      let cont = histo.getBinContent(bin+1);\n\n      if (name) tips.push(name);\n\n      if (this.options.Error || this.options.Mark) {\n         tips.push(`x = ${xlbl}`, `y = ${pmain.axisAsText('y', cont)}`);\n         if (this.options.Error) {\n            if (xlbl[0] === '[') tips.push('error x = ' + ((x2 - x1) / 2).toPrecision(4));\n            tips.push('error y = ' + histo.getBinError(bin + 1).toPrecision(4));\n         }\n      } else {\n         tips.push(`bin = ${bin+1}`, `x = ${xlbl}`);\n         if (histo.$baseh) cont -= histo.$baseh.getBinContent(bin+1);\n         const lbl = 'entries = ' + (di > 1 ? '~' : '');\n         if (cont === Math.round(cont))\n            tips.push(lbl + cont);\n         else\n            tips.push(lbl + floatToString(cont, gStyle.fStatFormat));\n      }\n\n      return tips;\n   }\n\n   /** @summary Process tooltip event */\n   processTooltipEvent(pnt) {\n      let ttrect = this.draw_g?.selectChild('.tooltip_bin');\n\n      if (!pnt || !this.draw_content || this.options.Mode3D || !this.draw_g) {\n         ttrect?.remove();\n         return null;\n      }\n\n      const pmain = this.getFramePainter(),\n            funcs = pmain.getGrFuncs(this.options.second_x, this.options.second_y),\n            width = pmain.getFrameWidth(),\n            height = pmain.getFrameHeight(),\n            histo = this.getHisto(), xaxis = this.getAxis('x'),\n            left = this.getSelectIndex('x', 'left', -1),\n            right = this.getSelectIndex('x', 'right', 2);\n\n      let findbin = null, show_rect,\n          grx1, grx2, gry1, gry2, gapx = 2,\n          l = left, r = right;\n\n      function GetBinGrX(i) {\n         const xx = xaxis.GetBinCoord(i);\n         return (funcs.logx && (xx <= 0)) ? null : funcs.grx(xx);\n      }\n\n      function GetBinGrY(i) {\n         const yy = histo.getBinContent(i + 1);\n         if (funcs.logy && (yy < funcs.scale_ymin))\n            return funcs.swap_xy ? -1000 : 10*height;\n         return Math.round(funcs.gry(yy));\n      }\n\n      const pnt_x = funcs.swap_xy ? pnt.y : pnt.x,\n            pnt_y = funcs.swap_xy ? pnt.x : pnt.y;\n\n      while (l < r-1) {\n         const m = Math.round((l+r)*0.5),\n               xx = GetBinGrX(m);\n         if ((xx === null) || (xx < pnt_x - 0.5))\n            if (funcs.swap_xy) r = m; else l = m;\n          else if (xx > pnt_x + 0.5)\n            if (funcs.swap_xy) l = m; else r = m;\n          else { l++; r--; }\n      }\n\n      findbin = r = l;\n      grx1 = GetBinGrX(findbin);\n\n      if (funcs.swap_xy) {\n         while ((l > left) && (GetBinGrX(l-1) < grx1 + 2)) --l;\n         while ((r < right) && (GetBinGrX(r+1) > grx1 - 2)) ++r;\n      } else {\n         while ((l > left) && (GetBinGrX(l-1) > grx1 - 2)) --l;\n         while ((r < right) && (GetBinGrX(r+1) < grx1 + 2)) ++r;\n      }\n\n      if (l < r) {\n         // many points can be assigned with the same cursor position\n         // first try point around mouse y\n         let best = height;\n         for (let m = l; m <= r; m++) {\n            const dist = Math.abs(GetBinGrY(m) - pnt_y);\n            if (dist < best) { best = dist; findbin = m; }\n         }\n\n         // if best distance still too far from mouse position, just take from between\n         if (best > height/10)\n            findbin = Math.round(l + (r-l) / height * pnt_y);\n\n         grx1 = GetBinGrX(findbin);\n      }\n\n      grx1 = Math.round(grx1);\n      grx2 = Math.round(GetBinGrX(findbin+1));\n\n      if (this.options.Bar) {\n         const w = grx2 - grx1;\n         grx1 += Math.round(this.options.BarOffset*w);\n         grx2 = grx1 + Math.round(this.options.BarWidth*w);\n      }\n\n      if (grx1 > grx2)\n         [grx1, grx2] = [grx2, grx1];\n\n      if (this.isDisplayItem() && ((findbin <= histo.dx) || (findbin >= histo.dx + histo.nx))) {\n         // special case when zoomed out of scale and bin is not available\n         ttrect.remove();\n         return null;\n      }\n\n      const midx = Math.round((grx1 + grx2)/2),\n            midy = gry1 = gry2 = GetBinGrY(findbin);\n\n      if (this.options.Bar) {\n         show_rect = true;\n\n         gapx = 0;\n\n         gry1 = Math.round(funcs.gry(((this.options.BaseLine!==false) && (this.options.BaseLine > funcs.scale_ymin)) ? this.options.BaseLine : funcs.scale_ymin));\n\n         if (gry1 > gry2)\n            [gry1, gry2] = [gry2, gry1];\n\n         if (!pnt.touch && (pnt.nproc === 1))\n            if ((pnt_y < gry1) || (pnt_y > gry2)) findbin = null;\n      } else if (this.options.Error || this.options.Mark) {\n         show_rect = true;\n\n         let msize = 3;\n         if (this.markeratt) msize = Math.max(msize, this.markeratt.getFullSize());\n\n         if (this.options.Error) {\n            const cont = histo.getBinContent(findbin+1),\n                  binerr = histo.getBinError(findbin+1);\n\n            gry1 = Math.round(funcs.gry(cont + binerr)); // up\n            gry2 = Math.round(funcs.gry(cont - binerr)); // down\n\n            const dx = (grx2-grx1)*this.options.errorX;\n            grx1 = Math.round(midx - dx);\n            grx2 = Math.round(midx + dx);\n         }\n\n         // show at least 6 pixels as tooltip rect\n         if (grx2 - grx1 < 2*msize) { grx1 = midx-msize; grx2 = midx+msize; }\n\n         gry1 = Math.min(gry1, midy - msize);\n         gry2 = Math.max(gry2, midy + msize);\n\n         if (!pnt.touch && (pnt.nproc === 1))\n            if ((pnt_y < gry1) || (pnt_y > gry2)) findbin = null;\n      } else if (this.options.Line)\n\n         show_rect = false;\n\n       else {\n         // if histogram alone, use old-style with rects\n         // if there are too many points at pixel, use circle\n         show_rect = (pnt.nproc === 1) && (right-left < width);\n\n         if (show_rect) {\n            gry2 = height;\n\n            if (!this.fillatt.empty()) {\n               gry2 = Math.min(height, Math.max(0, Math.round(funcs.gry(0))));\n               if (gry2 < gry1)\n                  [gry1, gry2] = [gry2, gry1];\n            }\n\n            // for mouse events pointer should be between y1 and y2\n            if (((pnt.y < gry1) || (pnt.y > gry2)) && !pnt.touch) findbin = null;\n         }\n      }\n\n      if (findbin !== null) {\n         // if bin on boundary found, check that x position is ok\n         if ((findbin === left) && (grx1 > pnt_x + gapx)) findbin = null; else\n         if ((findbin === right-1) && (grx2 < pnt_x - gapx)) findbin = null; else\n         // if bars option used check that bar is not match\n         if ((pnt_x < grx1 - gapx) || (pnt_x > grx2 + gapx)) findbin = null; else\n         // exclude empty bin if empty bins suppressed\n         if (!this.options.Zero && (histo.getBinContent(findbin+1) === 0)) findbin = null;\n      }\n\n      if ((findbin === null) || ((gry2 <= 0) || (gry1 >= height))) {\n         ttrect.remove();\n         return null;\n      }\n\n      const res = { name: 'histo', title: histo.fTitle,\n                  x: midx, y: midy, exact: true,\n                  color1: this.lineatt?.color ?? 'green',\n                  color2: this.fillatt?.getFillColorAlt('blue') ?? 'blue',\n                  lines: this.getBinTooltips(findbin) };\n\n      if (pnt.disabled) {\n         // case when tooltip should not highlight bin\n\n         ttrect.remove();\n         res.changed = true;\n      } else if (show_rect) {\n         if (ttrect.empty()) {\n            ttrect = this.draw_g.append('svg:rect')\n                                .attr('class', 'tooltip_bin')\n                                .style('pointer-events', 'none')\n                                .call(addHighlightStyle);\n         }\n\n         res.changed = ttrect.property('current_bin') !== findbin;\n\n         if (res.changed) {\n            ttrect.attr('x', pmain.swap_xy ? gry1 : grx1)\n                  .attr('width', pmain.swap_xy ? gry2-gry1 : grx2-grx1)\n                  .attr('y', pmain.swap_xy ? grx1 : gry1)\n                  .attr('height', pmain.swap_xy ? grx2-grx1 : gry2-gry1)\n                  .style('opacity', '0.3')\n                  .property('current_bin', findbin);\n         }\n\n         res.exact = (Math.abs(midy - pnt_y) <= 5) || ((pnt_y>=gry1) && (pnt_y<=gry2));\n\n         res.menu = res.exact; // one could show context menu\n         // distance to middle point, use to decide which menu to activate\n         res.menu_dist = Math.sqrt((midx-pnt_x)**2 + (midy-pnt_y)**2);\n      } else {\n         const radius = this.lineatt.width + 3;\n\n         if (ttrect.empty()) {\n            ttrect = this.draw_g.append('svg:circle')\n                                .attr('class', 'tooltip_bin')\n                                .style('pointer-events', 'none')\n                                .attr('r', radius)\n                                .call(this.lineatt.func)\n                                .call(this.fillatt.func);\n         }\n\n         res.exact = (Math.abs(midx - pnt.x) <= radius) && (Math.abs(midy - pnt.y) <= radius);\n\n         res.menu = res.exact; // show menu only when mouse pointer exactly over the histogram\n         res.menu_dist = Math.sqrt((midx-pnt.x)**2 + (midy-pnt.y)**2);\n\n         res.changed = ttrect.property('current_bin') !== findbin;\n\n         if (res.changed) {\n            ttrect.attr('cx', midx)\n                  .attr('cy', midy)\n                  .property('current_bin', findbin);\n         }\n      }\n\n      if (res.changed) {\n         res.user_info = { obj: histo, name: 'histo',\n                           bin: findbin, cont: histo.getBinContent(findbin+1),\n                           grx: midx, gry: midy };\n      }\n\n      return res;\n   }\n\n   /** @summary Fill histogram context menu */\n   fillHistContextMenu(menu) {\n      menu.add('Auto zoom-in', () => this.autoZoom());\n\n      const opts = this.getSupportedDrawOptions();\n\n      menu.addDrawMenu('Draw with', opts, arg => {\n         if (arg.indexOf(kInspect) === 0)\n            return this.showInspector(arg);\n\n         this.decodeOptions(arg); // obsolete, should be implemented differently\n\n         if (this.options.need_fillcol && this.fillatt?.empty())\n            this.fillatt.change(5, 1001);\n\n         // redraw all objects\n         this.interactiveRedraw('pad', 'drawopt');\n      });\n   }\n\n   /** @summary Perform automatic zoom inside non-zero region of histogram */\n   autoZoom() {\n      let left = this.getSelectIndex('x', 'left', -1),\n          right = this.getSelectIndex('x', 'right', 1);\n      const dist = right - left, histo = this.getHisto(), xaxis = this.getAxis('x');\n\n      if (dist === 0) return;\n\n      // first find minimum\n      let min = histo.getBinContent(left + 1);\n      for (let indx = left; indx < right; ++indx)\n         min = Math.min(min, histo.getBinContent(indx+1));\n      if (min > 0) return; // if all points positive, no chance for autoscale\n\n      while ((left < right) && (histo.getBinContent(left+1) <= min)) ++left;\n      while ((left < right) && (histo.getBinContent(right) <= min)) --right;\n\n      // if singular bin\n      if ((left === right-1) && (left > 2) && (right < this.nbinsx-2)) {\n         --left; ++right;\n      }\n\n      if ((right - left < dist) && (left < right))\n         return this.getFramePainter().zoom(xaxis.GetBinCoord(left), xaxis.GetBinCoord(right));\n   }\n\n   /** @summary Checks if it makes sense to zoom inside specified axis range */\n   canZoomInside(axis, min, max) {\n      const xaxis = this.getAxis('x');\n\n      if ((axis === 'x') && (xaxis.FindBin(max, 0.5) - xaxis.FindBin(min, 0) > 1)) return true;\n\n      if ((axis === 'y') && (Math.abs(max-min) > Math.abs(this.ymax-this.ymin)*1e-6)) return true;\n\n      return false;\n   }\n\n   /** @summary Call appropriate draw function */\n   async callDrawFunc(reason) {\n      const main = this.getFramePainter();\n\n      if (main && (main.mode3d !== this.options.Mode3D) && !this.isMainPainter())\n         this.options.Mode3D = main.mode3d;\n\n      return this.options.Mode3D ? this.draw3D(reason) : this.draw2D(reason);\n   }\n\n   /** @summary Draw in 2d */\n   async draw2D(reason) {\n      this.clear3DScene();\n\n      return this.drawFrameAxes().then(res => {\n         return res ? this.drawingBins(reason) : false;\n      }).then(res => {\n         if (res)\n            return this.draw1DBins().then(() => this.addInteractivity());\n      }).then(() => this);\n   }\n\n   /** @summary Draw in 3d */\n   async draw3D(reason) {\n      console.log('3D drawing is disabled, load ./hist/RH1Painter.mjs');\n      return this.draw2D(reason);\n   }\n\n   /** @summary Readraw histogram */\n   async redraw(reason) {\n      return this.callDrawFunc(reason);\n   }\n\n   static async _draw(painter, opt) {\n      return ensureRCanvas(painter).then(() => {\n         painter.setAsMainPainter();\n\n         painter.options = { Hist: false, Bar: false, BarStyle: 0,\n                             Error: false, ErrorKind: -1, errorX: gStyle.fErrorX,\n                             Zero: false, Mark: false,\n                             Line: false, Fill: false, Lego: 0, Surf: 0,\n                             Text: false, TextAngle: 0, TextKind: '', AutoColor: 0,\n                             BarOffset: 0, BarWidth: 1, BaseLine: false,\n                             Mode3D: false, FrontBox: false, BackBox: false };\n\n         const d = new DrawOptions(opt);\n         if (d.check('R3D_', true))\n            painter.options.Render3D = constants.Render3D.fromString(d.part.toLowerCase());\n\n         const kind = painter.v7EvalAttr('kind', 'hist'),\n             sub = painter.v7EvalAttr('sub', 0),\n             has_main = !!painter.getMainPainter(),\n             o = painter.options;\n\n         o.Text = painter.v7EvalAttr('drawtext', false);\n         o.BarOffset = painter.v7EvalAttr('baroffset', 0.0);\n         o.BarWidth = painter.v7EvalAttr('barwidth', 1.0);\n         o.second_x = has_main && painter.v7EvalAttr('secondx', false);\n         o.second_y = has_main && painter.v7EvalAttr('secondy', false);\n\n         switch (kind) {\n            case 'bar': o.Bar = true; o.BarStyle = sub; break;\n            case 'err': o.Error = true; o.ErrorKind = sub; break;\n            case 'p': o.Mark = true; break;\n            case 'l': o.Line = true; break;\n            case 'lego': o.Lego = sub > 0 ? 10+sub : 12; o.Mode3D = true; break;\n            default: o.Hist = true;\n         }\n\n         painter.scanContent();\n\n         return painter.callDrawFunc();\n      });\n   }\n\n   /** @summary draw RH1 object */\n   static async draw(dom, histo, opt) {\n      return RH1Painter._draw(new RH1Painter(dom, histo), opt);\n   }\n\n} // class RH1Painter\n\nexport { RH1Painter };\n","import { settings, gStyle } from '../core.mjs';\nimport { RH1Painter as RH1Painter2D } from '../hist2d/RH1Painter.mjs';\nimport { RAxisPainter } from '../gpad/RAxisPainter.mjs';\nimport { assignFrame3DMethods, drawBinsLego } from './hist3d.mjs';\n\n\nclass RH1Painter extends RH1Painter2D {\n\n   /** @summary Draw 1-D histogram in 3D mode */\n   draw3D(reason) {\n      this.mode3d = true;\n\n      const main = this.getFramePainter(), // who makes axis drawing\n            is_main = this.isMainPainter(), // is main histogram\n            zmult = 1 + 2*gStyle.fHistTopMargin;\n      let pr = Promise.resolve(this);\n\n      if (reason === 'resize') {\n         if (is_main && main.resize3D()) main.render3D();\n         return pr;\n      }\n\n      this.deleteAttr();\n\n      this.scanContent(true); // may be required for axis drawings\n\n      if (is_main) {\n         assignFrame3DMethods(main);\n         pr = main.create3DScene(this.options.Render3D).then(() => {\n            main.setAxesRanges(this.getAxis('x'), this.xmin, this.xmax, null, this.ymin, this.ymax, null, 0, 0);\n            main.set3DOptions(this.options);\n            main.drawXYZ(main.toplevel, RAxisPainter, { use_y_for_z: true, zmult, zoom: settings.Zooming, ndim: 1, draw: true, v7: true });\n         });\n      }\n\n      if (!main.mode3d)\n         return pr;\n\n      return pr.then(() => this.drawingBins(reason)).then(() => {\n         // called when bins received from server, must be reentrant\n         const main = this.getFramePainter();\n\n         drawBinsLego(this, true);\n         this.updatePaletteDraw();\n         main.render3D();\n         main.addKeysHandler();\n         return this;\n      });\n   }\n\n      /** @summary draw RH1 object */\n   static async draw(dom, histo, opt) {\n      return RH1Painter._draw(new RH1Painter(dom, histo), opt);\n   }\n\n} // class RH1Painter\n\nexport { RH1Painter };\n"],"names":["RH1Painter","RHistPainter","constructor","dom","histo","super","this","wheel_zoomy","scanContent","when_axis_changed","getHisto","nbinsx","extractAxesProperties","hmin","hmin_nz","hmax","hsum","isDisplayItem","fContMin","fContMinPos","fContMax","left","getSelectIndex","right","scan_xleft","scan_xright","value","err","first","i","getBinContent","Math","min","max","stat_entries","ymin_nz","abs","draw_content","ymin","ymax","dy","countStat","cond","xaxis","getAxis","res","name","meanx","meany","rmsx","rmsy","integral","entries","xmax","wmax","stat_sumw","stat_sumwx","stat_sumwx2","xx","w","GetBinCoord","sqrt","fillStatistic","stat","dostat","data","print_name","print_entries","floor","print_mean","print_rms","print_under","print_over","print_integral","print_skew","print_kurt","clearStat","addText","format","drawBars","handle","funcs","width","height","createG","i1","i2","di","stepi","pmain","getFramePainter","x1","x2","grx1","grx2","y","gry1","gry2","bars","barsl","barsr","swap_xy","Number","isFinite","options","BaseLine","scale_ymin","round","gry","logx","grx","logy","BarOffset","BarWidth","BarStyle","fillatt","empty","setSolidColor","draw_g","append","attr","call","func","style","d3_rgb","color","brighter","formatHex","darker","drawFilledErrors","bins1","bins2","x","yerr","getBinError","push","unshift","path1","buildSvgCurve","line","ErrorKind","path2","cmd","draw1DBins","rect","getFrameRect","removeG","createHistDrawAttributes","prepareDraw","extra","only_indexes","getGrFuncs","second_x","second_y","Bar","drawHistBins","want_tooltip","isBatchMode","settings","Tooltip","exclude_zero","Zero","show_errors","Error","show_line","Line","show_text","Text","startx","currx","curry","curry_min","curry_max","prevy","prevx","bestimin","bestimax","my","yerr1","yerr2","bincont","binerr","mx1","mx2","midx","text_font","show_markers","Mark","lastbin","path_fill","path_err","path_marker","path_line","hints_err","endx","endy","dend","v7EvalAttr","createv7AttMarker","markeratt","size","resetPos","v7EvalFont","align","angle","TextKind","space","setAngle","setSize","startTextDrawing","use_minmax","lw","lineatt","gStyle","fEndErrorSize","draw_markers","draw_bin","besti","lbl","toString","floatToString","fPaintTextFormat","drawText","text","latex","length","create","edx","errorX","mmx1","fill_for_interactive","Hist","h0","gry0","close_path","finishTextDrawing","getBinTooltips","bin","tips","getObjectHint","stepx","xlbl","getAxisBinTip","cont","axisAsText","toPrecision","$baseh","fStatFormat","processTooltipEvent","pnt","ttrect","selectChild","Mode3D","remove","getFrameWidth","getFrameHeight","show_rect","findbin","gapx","l","r","GetBinGrX","GetBinGrY","yy","pnt_x","pnt_y","m","best","dist","dx","nx","midy","touch","nproc","msize","getFullSize","title","fTitle","exact","color1","color2","getFillColorAlt","lines","disabled","changed","addHighlightStyle","property","menu","menu_dist","radius","user_info","obj","fillHistContextMenu","add","autoZoom","opts","getSupportedDrawOptions","addDrawMenu","arg","indexOf","kInspect","showInspector","decodeOptions","need_fillcol","change","interactiveRedraw","indx","zoom","canZoomInside","axis","FindBin","callDrawFunc","reason","main","mode3d","isMainPainter","draw3D","draw2D","clear3DScene","drawFrameAxes","then","drawingBins","addInteractivity","console","log","redraw","_draw","painter","opt","ensureRCanvas","setAsMainPainter","fErrorX","Fill","Lego","Surf","TextAngle","AutoColor","FrontBox","BackBox","d","DrawOptions","check","Render3D","constants","fromString","part","toLowerCase","kind","sub","has_main","getMainPainter","o","draw","RH1Painter2D","is_main","zmult","fHistTopMargin","pr","Promise","resolve","resize3D","render3D","deleteAttr","assignFrame3DMethods","create3DScene","setAxesRanges","xmin","set3DOptions","drawXYZ","toplevel","RAxisPainter","use_y_for_z","Zooming","ndim","v7","drawBinsLego","updatePaletteDraw","addKeysHandler"],"sourceRoot":""}