"use strict";(self.webpackChunkthreejs_editor_react=self.webpackChunkthreejs_editor_react||[]).push([[1894],{1894:(t,i,e)=>{e.r(i),e.d(i,{TGraphTimePainter:()=>h});var s=e(9490),r=e(1597),n=e(6950),a=e(4978),o=e(4289);class h extends n.JW{redraw(){void 0===this.step&&this.startDrawing()}decodeOptions(t){const i=new r.nC(t||"REPEAT");this.options||(this.options={}),Object.assign(this.options,{once:i.check("ONCE"),repeat:i.check("REPEAT"),first:i.check("FIRST")}),this.storeDrawOpt(t)}async drawPrimitives(t){t||(t=0,this._doing_primitives=!0);const i=this.getObject()?.fSteps.arr[this.step];if(i&&!(t>=i.arr.length))return(0,o.$2)(this.getDom(),i.arr[t],i.opt[t]).then((i=>(i&&(i.$grtimeid=this.selfid,i.$grstep=this.step),this.drawPrimitives(t+1))));delete this._doing_primitives}continueDrawing(){if(!this.options)return;const t=this.getObject();if(this.options.first)delete this.step;else if(this.wait_animation_frame){delete this.wait_animation_frame;const t=this.getPadPainter();if(!t)return void delete this.step;this.drawPrimitives().then((()=>{t.cleanPrimitives((t=>t.$grtimeid===this.selfid&&t.$grstep!==this.step)),this.continueDrawing()}))}else if(this.running_timeout)clearTimeout(this.running_timeout),delete this.running_timeout,this.wait_animation_frame=!0,requestAnimationFrame((()=>this.continueDrawing()));else{let i=Math.max(t.fSleepTime,10);if(++this.step>t.fSteps.arr.length){if(!this.options.repeat)return void delete this.step;this.step=0,i=Math.max(5e3,5*i)}this.running_timeout=setTimeout((()=>this.continueDrawing()),i)}}startDrawing(){return this.step=0,this.drawPrimitives().then((()=>(this.continueDrawing(),this)))}static async draw(t,i,e){if(!i.fFrame)return console.error("Frame histogram not exists"),null;const r=new h(t,i);if(r.getMainPainter())return console.error("Cannot draw graph time on top of other histograms"),null;if(r.decodeOptions(e),!i.fFrame.fTitle&&i.fTitle){const t=i.fTitle.split(";");i.fFrame.fTitle=t[0],t[1]&&(i.fFrame.fXaxis.fTitle=t[1]),t[2]&&(i.fFrame.fYaxis.fTitle=t[2])}return r.selfid="grtime_"+s.internals.id_counter++,a.N.draw(t,i.fFrame,"").then((()=>(r.addToPadPrimitives(),r.startDrawing())))}}}}]);
//# sourceMappingURL=1894.ae24ff0a.chunk.js.map